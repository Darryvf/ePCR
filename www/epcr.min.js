function setMobiscroll(a,b){}function doEmail(){var a="<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html>"+"<head>"+"<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />"+"<title>ePCR report</title>"+"<style type='text/css'>"+"div#jqt > * {display: none;}"+"div #export_page {display: inline;}"+"div #export_page a{display: none;}"+"div #export_page h1{display: none;}"+"div #export_page p#header{font-size : 12px;}"+"div #export_page .logo{margin-right: 20px;}"+"div #export_page hr {border: 2px solid #000;margin-bottom: 10px;}"+"#vitals_sum table, #procedures_sum table:not(.singleEntry){text-align: center; color: black; border: 1px solid #000;}"+"div #export_page table .head {font: bold 14px Helvetica;}"+"div #export_page table .answer {font: bold 15px Helvetica;}"+"div #export_page table .question {font: normal 15px Helvetica;}"+"</style>"+"</head>"+"<body leftmargin='0' marginwidth='0' topmargin='0' marginheight='0' offset='0'>";var b=a+document.getElementById("sum_content").innerHTML+"</body></html>";window.plugins.emailComposer.showEmailComposer("ePCR report",b,localStorage.sendReportTo,"","",true)}function printIt(){var a=document.getElementById("sum_content").innerHTML;window.plugins.printPlugin.print(a,function(a){alert("Printing successful")},function(a){if(!a.available){alert("Printing is not available on your device")}else{};})}function onFail(a){alert("Failed because: "+a)}function resetPicture(a){var b=document.getElementById(a);b.src="";b.className="pictureHidden"}function removePicture(a){if(secondClick==true){secondClick=false;return false}var b=confirm("Do you really want to erase this picture?");if(b){resetPicture(a)}secondClick=true}function setPicture(a,b){var c=document.getElementById(a);c.src=b;if(b==""||b==undefined){c.className="pictureHidden"}else c.className="picture"}function onSuccess(a){var b=document.getElementById(currentPicture);b.src="data:image/png;base64,"+a;b.className="picture";currentPicture=""}function takePicture(a){currentPicture=a;navigator.camera.getPicture(onSuccess,onFail,{quality:30,allowEdit:true,encodingType:Camera.EncodingType.PNG,targetWidth:300,targetHeight:300})}function onDeviceReady(){pictureSource=navigator.camera.PictureSourceType;destinationType=navigator.camera.DestinationType}function onBodyLoad(){document.addEventListener("deviceready",onDeviceReady,false)}function getSystemTime(){var a=new Date;return a.getTime()}function stopCount(){clearTimeout(time);timer_is_on=false;cpr_counter=0;$("#timer").text("")}function doTimer(){if(timer_is_on==false){timer_is_on=true;timedCount()}}function timedCount(){var a=parseInt(cpr_counter/60);var b=cpr_counter-a*60;$("#timer").text(a+" min "+b+" sec");cpr_counter=cpr_counter+1;time=setTimeout("timedCount()",1e3)}function calculateTotalApgar(){var a;var b=parseInt($("#apgar_appearance").val());var c=parseInt($("#apgar_pulse_rate").val());var d=parseInt($("#apgar_grimace").val());var e=parseInt($("#apgar_activity").val());var f=parseInt($("#apgar_respiratory").val());a=b+c+d+e+f;$("#apgar_total").text("Total: "+a);return a}function calculateTotalNeuro(){var a;var b=parseInt($("#eyes").val());var c=parseInt($("#verbal").val());var d=parseInt($("#motor").val());a=b+c+d;$("#total_neuro").text("Total: "+a)}function calculateFallDistance(){var a=$("#distance_fall").val();var b;var c=$("#distance_fall_unit").prop("checked");if(a!=""){if(c==false){b=a/3.2808399;$("#distance_fall").val(b.toFixed(1))}else{b=a*3.2808399;$("#distance_fall").val(b.toFixed(1))}}}function calculateSpeed(){var a=$("#approx_speed").val();var b;var c=$("#speed_unit").prop("checked");if(a!=""){if(c==false){b=a*1.609344;$("#approx_speed").val(b.toFixed(1))}else{b=a/1.609344;$("#approx_speed").val(b.toFixed(1))}}}function calculateTemperature(){var a=$("#temp").val();var b;var c=$("#temp_unit").prop("checked");if(a!=""){if(c==false){b=(a-32)*(5/9);$("#temp").val(b.toFixed(1))}else{b=a*(9/5)+32;$("#temp").val(b.toFixed(1))}}}function calculateMmol(){var a=$("#bgl").val();var b;var c=$("#bgl_unit").prop("checked");if(a!=""){if(c==false){b=a/18;$("#bgl").val(b.toFixed(1))}else{b=a*18;$("#bgl").val(b.toFixed(1))}}}function calculateWeight(){var a=$("#weight").val();var b;var c=$("#weight_unit").prop("checked");if(a!=""){if(c==false){b=a/2.2;$("#weight").val(b.toFixed(1))}else{b=a*2.2;$("#weight").val(b.toFixed(1))}}}function calculateAge(){var a=Date.parse($("#date_of_birth").val());var b=Math.floor((getSystemTime()-a)/1e3);var c=Math.floor(b/60);var d=Math.floor(c/60);var e=Math.floor(d/24);var f=Math.floor(e/365.25);e=e-Math.floor(f*365.25);$("#patientAge").html(f+" years "+e+" "+"d")}function calculateBurnSurface(){var a=0;var b=$("#total_burn_percentage").val();$("#burn_body_parts img").each(function(b){if($(this).data("burn_degree")>="2")a+=parseFloat($(this).data("surface"))});$("#total_burn_percentage").val(a)}function renderColors(a){var b=$(a).prop("src");b=b.slice(0,-5);var c=$(a).data("burn_degree");$(a).prop("src",b+c+".png")}function toggle_body_part(a,b,c,d,e){if(moved)return false;var f;if(bodyType=="adult")f=b;if(bodyType=="obese")f=c;if(bodyType=="child")f=d;if(bodyType=="infant")f=e;var g=$(a).data("burn_degree");var h=$(a).prop("src");if($(a).data("burn_degree")=="0"){$(a).prop("src",h.slice(0,-5)+"1.png");$(a).data("burn_degree","1");$(a).data("surface",f)}else if($(a).data("burn_degree")=="1"){$(a).prop("src",h.slice(0,-5)+"2.png");$(a).data("burn_degree","2");$(a).data("surface",f)}else if($(a).data("burn_degree")=="2"){$(a).prop("src",h.slice(0,-5)+"3.png");$(a).data("burn_degree","3");$(a).data("surface",f)}else if($(a).data("burn_degree")=="3"){$(a).prop("src",h.slice(0,-5)+"0.png");$(a).data("burn_degree","0");$(a).data("surface",f)}calculateBurnSurface()}function init_body_parts(){$("#burn_body_parts img").data("burn_degree","0");$("#burn_body_parts img").data("surface","")}function changeSurfaces(a){var b=["4.5","1","8.5","10"];var c=["9","12.5","9","8"];var d=["2.25","1.25","2.25","2"];var e=["4.5","5","3.25","4"];var f;switch(a){case"adult":f=0;break;case"obese":f=1;break;case"child":f=2;break;case"infant":f=3;break;default:}$("#burn_head_front").data("surface",b[f]);$("#burn_head_back").data("surface",b[f]);$("#burn_chest").data("surface",c[f]);$("#burn_abdomen").data("surface",c[f]);$("#burn_upper_back").data("surface",c[f]);$("#burn_lower_back").data("surface",c[f]);$("#burn_ulx_up_front").data("surface",d[f]);$("#burn_ulx_low_front").data("surface",d[f]);$("#burn_ulx_up_back").data("surface",d[f]);$("#burn_ulx_low_back").data("surface",d[f]);$("#burn_urx_up_front").data("surface",d[f]);$("#burn_urx_low_front").data("surface",d[f]);$("#burn_urx_up_back").data("surface",d[f]);$("#burn_urx_low_back").data("surface",d[f]);$("#burn_llx_up_front").data("surface",e[f]);$("#burn_llx_low_front").data("surface",e[f]);$("#burn_llx_up_back").data("surface",e[f]);$("#burn_llx_low_back").data("surface",e[f]);$("#burn_lrx_up_front").data("surface",e[f]);$("#burn_lrx_low_front").data("surface",e[f]);$("#burn_lrx_up_back").data("surface",e[f]);$("#burn_lrx_low_back").data("surface",e[f])}function reflectCarMoto(a){var b=$("#car").prop("checked");if(b==true)$("#car").prop("checked",false);else $("#car").prop("checked",true);car_Motorcycle();$("#car").prop("checked",b);var c="#"+a;toggleSeat($(c))}function car_Motorcycle(){if($("#car").prop("checked")==false){$("#motorcycle_outline").hide();$(".motorcycle_details").hide();$("#car_outline").show();$(".car_details").show();$("#li_driver_passenger").slideDown()}else{$("#car_outline").hide();$(".car_details").hide();$("#motorcycle_outline").show();$(".motorcycle_details").show();$("#li_driver_passenger").slideUp()}}function reflect_lungs(){if($("#ctax4").prop("checked")==false){$("#lungs_related").show()}else{$("#lungs_related").hide()}}function lungs_Show_Hide(){if($("#ctax4").prop("checked")==true){$("#lungs_related").slideDown();$("#UR_Lung_Sound").val(0);$("#UL_Lung_Sound").val(0);$("#LR_Lung_Sound").val(0);$("#LL_Lung_Sound").val(0)}else{$("#lungs_related").slideUp();$("#UR_Lung_Sound").val(1);$("#UL_Lung_Sound").val(1);$("#LR_Lung_Sound").val(1);$("#LL_Lung_Sound").val(1)}}function select_show_hide(a,b,c){var d=$(c);var e="#"+a.id+" option:selected";var f=$(e).val();if(f==b){d.slideDown()}else{d.slideUp()}}function reflect_select(a,b,c){var d=$(c);var e=a+" option:selected";var f=$(e).val();if(f==b){d.show()}else{d.hide()}}function reflectDBReverse(a,b){var c=$(a);var d=$(b);if($(c).prop("checked")==false){d.show()}else{d.hide()}}function reflectDB(a,b){var c=$(a);var d=$(b);if($(c).prop("checked")==true){d.show()}else{d.hide()}}function element_Show_Hide_Reverse(a,b){var c=$(b);if($(a).prop("checked")==true){c.slideDown()}else{c.slideUp()}}function indiv_Show_Hide(a,b){var c=$(b);if($(a).prop("checked")==false){c.show()}else{c.hide()}}function reflectGCS(a,b,c){var d=$(b);var e=$(c);if($(a).prop("checked")==true){e.hide();d.show()}else{d.hide();e.show()}}function elements_Show_Hide(a,b,c){var d=$(b);var e=$(c);if($(a).prop("checked")==false){e.hide();d.show()}else{d.hide();e.show()}}function element_Show_Hide(a,b){var c=$(b);if($(a).prop("checked")==false){c.slideDown()}else{c.slideUp()}}function delete_show_hide(a){var b=$(a).parent();var c=b.find(".delete");if(c.css("display")=="block"){c.slideUp();$(a).prop("src","images/img/disabled.png")}else{c.slideDown();$(a).prop("src","images/img/disabled_unlock.png")}}function toggleElement(a){if(moved)return false;if($(a).css("display")=="block"){$(a).css("display","none")}else{$(a).css("display","block")}}function toggleTrauma(){if($("#is_trauma").prop("checked")==true){$("#traumaTypes li").hide();$("#li_is_trauma").show()}else{$("#traumaTypes li").show()}saveTrauma()}function reflect_perrl(){if($("#perrl").prop("checked")==false){$("#li_perrl").show();$("#left_eye").prop("placeholder","L")}else{$("#li_perrl").hide();$("#left_eye").prop("placeholder","Size")}}function toggle_perrl(){if($("#perrl").prop("checked")==true){$("#li_perrl").slideDown();$("#left_eye").prop("placeholder","L")}else{$("#li_perrl").slideUp();$("#left_eye").prop("placeholder","Size")}}function show_hide_intake(){if($("#in_out_intake").prop("checked")==false){$("#intakeDiv").css("display","block");$("#outtakeDiv").css("display","none")}else{$("#intakeDiv").css("display","none");$("#outtakeDiv").css("display","block")}}function burnToggle(a){bodyType=a;$('#burnbar input[type="radio"]').prop("checked","");if(a=="adult"){$("#burn_adult_shortcut").prop("checked","checked")}if(a=="obese"){$("#burn_obese_shortcut").prop("checked","checked")}if(a=="child"){$("#burn_child_shortcut").prop("checked","checked")}if(a=="infant"){$("#burn_infant_shortcut").prop("checked","checked")}changeSurfaces(a);calculateBurnSurface()}function gi_guToggle(a){$('#gigubar input[type="radio"]').prop("checked","");if(a=="gi"){$("#giDiv").css("display","block");$("#guDiv").css("display","none");$("#ob_gynDiv").css("display","none");$("#gi_shortcut").prop("checked","checked")}if(a=="gu"){$("#giDiv").css("display","none");$("#guDiv").css("display","block");$("#ob_gynDiv").css("display","none");$("#gu_shortcut").prop("checked","checked")}if(a=="ob_gyn"){$("#giDiv").css("display","none");$("#guDiv").css("display","none");$("#ob_gynDiv").css("display","block");$("#ob_gyn_shortcut").prop("checked","checked")}window.scrollTo(0,0)}function abcToggle(a){$('#abcbar input[type="radio"]').prop("checked","");if(a=="a"){$("#airwayDiv").css("display","block");$("#breathingDiv").css("display","none");$("#circulationDiv").css("display","none");$("#airway_shortcut").prop("checked","checked")}if(a=="b"){$("#airwayDiv").css("display","none");$("#breathingDiv").css("display","block");$("#circulationDiv").css("display","none");$("#breathing_shortcut").prop("checked","checked")}if(a=="c"){$("#airwayDiv").css("display","none");$("#breathingDiv").css("display","none");$("#circulationDiv").css("display","block");$("#circulation_shortcut").prop("checked","checked")}window.scrollTo(0,0)}function setButtonColor(a){if($(a).data("status")=="positive"){$(a).prop("class","twoTap")}if($(a).data("status")=="negative"){$(a).prop("class","oneTap")}if($(a).data("status")!="negative"&&$(a).data("status")!="positive"){$(a).prop("class","")}}function colorECGButtons(){setButtonColor($("#ecg_i"));setButtonColor($("#ecg_avr"));setButtonColor($("#ecg_v1"));setButtonColor($("#ecg_v4"));setButtonColor($("#ecg_ii"));setButtonColor($("#ecg_avl"));setButtonColor($("#ecg_v2"));setButtonColor($("#ecg_v5"));setButtonColor($("#ecg_iii"));setButtonColor($("#ecg_avf"));setButtonColor($("#ecg_v3"));setButtonColor($("#ecg_v6"))}function colorChiefComplaintButtons(){setButtonColor($("#cc_diff_breathing"));setButtonColor($("#cc_chest_pain"));setButtonColor($("#cc_nausea"));setButtonColor($("#cc_vomiting"));setButtonColor($("#cc_diarrhea"));setButtonColor($("#cc_dizziness"));setButtonColor($("#cc_headache"));setButtonColor($("#cc_loc"));setButtonColor($("#cc_numb_tingling"));setButtonColor($("#cc_gal_weakness"));setButtonColor($("#cc_lethargy"));setButtonColor($("#cc_neck_pain"))}function toggleSeat(a){if(moved)return false;if($(a).prop("id")=="car_steering_wheel"){a=$("#car1")}$("#car_seats div").data("status","negative");$("#car_seats div").css("background","white");$("#motorcycle_seats div").data("status","negative");$("#motorcycle_seats div").css("background","white");$(a).data("status","positive");$(a).css("background","green")}function gi_outline_toggle(a){if(moved)return false;if($(a).data("green")==false){$(a).css("background","green");$(a).data("green",true)}else{$(a).css("background","white");$(a).data("green",false)}}function oneTap_one_color_button(a){if(moved)return false;if($(a).data("status")=="negative"){$(a).prop("class","twoTap");$(a).data("status","positive")}else{$(a).prop("class","");$(a).data("status","negative")}}function oneTap_button(a){if(moved)return false;if($(a).data("status")=="negative"){$(a).prop("class","twoTap");$(a).data("status","positive")}else if($(a).data("status")=="positive"){$(a).prop("class","");$(a).data("status","")}else{$(a).prop("class","oneTap");$(a).data("status","negative")}}function getBool(a){if(a=="true")return true;else return false}function testConnection(){var a=navigator.network.connection.type;var b={};b[Connection.UNKNOWN]="Unknown connection";b[Connection.ETHERNET]="Ethernet connection";b[Connection.WIFI]="WiFi connection";b[Connection.CELL_2G]="Cell 2G connection";b[Connection.CELL_3G]="Cell 3G connection";b[Connection.CELL_4G]="Cell 4G connection";b[Connection.NONE]="No network connection";if(a==Connection.NONE){alert(b[Connection.NONE]);jQT.goBack()}}function addPartner(){$("#employee_frequent_partners li:gt(1)").remove();var a=","+$("#partner_last_name").val()+" "+$("#partner_first_name").val();localStorage.frequent_partners+=a;jQT.goBack()}function loadPartners(){$("#employee_frequent_partners li:gt(1)").remove();var a=[];if(localStorage.frequent_partners!="")a=localStorage.frequent_partners.split(",");for(var b=0;b<a.length;b++){var c=a[b];var d=$("#partner_template").clone();d.removeAttr("id");d.removeAttr("style");d.data("entryId",b);d.appendTo("#employee_frequent_partners");d.find(".partner_entry").text(c);d.find(".delete").bind("touchstart",function(b){var c=$(this).parent();var d=c.data("entryId");a.splice(c,1);localStorage.frequent_partners=a.join(",");c.slideUp();b.stopPropagation()});d.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()})}}function loadSettings(){hidePatientPageWidget();$("#partner_last_name").val("");$("#partner_first_name").val("");$("#employee_last_name").val(localStorage.employee_last_name);$("#employee_first_name").val(localStorage.employee_first_name);$("#employee_id").val(localStorage.employee_id);$("#employee_position").val(localStorage.employee_position);$("#employee_location").val(localStorage.employee_location);$("#send_report_to").val(localStorage.sendReportTo);setPicture("employeeImage",localStorage.photoID);loadPartners()}function saveSettings(){saveSettingsCore();jQT.goBack();return false}function saveSettingsCore(){localStorage.employee_last_name=$("#employee_last_name").val();localStorage.employee_first_name=$("#employee_first_name").val();localStorage.employee_id=$("#employee_id").val();localStorage.employee_position=$("#employee_position option:selected").val();localStorage.employee_location=$("#employee_location").val();localStorage.sendReportTo=$("#send_report_to").val();var a=document.getElementById("employeeImage").src;if(a.substr(0,4)!="data")a="";localStorage.photoID=a}function errorHandler(a,b){alert("Oops. Error was "+b.message+" (Code "+b.code+")");a.executeSql("INSERT INTO errors (code, message) VALUES (?, ?);",[b.code,b.message]);return false}function processCode(a,b){if(getCurrentPatientId()=="0"){insertVoidPatientFromCode()}saveCode(b);var c;switch(b){case"CPR Start":$("#codeList li").show();doTimer();break;case"CPR Stop":stopCount();break;case"ROSC":jQT.goTo("#code_list","dissolve");stopCount();break;case"PRONOUNCE":jQT.goTo("#code_list","dissolve");stopCount();break;default:}}function insertVoidPatientFromCode(){_uuid=UUID.generate();db.transaction(function(a){a.executeSql("INSERT INTO patients (id, last_name, first_name, date_of_birth, gender, weight, weight_unit, contact, time) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);",[_uuid,"Code",getFormatedDate(getSystemTime()),"","true","","false","false",getSystemTime()],function(){setCurrentPatientId(_uuid);console.log("available patient id"+getAvailablePatientId());createDummyEntries();var a=last_name+", "+first_name;calculatePatients();showHideGCS()},errorHandler)});return false}function goToPage(a,b,c){jQT.goTo(a,b,c)}function loadCodeList(){showPatientPageWidget();$("#code_sorted li").remove();db.transaction(function(a){a.executeSql("SELECT * FROM code WHERE patient = ? ORDER BY CAST(time AS INT);",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){$("#code_list ul.basic").hide();var d=b.rows.item(c);$("#code_sorted").append("<li>"+getFormatedPreciseTime(d.time)+": "+d.code_name+"</li>")}},errorHandler)})}function saveCode(a){console.log(getCurrentPatientId());db.transaction(function(b){b.executeSql("INSERT INTO code (patient, code_name, time) VALUES (?, ?, ?);",[getCurrentPatientId(),a,getSystemTime()],calculatePatients(),errorHandler)})}function loadCode(){$("#codeList li").hide();$("#code_start").show()}function fillSessionStorage(a,b,c){sessionStorage.currentPatientId=a}function deletePatientById(a){db.transaction(function(b){b.executeSql("DELETE FROM patients WHERE id=?;",[a],function(){calculatePatients();deleteRelatedEntries(a)},errorHandler)})}function loadPatientsList(){hidePatientPageWidget();$("#patients_sorted li:gt(0)").remove();db.transaction(function(a){a.executeSql("SELECT id, last_name, first_name FROM patients ORDER BY last_name;",[],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);var e=$("#entryTemplate").clone();e.removeAttr("id");e.removeAttr("style");e.data("entryId",d.id);e.data("lastName",d.last_name);e.data("firstName",d.first_name);e.appendTo("#patients_sorted");e.find(".first_name").text(d.first_name);e.find(".last_name").text(d.last_name);e.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()});e.find(".unlock_line").bind("click",function(a){a.stopPropagation();a.preventDefault()});e.find(".delete").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");deletePatientById(c);b.slideUp();a.stopPropagation()});e.find(".delete").bind("click",function(a){a.stopPropagation();a.preventDefault()});e.find(".last_name").parent().bind("click",function(a){var b=$(this);var c=b.data("entryId");var d=b.data("lastName");var e=b.data("firstName");fillSessionStorage(c,d,e);jQT.goTo("#patient","flip")})}},errorHandler)})}function redirect(a,b){jQT.goTo(a,b)}function displayOrNot(a,b){if($(a).prop("checked")==true)$(b).show();else $(b).hide()}function customizeExport(){displayOrNot("#export_patient_info","#patient_info_sum");displayOrNot("#export_vitals","#vitals_sum");displayOrNot("#export_chief_complaint","#chief_complaint_sum");displayOrNot("#export_patient_hx","#patient_hx_sum");displayOrNot("#export_exam","#exam_sum");displayOrNot("#export_procedures","#procedures_sum");displayOrNot("#export_signatures","#signatures_sum");displayOrNot("#export_call_info","#call_info_sum");displayOrNot("#export_narrative","#narrative_sum");displayOrNot("#export_code_summary","#code_sum")}function getSeat(a){if(a=="car1")return"Driver";if(a=="car2")return"Front Passenger";if(a=="car3")return"Passenger left side";if(a=="car4")return"Passenger right side";if(a=="car5")return"Back passenger left side";if(a=="car6")return"Back passenger right side";if(a=="motorcycle1")return"Driver";if(a=="motorcycle2")return"Passenger";if(a=="motorcycle3")return"Side car passenger"}function positiveToTitle(a,b){if(a=="positive")return"+"+b+" ";else if(a=="negative")return"-"+b+" ";else return""}function positiveToYesNo(a){if(a=="positive")return"Yes";else if(a=="negative")return"No";else return"Not specified"}function valueToEmpty(a,b){suffix="";if(a=="1")suffix="st";if(a=="2")suffix="nd";if(a=="3")suffix="rd";if(a=="0")return"";else return b+": <strong>"+a+suffix+" degree</strong><br />"}function boolToEmpty(a,b){if(a=="true")return b+" ";else return""}function boolToChoice(a,b,c){if(a=="true")return b;else if(a=="false")return c}function writeLoadedExportPage(){var a=false;if($(export_full).prop("checked")==true)a=true;customizeExport();var b="true";$("#patient_info_sum").html("");$("#reporter_sum").html("");$("#reporter_sum").append("<img style='width:80px; height:80px; float:left; margin-right:5px;' src='"+localStorage.photoID+"'>"+"<strong>"+getFormatedDate(getSystemTime())+"<br />Report by "+localStorage.employee_first_name+" "+localStorage.employee_last_name+" ("+localStorage.employee_id+") "+$("#employee_position option[value="+localStorage.employee_position+"]").text()+" in "+localStorage.employee_location+"<strong><br /><br /><br /><br /><hr>");var c="";var d="";var e="";var f="";var g="";var h="";var i="";var j="";var k="";var l="";var m="";var n="";var o="";var p="";var q="",r="";var s="";var t="",u="";var v="",w="";var x="",y="";var z="",A="";var B="",C="";var D="",E="";var F="";var G="",H="";var I="",J="";var K="";var L="";db.transaction(function(a){a.executeSql("SELECT * FROM patients WHERE id=?",[getCurrentPatientId()],function(a,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);formatedDate=new Date;formatedDate.setTime(e.date_of_birth);if(e.gender=="false")b="false";var f="";if(e.weight_unit=="false")f="lb ("+(parseFloat(e.weight)/2.2).toFixed(1)+"Kg)";else f="Kg ("+(parseFloat(e.weight)*2.2).toFixed(1)+"lb)";$("#patient_info_sum").append("<strong><u>Patient info</u></strong> <a href='#patient_info'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Last name: </td><td class='answer'>"+e.last_name+"</td></tr>"+"<tr><td class='question'>First name: </td><td class='answer'>"+e.first_name+"</td></tr>"+"<tr><td class='question'>Date of Birth: </td><td class='answer'>"+formatedDate.toDateString()+"</td></tr>"+"<tr><td class='question'>Gender: </td><td class='answer'>"+boolToChoice(e.gender,"Male","Female")+"</td></tr>"+"<tr><td class='question'>Weight : </td><td class='answer'>"+e.weight+f+"</td></tr>"+"<tr><td class='question'>Street: </td><td class='answer'>"+e.street+"</td></tr>"+"<tr><td class='question'>City: </td><td class='answer'>"+e.city+"</td></tr>"+"<tr><td class='question'>Province: </td><td class='answer'>"+e.province+"</td></tr>"+"<tr><td class='question'>Home Phone: </td><td class='answer'>"+e.phone_home+"</td></tr>"+"<tr><td class='question'>Work Phone: </td><td class='answer'>"+e.phone_work+"</td></tr>"+"<tr><td class='question'>Cell Phone: </td><td class='answer'>"+e.phone_cell+"</td></tr>"+"<tr><td class='question'>Message Phone: </td><td class='answer'>"+e.phone_message+"</td></tr>"+"<tr><td class='question'>Insurance: </td><td class='answer'>"+e.insurance+"</td></tr>"+"<tr><td class='question'>MRN: </td><td class='answer'>"+e.mrn+"</td></tr>"+"<tr><td class='question'>Next of Kin: </td><td class='answer'>"+e.next_of_kin+"</td></tr>"+"<tr><td class='question'>Next of Kin Phone: </td><td class='answer'>"+e.nok_phone+"</td></tr>"+"<tr><td class='question'>Patient </td><td class='answer'>"+e.pt_number+" of "+e.of_number+"</td></tr>"+"</tbody></table><br /><hr>")}})});$("#vitals_sum").html("");c="<strong><u>Vitals Records</u></strong> <a href='#vitals_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>HR </td>"+"<td>Sys </td>"+"<td>Dia </td>"+"<td>FiO2 </td>"+"<td>SpO2 </td>"+"<td>Resp </td>"+"<td>LOC </td>"+"<td>L Eye </td>"+"<td>R Eye </td>"+"<td>BGL (mmol/L(mg/dL))</td>"+"<td>Temp (C(F))</td>"+"<td>Pain</td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM vitals WHERE patient=?",[getCurrentPatientId()],function(a,b){var d=true;for(var e=0;e<b.rows.length;e++){d=false;var f=b.rows.item(e);var g="",h="";if(f.temp!=""){if(f.temp_unit=="true")g=f.temp+" ("+(f.temp*(9/5)+32).toFixed(1)+")";else g=((f.temp-32)*(5/9)).toFixed(1)+" ("+f.temp+")"}if(f.bgl!=""){if(f.bgl_unit=="true")h=f.bgl+" ("+(f.bgl*18).toFixed(1)+")";else h=(f.bgl/18).toFixed(1)+" ("+f.bgl+")"}c+="<tr class='question'>"+"<td>"+getFormatedTime(f.time)+"</td>"+"<td>"+f.hr+"</td>"+"<td>"+f.sys+"</td>"+"<td>"+f.dia+"</td>"+"<td>"+f.fio2+"</td>"+"<td>"+f.spo2+"</td>"+"<td>"+f.resp+"</td>"+"<td>"+f.level_of_c+"</td>"+"<td>"+f.left_eye+"</td>"+"<td>"+f.right_eye+"</td>"+"<td>"+h+"</td>"+"<td>"+g+"</td>"+"<td>"+f.pain+"</td>"+"</tr>"}c+="</tbody></table><br /><hr>";if(d==false)$("#vitals_sum").append(c)})});$("#chief_complaint_sum").html("");db.transaction(function(b){b.executeSql("SELECT * FROM chief_complaint WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="";if(e.primary_complaint!="0")f=complaints_list[parseInt(e.primary_complaint)-1];else f=e.primary_other;if(e.assessed=="true")$("#chief_complaint_sum").append("<strong><u>Chief Complaint</u></strong> <a href='#chief_complaint'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Primary Chief Complaint: </td><td class='answer'>"+f+"</td></tr>"+"<tr><td class='question'>Secondary Chief Complaint: </td><td class='answer'>"+e.secondary_complaint+"</td></tr>"+"<tr><td class='question'>Difficulty Breathing: </td><td class='answer'>"+positiveToYesNo(e.diff_breathing)+"</td></tr>"+"<tr><td class='question'>Chest Pain: </td><td class='answer'>"+positiveToYesNo(e.chest_pain)+"</td></tr>"+"<tr><td class='question'>Nausea: </td><td class='answer'>"+positiveToYesNo(e.nausea)+"</td></tr>"+"<tr><td class='question'>Vomiting: </td><td class='answer'>"+positiveToYesNo(e.vomiting)+"</td></tr>"+"<tr><td class='question'>Diarrhea: </td><td class='answer'>"+positiveToYesNo(e.diarrhea)+"</td></tr>"+"<tr><td class='question'>Dizziness: </td><td class='answer'>"+positiveToYesNo(e.dizziness)+"</td></tr>"+"<tr><td class='question'>Headache: </td><td class='answer'>"+positiveToYesNo(e.headache)+"</td></tr>"+"<tr><td class='question'>Loss of Cons.: </td><td class='answer'>"+positiveToYesNo(e.loc)+"</td></tr>"+"<tr><td class='question'>Numbness Tingling: </td><td class='answer'>"+positiveToYesNo(e.numb_tingling)+"</td></tr>"+"<tr><td class='question'>General Weakness: </td><td class='answer'>"+positiveToYesNo(e.gal_weakness)+"</td></tr>"+"<tr><td class='question'>Lethargy: </td><td class='answer'>"+positiveToYesNo(e.lethargy)+"</td></tr>"+"<tr><td class='question'>Neck Pain: </td><td class='answer'>"+positiveToYesNo(e.neck_pain)+"</td></tr>"+"</tbody></table><br /><hr>");if(e.assessed=="false"&&a==true)$("#chief_complaint_sum").append("<strong><u>Chief Complaint</u></strong> <a href='#chief_complaint'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Primary Chief Complaint: </td><td class='answer'>No Complaint</td></tr>"+"<tr><td class='question'>Secondary Chief Complaint: </td><td class='answer'>No Complaint</td></tr>"+"<tr><td class='question'>Difficulty Breathing: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Chest Pain: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Nausea: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Vomiting: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Diarrhea: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Dizziness: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Headache: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Loss of Cons.: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Numbness Tingling: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>General Weakness: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Lethargy: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Neck Pain: </td><td class='answer'>No</td></tr>"+"</tbody></table><br /><hr>")}})});$("#patient_hx_sum").html("");db.transaction(function(b){b.executeSql("SELECT * FROM patient_hx WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f=[],g=[];var h=[],i=[];var j=[],k=[];var l=[];if(e.allergies!="")f=e.allergies.split(",");if(e.conditions!="")h=e.conditions.split(",");if(e.medications!="")j=e.medications.split(",");for(var m=0;m<f.length;m++){var n=f[m];g[m]=listOfAllergies[n]}if(e.custom_allergies!="")g.push(e.custom_allergies);for(var m=0;m<h.length;m++){var n=h[m];var o=n.substr(0,1);var p=n.substr(1,n.length);if(o=="C")l=cvs;if(o=="R")l=resp;if(o=="G")l=gugi;if(o=="N")l=neuro;if(o=="E")l=endocrine;if(o=="P")l=psych;i[m]=l[p]}if(e.custom_conditions!="")i.push(e.custom_conditions);for(var m=0;m<j.length;m++){var n=j[m];k[m]=medication_generic_alpha[n]+" ("+medication_trade_alpha[n]+")"}if(e.custom_medications!="")k.push(e.custom_medications);if(e.assessed=="true")$("#patient_hx_sum").append("<strong><u>Patient hx</u></strong> <a href='#patient_hx'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Allergies: </td><td class='answer'>"+g.join(", ")+"</td></tr>"+"<tr><td class='question'>Home Medications: </td><td class='answer'>"+k.join(", ")+"</td></tr>"+"<tr><td class='question'>Medical Cond. / Proc.: </td><td class='answer'>"+i.join(", ")+"</td></tr>"+"</tbody></table><br /><hr>");if(e.assessed=="false"&&a==true)$("#patient_hx_sum").append("<strong><u>Patient hx</u></strong> <a href='#patient_hx'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Allergies: </td><td class='answer'>None</td></tr>"+"<tr><td class='question'>Home Medications: </td><td class='answer'>None</td></tr>"+"<tr><td class='question'>Medical Cond. / Proc.: </td><td class='answer'>None</td></tr>"+"</tbody></table><br /><hr>")}})});$("#exam_sum").html("");db.transaction(function(a){a.executeSql("SELECT * FROM apgar WHERE patient = ?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var f=b.rows.item(c);d=f.total1;e=f.total5}})});db.transaction(function(b){b.executeSql("SELECT * FROM neuro WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var g=0;g<c.rows.length;g++){var h=c.rows.item(g);var i=parseInt(h.eyes);var j=parseInt(h.verbal);var k=parseInt(h.motor);var l=i+j+k;var m="",n="",o="";if(h.facial_droop=="true")m=" "+boolToChoice(h.facial_droop_side,"Left","Right")+" side";if(h.arm_drift=="true")n=" "+boolToChoice(h.arm_drift_side,"Left","Right")+" side";if(h["gcs"]=="true")o="<tr><td class='question'>GCS: </td><td class='answer'>"+l+" (eyes:"+i+", verbal:"+j+", motor:"+k+")</td></tr>";else o="<tr><td class='question'>APGAR: </td><td class='answer'>1 min:"+d+", "+"5 min:"+e+"</td></tr>";if(h.assessed=="false"&&a==true)if(h.gcs=="true")o="<tr><td class='question'>GCS: </td><td class='answer'>15 (eyes:4, verbal:5, motor:6)</td></tr>";else o="<tr><td class='question'>APGAR: </td><td class='answer'>1 min:11, 5 min:11</td></tr>";if(h.assessed=="true")f="<strong><u>Neuro</u></strong> <a href='#neuro'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Response: </td><td class='answer'>"+$("#avpu option[value="+h.avpu+"]").text()+"</td></tr>"+o+"<tr><td class='question'>PMS: </td><td class='answer'>"+" LUX: "+positiveToYesNo(h.luxr)+" RUX: "+positiveToYesNo(h.ruxr)+" LLX: "+positiveToYesNo(h.llxr)+" RLX: "+positiveToYesNo(h.rlxr)+"</td></tr>"+"<tr><td class='question'>Suspect Stroke: </td><td class='answer'>"+boolToChoice(h.suspect_stroke,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Facial Droop: </td><td class='answer'>"+boolToChoice(h.facial_droop,"Yes","No")+m+"</td></tr>"+"<tr><td class='question'>Arm Drift: </td><td class='answer'>"+boolToChoice(h.arm_drift,"Yes","No")+n+"</td></tr>"+"<tr><td class='question'>Speech: </td><td class='answer'>"+$("#speech option[value="+h.speech+"]").text()+"</td></tr>"+"</tbody></table><br /><hr>";if(h.assessed=="false"&&a==true)f="<strong><u>Neuro</u></strong> <a href='#neuro'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Response: </td><td class='answer'>Alert and Oriented x4</td></tr>"+o+"<tr><td class='question'>PMS: </td><td class='answer'>"+" LUX: positive, RUX: positive, LLX: positive, RLX: positive</td></tr>"+"<tr><td class='question'>Suspect Stroke: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Facial Droop: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Arm Drift: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Speech: </td><td class='answer'>Normal</td></tr>"+"</tbody></table><br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM abc WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",h="",i="",j="";if(e.tracheal_deviation=="true")f=" "+boolToChoice(e.tracheal_deviation_side,"Left","Right")+" side";if(e.flailed_chest=="true")h=" "+boolToChoice(e.flailed_chest_side,"Left","Right")+" side";if(e.peripheral_edema=="true"){i=" "+$("#peripheral_edema_location option[value="+e.peripheral_edema_location+"]").text();j="<tr><td class='question'>Edema Severity: </td><td class='answer'>"+$("#edema_severity option[value="+e.edema_severity+"]").text()+"</td></tr>"}if(e.assessed=="true")g="<strong><u>ABC's</u></strong> <a href='#abcs'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Open and Patent: </td><td class='answer'>"+boolToChoice(e.open_patent,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Tracheal Deviation: </td><td class='answer'>"+boolToChoice(e.tracheal_deviation,"Yes","No")+f+"</td></tr>"+"<tr><td class='question'>Interventions: </td><td class='answer'>"+boolToChoice(e.interventions,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Breathing Type : </td><td class='answer'>"+$("#breathing_type option[value="+e.breathing_type+"]").text()+"</td></tr>"+"<tr><td class='question'>Laboured: </td><td class='answer'>"+boolToChoice(e.laboured,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Effective: </td><td class='answer'>"+boolToChoice(e.effective,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Accessory Muscle: </td><td class='answer'>"+boolToChoice(e.accessory_muscle,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Nasal Flare: </td><td class='answer'>"+boolToChoice(e.nasal_flare,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Cough: </td><td class='answer'>"+boolToChoice(e.cough,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Productive: </td><td class='answer'>"+boolToChoice(e.productive,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Subcut. Emphysema: </td><td class='answer'>"+boolToChoice(e.subcut_emph,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Flailed Chest: </td><td class='answer'>"+boolToChoice(e.flailed_chest,"Yes","No")+h+"</td></tr>"+"<tr><td class='question'>Suspect Pneumothorax: </td><td class='answer'>"+boolToChoice(e.suspect_pneu,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Suspect Hemothorax: </td><td class='answer'>"+boolToChoice(e.suspect_hemo,"Yes","No")+"</td></tr>"+"<tr><td class='question'>UL Lung sound: </td><td class='answer'>"+$("#UL_Lung_Sound option[value="+e.ul_sound+"]").text()+"</td></tr>"+"<tr><td class='question'>UR Lung sound: </td><td class='answer'>"+$("#UR_Lung_Sound option[value="+e.ur_sound+"]").text()+"</td></tr>"+"<tr><td class='question'>LL Lung sound: </td><td class='answer'>"+$("#LL_Lung_Sound option[value="+e.ll_sound+"]").text()+"</td></tr>"+"<tr><td class='question'>LR Lung sound: </td><td class='answer'>"+$("#LR_Lung_Sound option[value="+e.lr_sound+"]").text()+"</td></tr>"+"<tr><td class='question'>Pulse Location: </td><td class='answer'>"+$("#pulse_location option[value="+e.pulse_location+"]").text()+"</td></tr>"+"<tr><td class='question'>Pulse Regularity: </td><td class='answer'>"+boolToChoice(e.pulse_regularity,"Regular","Irregular")+"</td></tr>"+"<tr><td class='question'>Pulse Quality: </td><td class='answer'>"+$("#pulse_quality option[value="+e.pulse_quality+"]").text()+"</td></tr>"+"<tr><td class='question'>JVD: </td><td class='answer'>"+boolToChoice(e.jvd,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Cap Refill: </td><td class='answer'>"+boolToChoice(e.cap_refill,"Brisk","Delayed")+"</td></tr>"+"<tr><td class='question'>Skin: </td><td class='answer'>"+$("#skin option[value="+e.skin+"]").text()+"</td></tr>"+"<tr><td class='question'>Temperature: </td><td class='answer'>"+$("#abctemp option[value="+e.abctemp+"]").text()+"</td></tr>"+"<tr><td class='question'>Skin Condition: </td><td class='answer'>"+boolToChoice(e.dry,"Dry","Diaphoretic")+"</td></tr>"+"<tr><td class='question'>Heart Tones: </td><td class='answer'>"+$("#heart_tones option[value="+e.heart_tones+"]").text()+"</td></tr>"+"<tr><td class='question'>Heart Tones Quality: </td><td class='answer'>"+$("#heart_tones_quality option[value="+e.heart_tones_quality+"]").text()+"</td></tr>"+"<tr><td class='question'>Peripheral Edema: </td><td class='answer'>"+boolToChoice(e.peripheral_edema,"Yes","No")+i+"</td></tr>"+j+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)g="<strong><u>ABC's</u></strong> <a href='#abcs'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Open and Patent: </td><td class='answer'>Yes</td></tr>"+"<tr><td class='question'>Tracheal Deviation: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Interventions: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Breathing Type : </td><td class='answer'>Regular</td></tr>"+"<tr><td class='question'>Laboured: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Effective: </td><td class='answer'>Yes</td></tr>"+"<tr><td class='question'>Accessory Muscle: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Nasal Flare: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Cough: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Subcut. Emphysema: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Flailed Chest: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Suspect Pneumothorax: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Suspect Hemothorax: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>UL Lung sound: </td><td class='answer'>Clear</td></tr>"+"<tr><td class='question'>UR Lung sound: </td><td class='answer'>Clear</td></tr>"+"<tr><td class='question'>LL Lung sound: </td><td class='answer'>Clear</td></tr>"+"<tr><td class='question'>LR Lung sound: </td><td class='answer'>Clear</td></tr>"+"<tr><td class='question'>Pulse Location: </td><td class='answer'>Radial</td></tr>"+"<tr><td class='question'>Pulse Regularity: </td><td class='answer'>Strong</td></tr>"+"<tr><td class='question'>Pulse Quality: </td><td class='answer'>Regular</td></tr>"+"<tr><td class='question'>JVD: </td><td class='answer'>No</td></tr>"+"<tr><td class='question'>Cap Refill: </td><td class='answer'>Brisk</td></tr>"+"<tr><td class='question'>Skin: </td><td class='answer'>Normal</td></tr>"+"<tr><td class='question'>Temperature: </td><td class='answer'>Warm</td></tr>"+"<tr><td class='question'>Skin Condition: </td><td class='answer'>Dry</td></tr>"+"<tr><td class='question'>Heart Tones: </td><td class='answer'>Normal</td></tr>"+"<tr><td class='question'>Heart Tones Quality: </td><td class='answer'>Clear</td></tr>"+"<tr><td class='question'>Peripheral Edema: </td><td class='answer'>None</td></tr>"+"</tbody></table><br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM trauma_auto WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",g="",h="",j="",k="";if(e.car=="true"){f=" Seatbelt: "+boolToChoice(e.seatbelt,"Yes","No");g=", Airbag: "+boolToChoice(e.airbag,"Yes","No")}if(e.car=="false"){h=" Helmet: "+boolToChoice(e.helmet,"Yes","No");j=", Protective Clothes: "+boolToChoice(e.leathers,"Yes","No")}if(e.approx_speed!=""){if(e.speed_unit=="true")k=e.approx_speed+"kph ("+(e.approx_speed/1.609344).toFixed(0)+"mph)";else k=(e.approx_speed*1.609344).toFixed(0)+"kph ("+e.approx_speed+"mph)"}var l="none";if(e.photo!="")l=e.photo;if(e.assessed=="true")i="<strong><u>Trauma Auto</u></strong> <a href='#auto'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Vehicle: </td><td class='answer'>"+boolToChoice(e.car,"Car","Motorcycle")+"</td></tr>"+"<tr><td class='question'>Seat: </td><td class='answer'>"+getSeat(e.seat)+"</td></tr>"+"<tr><td class='question'>Safety gear: </td><td class='answer'>"+f+g+h+j+"</td></tr>"+"<tr><td class='question'>Occupants: </td><td class='answer'>"+e.nb_occupants+"</td></tr>"+"<tr><td class='question'>Speed: </td><td class='answer'>"+k+"</td></tr>"+"<tr><td class='question'>Removed By: </td><td class='answer'>"+$("#removed_by option[value="+e.removed_by+"]").text()+"</td></tr>"+"<tr><td class='question'>Details given by: </td><td class='answer'>"+$("#per option[value="+e.per+"]").text()+"</td></tr>"+"<tr><td class='question'>Attached Picture: </td><td class='answer'><img src='"+l+"' /></td></tr>"+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)i="<strong><u>Trauma Auto</u></strong> <a href='#auto'>modifiy</a><br />"+"No auto trauma<br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM trauma_penetrating WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",g="";if(e.bleeding=="true")f=" Controlled: "+boolToChoice(e.controlled,"Yes","No");g=boolToEmpty(e.head,"Head")+boolToEmpty(e.neck,"Neck")+boolToEmpty(e.chest,"Chest")+boolToEmpty(e.abd,"ABD")+boolToEmpty(e.pelvis,"Pelvis")+boolToEmpty(e.ulxr,"ULXR")+boolToEmpty(e.urxr,"URXR")+boolToEmpty(e.llxr,"LLXR")+boolToEmpty(e.lrxr,"LRXR")+boolToEmpty(e.back,"Back");if(g=="")g="No systems involved";var h="none";if(e.photo!="")h=e.photo;if(e.assessed=="true")j="<strong><u>Trauma Penetrating</u></strong> <a href='#penetrating'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Assault: </td><td class='answer'>"+boolToChoice(e.assault,"Yes","No")+"</td></tr>"+"<tr><td class='question'>MOI: </td><td class='answer'>"+e.moi+"</td></tr>"+"<tr><td class='question'>Velocity: </td><td class='answer'>"+boolToChoice(e.velocity,"High","Low")+"</td></tr>"+"<tr><td class='question'>Bleeding: </td><td class='answer'>"+boolToChoice(e.bleeding,"Yes","No")+f+"</td></tr>"+"<tr><td class='question'>Systems involved: </td><td class='answer'>"+g+"</td></tr>"+"<tr><td class='question'>Attached Picture: </td><td class='answer'><img src='"+h+"' /></td></tr>"+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)j="<strong><u>Trauma Penetrating</u></strong> <a href='#penetrating'>modifiy</a><br />"+"No penetrating trauma<br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM trauma_blunt WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",g="";if(e.bleeding=="true")f=" Controlled: "+boolToChoice(e.controlled,"Yes","No");g=boolToEmpty(e.head,"Head")+boolToEmpty(e.neck,"Neck")+boolToEmpty(e.chest,"Chest")+boolToEmpty(e.abd,"ABD")+boolToEmpty(e.pelvis,"Pelvis")+boolToEmpty(e.ulxr,"ULXR")+boolToEmpty(e.urxr,"URXR")+boolToEmpty(e.llxr,"LLXR")+boolToEmpty(e.lrxr,"LRXR")+boolToEmpty(e.back,"Back");if(g=="")g="No systems involved";var h="none";if(e.photo!="")h=e.photo;if(e.assessed=="true")k="<strong><u>Trauma Blunt</u></strong> <a href='#blunt'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Assault: </td><td class='answer'>"+boolToChoice(e.assault,"Yes","No")+"</td></tr>"+"<tr><td class='question'>MOI: </td><td class='answer'>"+e.moi+"</td></tr>"+"<tr><td class='question'>Bleeding: </td><td class='answer'>"+boolToChoice(e.bleeding,"Yes","No")+f+"</td></tr>"+"<tr><td class='question'>Systems involved: </td><td class='answer'>"+g+"</td></tr>"+"<tr><td class='question'>Attached Picture: </td><td class='answer'><img src='"+h+"' /></td></tr>"+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)k="<strong><u>Trauma Blunt</u></strong> <a href='#blunt'>modifiy</a><br />"+"No blunt trauma<br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM trauma_fall WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",g="",h="";if(e.bleeding=="true")f=" Controlled: "+boolToChoice(e.controlled,"Yes","No");if(e.loss_of_c=="true")g=" during "+e.loss_of_c_time+" minutes";h=boolToEmpty(e.head,"Head")+boolToEmpty(e.neck,"Neck")+boolToEmpty(e.chest,"Chest")+boolToEmpty(e.abd,"ABD")+boolToEmpty(e.pelvis,"Pelvis")+boolToEmpty(e.ulxr,"ULXR")+boolToEmpty(e.urxr,"URXR")+boolToEmpty(e.llxr,"LLXR")+boolToEmpty(e.lrxr,"LRXR")+boolToEmpty(e.back,"Back");if(h=="")h="No systems involved";var i="none";if(e.photo!="")i=e.photo;if(e.assessed=="true")l="<strong><u>Trauma Fall</u></strong> <a href='#fall'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Assault: </td><td class='answer'>"+boolToChoice(e.assault,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Distance: </td><td class='answer'>"+e.distance+" "+boolToChoice(e.controlled,"m","ft")+"</td></tr>"+"<tr><td class='question'>Surface: </td><td class='answer'>"+e.surface+"</td></tr>"+"<tr><td class='question'>Loss of Consciousness: </td><td class='answer'>"+boolToChoice(e.loss_of_c,"Yes","No")+f+"</td></tr>"+"<tr><td class='question'>Bleeding: </td><td class='answer'>"+boolToChoice(e.bleeding,"Yes","No")+f+"</td></tr>"+"<tr><td class='question'>Systems involved: </td><td class='answer'>"+h+"</td></tr>"+"<tr><td class='question'>Attached Picture: </td><td class='answer'><img src='"+i+"' /></td></tr>"+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)l="<strong><u>Trauma Fall</u></strong> <a href='#fall'>modifiy</a><br />"+"No fall trauma<br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM trauma_burn WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="";f=valueToEmpty(e.head_front,"Head front")+valueToEmpty(e.head_back,"Head back")+valueToEmpty(e.chest,"Chest")+valueToEmpty(e.abdomen,"Abdomen")+valueToEmpty(e.upper_back,"Upper back")+valueToEmpty(e.lower_back,"Lower back")+valueToEmpty(e.ulx_up_front,"Upper left arm front")+valueToEmpty(e.ulx_low_front,"Lower left arm front")+valueToEmpty(e.ulx_up_back,"Upper left arm back")+valueToEmpty(e.ulx_low_back,"Lower left arm back")+valueToEmpty(e.urx_up_front,"Upper right arm front")+valueToEmpty(e.urx_low_front,"Lower right arm front")+valueToEmpty(e.urx_up_back,"Upper right arm back")+valueToEmpty(e.urx_low_back,"Lower right arm back")+valueToEmpty(e.llx_up_front,"Upper left leg front")+valueToEmpty(e.llx_low_front,"Lower left leg front")+valueToEmpty(e.llx_up_back,"Upper left leg back")+valueToEmpty(e.llx_low_back,"Lower left leg back")+valueToEmpty(e.lrx_up_front,"Upper right leg front")+valueToEmpty(e.lrx_low_front,"Lower right leg front")+valueToEmpty(e.lrx_up_back,"Upper right leg back")+valueToEmpty(e.lrx_low_back,"Lower right leg back");var g="none";if(e.photo!="")g=e.photo;if(e.assessed=="true")m="<strong><u>Trauma Burn</u></strong> <a href='#burn'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Body Type: </td><td class='answer'>"+e.body_type+"</td></tr>"+"<tr><td class='question'>Surface burnt: </td><td class='answer'><strong>"+e.total_surface+" %</strong></td></tr>"+"<tr><td class='question'>Systems involved: </td><td class='answer'>"+f+"</td></tr>"+"<tr><td class='question'>Attached Picture: </td><td class='answer'><img src='"+g+"' /></td></tr>"+"</tbody></table><br /><hr>";if(e.assessed=="false"&&a==true)m="<strong><u>Trauma Burn</u></strong> <a href='#burn'>modifiy</a><br />"+"No burn trauma<br /><hr>"}})});db.transaction(function(c){c.executeSql("SELECT * FROM gi_gu WHERE patient=?",[getCurrentPatientId()],function(c,d){for(var e=0;e<d.rows.length;e++){var f=d.rows.item(e);if(f.gi_assessed=="true")n+="<strong><u>GI</u></strong> <a href='#gi_gu'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>GI is: </td><td class='answer'>"+boolToChoice(f.soft,"Soft","Hard")+", "+boolToChoice(f.flat,"Flat","Distended")+", "+boolToChoice(f.tender,"Tender","Non Tender")+"</td></tr>"+"<tr><td class='question'>Rebound: </td><td class='answer'>"+boolToChoice(f.rebound,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Location of pain: </td><td class='answer'>"+boolToEmpty(f.luq,"Left Upper Quarter ")+boolToEmpty(f.ruq,"Right Upper Quarter ")+boolToEmpty(f.llq,"Left Lower Quarter ")+boolToEmpty(f.rlq,"Right Lower Quarter ")+boolToEmpty(f.epigastric,"Epigastric ")+boolToEmpty(f.suprapubic,"Suprapubic")+"</td></tr>"+"<tr><td class='question'>Obese: </td><td class='answer'>"+boolToChoice(f.obese,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Last Bowel Movement: </td><td class='answer'>"+f.last_bm+"</td></tr>"+"<tr><td class='question'>Last Oral Intake: </td><td class='answer'>"+f.loi+"</td></tr>"+"</tbody></table><br /><hr>";if(f.gu_assessed=="true")n+="<strong><u>GU</u></strong> <a href='#gi_gu'>modify</a><br />"+"<table><tbody>"+"<tr><td class='question'>Pain: </td><td class='answer'>"+boolToChoice(f.pain,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Frequency: </td><td class='answer'>"+boolToChoice(f.frequency,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Hematuria: </td><td class='answer'>"+boolToChoice(f.hematuria,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Incontinence: </td><td class='answer'>"+boolToChoice(f.incontinence,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Bladder Distention: </td><td class='answer'>"+boolToChoice(f.bladder_distention,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Urinary Urgency: </td><td class='answer'>"+boolToChoice(f.urinary_urgency,"Yes","No")+"</td><tr>"+"<tr><td class='question'>Last Void: </td><td class='answer'>"+f.last_void+"</td><tr>"+"</tbody></table><br /><hr>";var g="",h="",i="",j="",k="";if(f.gestation_known=="true")h=f.gest_weeks+" weeks";if(f.membr_intact=="false")i=", rupture at:"+f.time_ruptured+", fluid:"+f.fluid;if(f.fetal_mvmt=="true")j=", last movement at:"+f.last_mvmt+", "+f.mvmt_per_hr+" per hr";if(f.contractions=="true")k=", duration:"+f.contraction_duration+"/min.sec, separation:"+f.contraction_separation+"/min.sec";if(f.pregnant=="1")g="<tr><td class='question'>EDC: </td><td class='answer'>"+f.edc+"</td><tr>"+"<tr><td class='question'>Gestation is known: </td><td class='answer'>"+boolToChoice(f.gestation_known,"Yes","No")+" "+h+"</td><tr>"+"<tr><td class='question'>Membrane intact: </td><td class='answer'>"+boolToChoice(f.membr_intact,"Yes","No")+i+"</td><tr>"+"<tr><td class='question'>Expected babies: </td><td class='answer'>"+f.expected_babies+"</td><tr>"+"<tr><td class='question'>Fetal movement: </td><td class='answer'>"+boolToChoice(f.fetal_mvmt,"Yes","No")+j+"</td><tr>"+"<tr><td class='question'>Contractions: </td><td class='answer'>"+boolToChoice(f.contractions,"Yes","No")+k+"</td><tr>";if(b=="false"&&f.gyn_assessed=="true")n+="<strong><u>Ob/Gyn</u></strong> <a href='#gi_gu'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Gravid: </td><td class='answer'>"+f.gravid+"</td><tr>"+"<tr><td class='question'>Term: </td><td class='answer'>"+f.term+"</td><tr>"+"<tr><td class='question'>Para: </td><td class='answer'>"+f.para+"</td><tr>"+"<tr><td class='question'>Abortia: </td><td class='answer'>"+f.abortia+"</td><tr>"+"<tr><td class='question'>Live: </td><td class='answer'>"+f.live+"</td><tr>"+"<tr><td class='question'>Last Menstruation: </td><td class='answer'>"+f.last_menstruation+"</td><tr>"+"<tr><td class='question'>Vaginal Discharge: </td><td class='answer'>"+boolToChoice(f.discharge,"Yes","No")+" "+f.substance+"</td><tr>"+"<tr><td class='question'>Pregnant: </td><td class='answer'>"+$("#pregnant option[value="+f.pregnant+"]").text()+"</td><tr>"+g+"</td><tr>"+"</tbody></table><br /><hr>";if(f.gi_assessed=="false"&&f.gu_assessed=="false"&&a==true)n="<strong><u>GI</u></strong> <a href='#gi_gu'>modifiy</a><br />"+"No GI exam<br />No GU exam<br />No Ob/Gyn exam<br /><hr>"}})});db.transaction(function(a){a.executeSql("SELECT * FROM field_delivery WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);var e="",f="",g="";if(d.stimulation=="true")e=d.stimulation_type;if(d.placenta=="true"){f=" at "+d.placenta_time;g=" "+boolToChoice(d.placenta_intact,"Intact","Not intact")}if(d.assessed=="true")o="<strong><u>Field Delivery</u></strong> <a href='#field_delivery'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Presentation: </td><td class='answer'>"+d.presentation+"</td><tr>"+"<tr><td class='question'>Delivery time: </td><td class='answer'>"+d.delivery_time+"</td><tr>"+"<tr><td class='question'>Meconium: </td><td class='answer'>"+d.meconium+"</td><tr>"+"<tr><td class='question'>Cord cut at : </td><td class='answer'>"+d.cord_length+" inche(s) from baby</td><tr>"+"<tr><td class='question'>APGAR  </td><td class='answer'><strong>"+d.apgar1+"</strong>, <strong>"+d.apgar5+"</strong></td><tr>"+"<tr><td class='question'>Stimulation required: </td><td class='answer'>"+boolToChoice(d.stimulation,"Yes","No")+e+"</td><tr>"+"<tr><td class='question'>Placenta delivered: </td><td class='answer'>"+boolToChoice(d.placenta,"Yes","No")+f+g+"</td><tr>"+"</tbody></table><br /><hr>"}})});db.transaction(function(b){b.executeSql("SELECT * FROM muscular_skeletal WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="No Complaints";if(e.nocomplaint=="false"){f=e.muscular.split(",").join(", ")}if(e.assessed=="true")p="<strong><u>Muscular Skeletal</u></strong> <a href='#muscular_skeletal'>modifiy</a><br />"+"Complaints: <strong>"+f+"</strong><br /><br /><hr>";if(e.assessed=="false"&&a==true)p="<strong><u>Muscular Skeletal</u></strong> <a href='#muscular_skeletal'>modifiy</a><br />"+"Complaints: <strong>No Complaints</strong><br /><br /><hr>"}})});setTimeout(function(){$("#progress").remove();$("#exam_sum").html("");$("#exam_sum").append(f+g+i+j+k+l+m+n+p)},3e3);$("#procedures_sum").html("");var q="<strong><u>Airway</u></strong> <a href='#airway_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Volume </td>"+"<td>Maneuver </td>"+"<td>OPA </td>"+"<td>NPA </td>"+"<td>BVM </td>"+"<td>Rate </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM airway WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);q+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+e.oxygen+"</td>"+"<td>"+$("#basic_maneuvers option[value="+e.basic_maneuvers+"]").text()+"</td>"+"<td>"+$("#opa option[value="+e.opa+"]").text()+"</td>"+"<td>"+$("#npa option[value="+e.npa+"]").text()+"</td>"+"<td>"+boolToChoice(e.bvm,"Yes","No")+"</td>"+"<td>"+e.rate+"/min</td>"+"</tr>"}q+="</tbody></table><br /><hr>";if(c==false)r=q})});db.transaction(function(a){a.executeSql("SELECT * FROM invasive_airway WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);var e="";if(d.cuffed=="true")e=" inflation: "+d.inflation+"mL";if(d.assessed=="true")s="<strong><u>Invasive Airway</u></strong> <a href='#invasive_airway'>modifiy</a><br />"+"<table class='singleEntry'><tbody>"+"<tr><td class='question'>Secured: </td><td class='answer'>"+boolToChoice(d.secured,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Device: </td><td class='answer'>"+$("#airway_device option[value="+d.device+"]").text()+"</td></tr>"+"<tr><td class='question'>Size: </td><td class='answer'>"+d.size+"</td></tr>"+"<tr><td class='question'>Cuffed: </td><td class='answer'>"+boolToChoice(d.cuffed,"Yes","No")+e+"</td></tr>"+"<tr><td class='question'>Distance: </td><td class='answer'>"+d.distance+" cm</td></tr>"+"<tr><td class='question'>BVM: </td><td class='answer'>"+boolToChoice(d.bvm,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Attempts: </td><td class='answer'>"+d.attempts+"</td></tr>"+"<tr><td class='question'>Time: </td><td class='answer'>"+getFormatedDate(d.time)+"</td></tr>"+"</tbody></table><br /><hr>"}})});var t="<strong><u>Ventilator</u></strong> <a href='#ventilator_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Ctrl </td>"+"<td>Mode </td>"+"<td>Rate </td>"+"<td>Tid.V </td>"+"<td>Insp </td>"+"<td>I:E </td>"+"<td>FiO2 </td>"+"<td>Sens </td>"+"<td>Ex P </td>"+"<td>Ex Tid V </td>"+"<td>Max Insp P </td>"+"<td>Plat P </td>"+"<td>P Sup </td>"+"<td>High P lim </td>"+"<td>Low P lim </td>"+"<td>Low min V </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM ventilator WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);t+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+boolToChoice(e.control,"P","V")+"</td>"+"<td>"+boolToChoice(e.mode,"SIMV","A/Ctrl")+"</td>"+"<td>"+e.rate+"</td>"+"<td>"+e.tidal_v+"</td>"+"<td>"+e.insp_time+"</td>"+"<td>"+e.i_ratio+":"+e.e_ratio+"</td>"+"<td>"+e.fiO2+"</td>"+"<td>"+e.peep+"</td>"+"<td>"+e.sensitivity+"</td>"+"<td>"+e.expir_p+"</td>"+"<td>"+e.expir_tidal_v+"</td>"+"<td>"+e.max_insp_p+"</td>"+"<td>"+e.plateau_p+"</td>"+"<td>"+e.p_support+"</td>"+"<td>"+e.high_p_lim+"</td>"+"<td>"+e.low_p_lim+"</td>"+"<td>"+e.low_min_v+"</td>"+"</tr>"}t+="</tbody></table><br /><hr>";if(c==false)u=t})});var v="<strong><u>CPAP/BiPAP</u></strong> <a href='#cpap_bipap_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Device </td>"+"<td>Size </td>"+"<td>FiO2 </td>"+"<td>Peep </td>"+"<td>Pressure </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM cpap_bipap WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);v+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+boolToChoice(e.device,"CPAP","BiPAP")+"</td>"+"<td>"+e.size+"</td>"+"<td>"+e.fiO2+"</td>"+"<td>"+e.peep+"</td>"+"<td>"+e.pressure+"</td>"+"</tr>"}v+="</tbody></table><br /><hr>";if(c==false)w=v})});x="<strong><u>Suction</u></strong> <a href='#suction_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Duration </td>"+"<td>Amount </td>"+"<td>Tip used </td>"+"<td>Tip size </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM suction WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);x+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+e.duration+"</td>"+"<td>"+e.amount+"</td>"+"<td>"+$("#suction_tip option[value="+e.tip+"]").text()+"</td>"+"<td>"+e.size+"</td>"+"</tr>"}x+="</tbody></table><br /><hr>";if(c==false)y=x})});var z="<strong><u>IV/IO</u></strong> <a href='#iv_io_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Site </td>"+"<td>Side </td>"+"<td>Gauge </td>"+"<td>Attempts </td>"+"<td>Successful </td>"+"<td>Fluid </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM iv_io WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);var f="";if(e.fluid=="5")f=e.fluid_other;else f=$("#iv_io_fluid option[value="+e.fluid+"]").text();z+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+$("#iv_io_site option[value="+e.site+"]").text()+"</td>"+"<td>"+boolToChoice(e.side,"Left","Right")+"</td>"+"<td>"+$("#iv_io_gauge option[value="+e.gauge+"]").text()+"</td>"+"<td>"+e.attempts+"</td>"+"<td>"+boolToChoice(e.successful,"Yes","No")+"</td>"+"<td>"+f+"</td>"+"</tr>"}z+="</tbody></table><br /><hr>";if(c==false)A=z})});B="<strong><u>Splinting</u></strong> <a href='#splinting_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Location </td>"+"<td>Side </td>"+"<td>PSM prior </td>"+"<td>PSM post </td>"+"<td>Traction applied </td>"+"<td>Type </td>"+"<td>Position </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM splinting WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);var f="",g="";if(e["type"]=="7")f=e["type_other"];else f=$("#type_splint option[value="+e["type"]+"]").text();if(e["position"]=="3")admin=e["position_other"];else admin=$("#splinting_position option[value="+e["position"]+"]").text();B+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+e.location+"</td>"+"<td>"+boolToChoice(e.side,"Left","Right")+"</td>"+"<td>"+e.prior+"</td>"+"<td>"+e.post+"</td>"+"<td>"+boolToChoice(e.traction,"Yes","No")+"</td>"+"<td>"+f+"</td>"+"<td>"+g+"</td>"+"</tr>"}B+="</tbody></table><br /><hr>";if(c==false)C=B})});var D="<strong><u>Medication</u></strong> <a href='#medication_proc_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Medication </td>"+"<td>Dose </td>"+"<td>Unit </td>"+"<td>Route </td>"+"<td>Indication </td>"+"<td>Admin by </td>"+"<td>Same dose </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM medication WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);var f="",g="",h="";if(e.route=="16")f=e.route_other;else f=$("#medication_route option[value="+e.route+"]").text();if(e.admin=="2")g=e.admin_other;else g=$("#medication_admin_by option[value="+e.admin+"]").text();if(e.medication!="0")h=medication_trade_alpha[convertToTradeNb(parseInt(e.medication)-1)]+"("+medication_generic_alpha[parseInt(e.medication)-1]+")";else h=e.medic_other;D+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+h+"</td>"+"<td>"+e.dose+"</td>"+"<td>"+$("#medication_dose_unit option[value="+e.dose_unit+"]").text()+"</td>"+"<td>"+f+"</td>"+"<td>"+e.indication+"</td>"+"<td>"+g+"</td>"+"<td>"+e.same_dose+"</td>"+"</tr>"}D+="</tbody></table><br /><hr>";if(c==false)E=D})});db.transaction(function(a){a.executeSql("SELECT * FROM c_spine WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);var e="";if(d.c_collar=="true")e=" Size: "+$("#c_spine_size option[value="+d.size+"]").text();if(d.assessed=="true")F="<strong><u>Spinal Motion Restriction</u></strong> <a href='#c_spine'>modifiy</a><br />"+"<table class='singleEntry'><tbody>"+"<tr><td class='question'>Manual C-Spine: </td><td class='answer'>"+boolToChoice(d.manual,"Yes","No")+"</td></tr>"+"<tr><td class='question'>C-Collar: </td><td class='answer'>"+boolToChoice(d.c_collar,"Yes","No")+e+"</td></tr>"+"<tr><td class='question'>Back Board: </td><td class='answer'>"+$("#c_spine_back_board option[value="+d.backboard+"]").text()+"</td></tr>"+"<tr><td class='question'>Transferred by: </td><td class='answer'>"+$("#c_spine_transfer option[value="+d.transferred+"]").text()+"</td></tr>"+"<tr><td class='question'>Secured by: </td><td class='answer'>"+$("#c_spine_Secured option[value="+d.secured+"]").text()+"</td></tr>"+"<tr><td class='question'>Time: </td><td class='answer'>"+getFormatedTime(d.time)+"</td></tr>"+"</tbody></table><br /><hr>"}})});var G="<strong><u>IN's/OUT's</u></strong> <a href='#in_out_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>V In (mL) </td>"+"<td>Substance In </td>"+"<td>V Out (mL) </td>"+"<td>Substance Out </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM in_out WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);var f="",g="";if(e.intake_substance=="6")f=e.intake_other;else f=$("#intake_substance option[value="+e.intake_substance+"]").text();if(e.outtake_substance=="6")g=e.outtake_other;else g=$("#outtake_substance option[value="+e.outtake_substance+"]").text();G+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+e.intake_volume+"</td>"+"<td>"+f+"</td>"+"<td>"+e.outtake_volume+"</td>"+"<td>"+g+"</td>"+"</tr>"}G+="</tbody></table><br /><hr>";if(c==false)H=G})});var I="<strong><u>ECG</u></strong> <a href='#ecg_list'>modifiy</a><br />"+"<table>"+"<tbody>"+"<tr class='head'>"+"<td>Time </td>"+"<td>Leads nb </td>"+"<td>Rhythm </td>"+"<td>Regular </td>"+"<td>BBB </td>"+"<td>ST Changes </td>"+"<td>PAC's </td>"+"<td>PVC's </td>"+"</tr>";db.transaction(function(a){a.executeSql("SELECT * FROM ecg WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);var f="",g="";if(e.bbb=="false")f="No";else f="Yes "+boolToChoice(e.bbb_side,"Left","Right");g=positiveToTitle(e.bi,"i")+positiveToTitle(e.bavr,"aVr")+positiveToTitle(e.bv1,"V1")+positiveToTitle(e.bv4,"V4")+positiveToTitle(e.bii,"ii")+positiveToTitle(e.bavl,"aVL")+positiveToTitle(e.bv2,"V2")+positiveToTitle(e.bv5,"V5")+positiveToTitle(e.biii,"iii")+positiveToTitle(e.bavf,"aVf")+positiveToTitle(e.bv3,"V3")+positiveToTitle(e.bv6,"V6");var h="none";if(e.photo!="")h=e.photo;I+="<tr>"+"<td>"+getFormatedTime(e.time)+"</td>"+"<td>"+boolToChoice(e.leads_nb,"3","12")+"</td>"+"<td>"+$("#rhythm option[value="+e.rhythm+"]").text()+"</td>"+"<td>"+boolToChoice(e.regular,"Yes","No")+"</td>"+"<td>"+f+"</td>"+"<td>"+g+"</td>"+"<td>"+boolToChoice(e.ecg_pacs,"Yes","No")+"</td>"+"<td>"+boolToChoice(e.ecg_pvcs,"Yes","No")+"</td>"+"<td><img src='"+h+"' /></td>"+"</tr>"}I+="</tbody></table><br /><hr>";if(c==false)J=I})});setTimeout(function(){$("#procedures_sum").html("");$("#procedures_sum").append(r+s+u+w+y+A+C+E+F+H+J)},3e3);$("#signatures_sum").html("");db.transaction(function(b){b.executeSql("SELECT * FROM signatures WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="";if(e.noSign=="true")f="Unable to sign due to "+$("#unableToSignReason option[value="+e.reason+"]").text();else f="<canvas id='canvasPat' width='290' height='100'></canvas>";if(e.assessed=="true"){$("#signatures_sum").html("");$("#signatures_sum").append("<strong><u>Signatures</u></strong> <a href='#signatures'>modifiy</a><br />"+"<table><tbody>"+"<tr><td class='question'>Practitioner Name: </td><td class='answer'>"+e.sigPractitionerText+"</td></tr>"+"<tr><td class='question'>Practitioner Signature: </td><td class='answer'><canvas id='canvasPrac' width='290' height='100'></canvas></td></tr>"+"<tr><td class='question'>Patient Name: </td><td class='answer'>"+e.sigPatientText+"</td></tr>"+"<tr><td class='question'>Patient Signature: </td><td class='answer'>"+f+"</td></tr>"+"<tr><td class='question'>Hosp. Repr. Name: </td><td class='answer'>"+e.sigHospReprText+"</td></tr>"+"<tr><td class='question'>Hosp. Repr. Signature: </td><td class='answer'><canvas id='canvasHosp' width='290' height='100'></canvas></td></tr>"+"<tr><td class='question'>Witness Name: </td><td class='answer'>"+e.sigWitnessText+"</td></tr>"+"<tr><td class='question'>Witness Signature: </td><td class='answer'><canvas id='canvasWit' width='290' height='100'></canvas></td></tr>"+"</tbody></table><br /><hr>");var g=document.getElementById("canvasPrac");regenerateSig(g,e.sigPractitioner);if(e.noSign=="false"){var h=document.getElementById("canvasPat");regenerateSig(h,e.sigPatient)}var i=document.getElementById("canvasHosp");regenerateSig(i,e.sigHospRepr);var j=document.getElementById("canvasWit");regenerateSig(j,e.sigWitness);var k=Canvas2Image.saveAsPNG(g,true);if(e.noSign=="false")var l=Canvas2Image.saveAsPNG(h,true);var m=Canvas2Image.saveAsPNG(i,true);var n=Canvas2Image.saveAsPNG(j,true);k.id="practImage";if(e.noSign=="false")l.id="patImage";m.id="hospImage";k.id="witImage";g.parentNode.replaceChild(k,g);h.parentNode.replaceChild(l,h);i.parentNode.replaceChild(m,i);j.parentNode.replaceChild(n,j)}if(e.assessed=="false"&&a==true)$("#signatures_sum").append("<strong><u>Signatures</u></strong> <a href='#signatures'>modifiy</a><br />"+"No signatures yet<br /><hr>")}})});$("#call_info_sum").html("");populateAttendants();db.transaction(function(b){b.executeSql("SELECT * FROM call_info WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);var f="",g="",h="",i="",j="";if(e.attendant1=="1")f=e.attendant1_other;else f=$("#call_info_attendant1 option[value="+e.attendant1+"]").text();if(e.attendant2=="1")g=e.attendant2_other;else g=$("#call_info_attendant2 option[value="+e.attendant2+"]").text();if(e.driver=="1")h=e.driver_other;else h=$("#call_info_driver option[value="+e.driver+"]").text();if(e.assistance=="3")i=e.other;else i=$("#call_info_assistance option[value="+e.assistance+"]").text();if(e.det1==""&&e.det2=="0"&&e.det3=="")j="";else j="<tr><td class='question'>Determinant: </td><td class='answer'>"+e.det1+" "+$("#call_info_det2 option[value="+e.det2+"]").text()+" "+e.det3+"</td></tr>";if(e.assessed=="true")$("#call_info_sum").append("<strong><u>Call Info</u></strong> <a href='#call_info'>modifiy</a><br />"+"<table class='singleEntry'><tbody>"+"<tr><td class='question'>Attendant 1: </td><td class='answer'>"+f+"</td></tr>"+"<tr><td class='question'>Attendant 2 </td><td class='answer'>"+g+"</td></tr>"+"<tr><td class='question'>Driver </td><td class='answer'>"+h+"</td></tr>"+"<tr><td class='question'>Unit nb: </td><td class='answer'>"+e.unit_nb+"</td></tr>"+"<tr><td class='question'>Run nb: </td><td class='answer'>"+e.run_nb+"</td></tr>"+"<tr><td class='question'>Respond to: </td><td class='answer'>"+e.respond+"</td></tr>"+"<tr><td class='question'>Milage start: </td><td class='answer'>"+e.milage_start+"</td></tr>"+"<tr><td class='question'>Milage end: </td><td class='answer'>"+e.milage_end+"</td></tr>"+"<tr><td class='question'>Code en route: </td><td class='answer'>"+e.code_en_route+"</td></tr>"+"<tr><td class='question'>Code return: </td><td class='answer'>"+e.code_return+"</td></tr>"+"<tr><td class='question'>Transported to: </td><td class='answer'>"+e.transported_to+"</td></tr>"+"<tr><td class='question'>Transport position: </td><td class='answer'>"+$("#call_info_transport_position option[value="+e.transported_position+"]").text()+"</td></tr>"+"<tr><td class='question'>Time notified: </td><td class='answer'>"+getFormatedDate(e.time_notified)+"</td></tr>"+"<tr><td class='question'>Time en route: </td><td class='answer'>"+getFormatedDate(e.time_route)+"</td></tr>"+"<tr><td class='question'>Time on scene: </td><td class='answer'>"+getFormatedDate(e.time_on_scene)+"</td></tr>"+"<tr><td class='question'>Time depart: </td><td class='answer'>"+getFormatedDate(e.time_depart)+"</td></tr>"+"<tr><td class='question'>Time destination: </td><td class='answer'>"+getFormatedDate(e.time_destination)+"</td></tr>"+"<tr><td class='question'>Time transfer: </td><td class='answer'>"+getFormatedDate(e.time_transfer)+"</td></tr>"+"<tr><td class='question'>Time back service: </td><td class='answer'>"+getFormatedDate(e.time_back_service)+"</td></tr>"+"<tr><td class='question'>Time patient contact: </td><td class='answer'>"+getFormatedDate(e.time_patient_contact)+"</td></tr>"+"<tr><td class='question'>Gloves: </td><td class='answer'>"+positiveToYesNo(e.ppe_gloves)+"</td></tr>"+"<tr><td class='question'>Eye protection: </td><td class='answer'>"+positiveToYesNo(e.ppe_eyes)+"</td></tr>"+"<tr><td class='question'>Reflective gear: </td><td class='answer'>"+positiveToYesNo(e.ppe_reflective)+"</td></tr>"+"<tr><td class='question'>Isolation gear: </td><td class='answer'>"+positiveToYesNo(e.ppe_isolation)+"</td></tr>"+"<tr><td class='question'>Mask: </td><td class='answer'>"+positiveToYesNo(e.ppe_mask)+"</td></tr>"+j+"<tr><td class='question'>Assistance given by: </td><td class='answer'>"+i+"</td></tr>"+"</tbody></table><br /><hr>");if(e.assessed=="false"&&a==true)$("#call_info_sum").append("<strong><u>Call Info</u></strong> <a href='#call_info'>modifiy</a><br />"+"Not filled<br /><hr>")}})});db.transaction(function(a){a.executeSql("SELECT * FROM no_transport WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);var e="",f="";if(d.reason=="5")e=d.reason_other;else e=$("#transport_reason_refusal option[value="+d.reason+"]").text();if(d.left_with=="7")f=d.left_with_other;else f=$("#transport_left_with option[value="+d.left_with+"]").text();if(d.assessed=="true")$("#call_info_sum").append("<strong><u>No transport</u></strong> <a href='#no_transport'>modifiy</a><br />"+"<table class='singleEntry'><tbody>"+"<tr><td class='question'>Patient mentally capable of refusing transport: </td><td class='answer'>"+boolToChoice(d.mentally_capable,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Pract. feels patient should be transported: </td><td class='answer'>"+boolToChoice(d.should_trans,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Patient informed of risks of no transport: </td><td class='answer'>"+boolToChoice(d.informed,"Yes","No")+"</td></tr>"+"<tr><td class='question'>Reason for refusal: </td><td class='answer'>"+e+"</td></tr>"+"<tr><td class='question'>Patient left with: </td><td class='answer'>"+f+"</td></tr>"+"<tr><td class='question'>Consult with: </td><td class='answer'>"+d.consult_with+"</td></tr>"+"</tbody></table><br /><hr>")}})});$("#narrative_sum").html("");var K="<strong><u>Narrative</u></strong> <a href='#narrative_list'>modifiy</a><br />"+"<table>"+"<tbody>";db.transaction(function(b){b.executeSql("SELECT * FROM narrative WHERE patient=?",[getCurrentPatientId()],function(b,c){var d=true;for(var e=0;e<c.rows.length;e++){d=false;var f=c.rows.item(e);K+="<tr>"+"<td>"+getFormatedTime(f.time)+"</td>"+"<td>"+f.narration+"</td>"+"</tr>"}K+="</tbody></table><br /><hr>";if(d==false)$("#narrative_sum").append(K);if(d==true&&a==true)$("#narrative_sum").append("<strong><u>Narrative</u></strong> <a href='#narrative_list'>modifiy</a><br />"+"No Narratives<br /><hr>")})});$("#code_sum").html("");var L="<strong><u>Code</u></strong><br />"+"<table>"+"<tbody>";db.transaction(function(a){a.executeSql("SELECT * FROM code WHERE patient=?",[getCurrentPatientId()],function(a,b){var c=true;for(var d=0;d<b.rows.length;d++){c=false;var e=b.rows.item(d);L+="<tr>"+"<td>"+getFormatedPreciseTime(e.time)+"</td>"+"<td><strong>"+e.code_name+"</strong></td>"+"</tr>"}L+="</tbody></table><br /><hr>";if(c==false)$("#code_sum").append(L)})})}function writeExportPage(){setTimeout("writeLoadedExportPage()",1500)}function writeExportMessage(){$("body").append('<div id="progress">Generating Patient Care Report...</div>')}function processExport(){jQT.goTo("#export_page")}function saveNarrative(){var a=$("#narrative_text").val();var b=$("#narrative_time").val();var c=Date.parse(b);if(getCurrentRecord()=="0"){db.transaction(function(b){b.executeSql("INSERT INTO narrative (patient, narration, time) "+" VALUES (?, ?, ?);",[getCurrentPatientId(),a,c],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(b){b.executeSql("UPDATE narrative SET narration = ?, time=? WHERE id = ? ;",[a,c,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadNarrative(){ClearAllFields();$("#narrative_time").val(getFormatedDate(getSystemTime()));if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM narrative WHERE patient=? AND id=?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#narrative_text").val(d.narration);$("#narrative_time").val(getFormatedDate(d.time))}})})}}function loadNarrativeList(){loadRecordsList("#narrative_sorted","narrative","#narrativeTemplate",".narrative_time","#narrative")}function saveNoTransport(){var a=$("#transport_mentally_capable").prop("checked");var b=$("#transport_should_be").prop("checked");var c=$("#transport_informed").prop("checked");var d=$("#transport_reason_refusal").val();var e=$("#reason_other").val();var f=$("#transport_left_with").val();var g=$("#left_with_other").val();var h=$("#transport_consult_with").val();db.transaction(function(i){i.executeSql("UPDATE no_transport SET assessed=?, mentally_capable=?, should_trans=?, informed=?, reason=?, reason_other=?, "+"left_with=?, left_with_other=?, consult_with=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadNoTransport(){db.transaction(function(a){a.executeSql("SELECT * FROM no_transport WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#transport_mentally_capable").prop("checked",getBool(d.mentally_capable));$("#transport_should_be").prop("checked",getBool(d.should_trans));$("#transport_informed").prop("checked",getBool(d.informed));$("#transport_reason_refusal").val(d.reason);$("#reason_other").val(d.reason_other);$("#transport_left_with").val(d.left_with);$("#left_with_other").val(d.left_with_other);$("#transport_consult_with").val(d.consult_with)}reflect_select("#transport_reason_refusal",5,"#li_reason_related");reflect_select("#transport_left_with",7,"#li_left_with_related")})})}function saveCallInfo(){var a=$("#call_info_attendant1").val();var b=$("#call_info_attendant1_other").val();var c=$("#call_info_attendant2").val();var d=$("#call_info_attendant2_other").val();var e=$("#call_info_driver").val();var f=$("#call_info_driver_other").val();var g=$("#call_info_unit_nb").val();var h=$("#call_info_run_nb").val();var i=$("#call_info_respond_to").val();var j=$("#call_info_milage_start").val();var k=$("#call_info_milage_end").val();var l=$("#call_info_code_route").val();var m=$("#call_info_code_return").val();var n=$("#call_info_transported_to").val();var o=$("#call_info_transport_position").val();var p=Date.parse($("#call_info_time_notified").val());var q=Date.parse($("#call_info_time_route").val());var r=Date.parse($("#call_info_time_on_scene").val());var s=Date.parse($("#call_info_time_depart_scene").val());var t=Date.parse($("#call_info_time_destination").val());var u=Date.parse($("#call_info_time_transfer").val());var v=Date.parse($("#call_info_time_back_service").val());var w=Date.parse($("#call_info_time_patient_contact").val());var x=$("#ppe_gloves").data("status");var y=$("#ppe_eye_protection").data("status");var z=$("#ppe_reflective_gear").data("status");var A=$("#ppe_isolation_gear").data("status");var B=$("#ppe_mask").data("status");var C=$("#call_info_det1").val();var D=$("#call_info_det2").val();var E=$("#call_info_det3").val();var F=$("#call_info_assistance").val();var G=$("#assistance_other").val();var H=[];H=localStorage.frequent_partners.split(",");if(a!="0"&&a!="1"){b=H[parseInt(a)-2];a="1"}if(c!="0"&&c!="1"){d=H[parseInt(c)-2];c="1"}if(e!="0"&&e!="1"){f=H[parseInt(e)-2];e="1"}db.transaction(function(H){H.executeSql("UPDATE call_info SET assessed=?, attendant1=?, attendant1_other=?, attendant2=?, attendant2_other=?, driver=?, driver_other=?, unit_nb=?, "+" run_nb=?, respond=?, milage_start=?, milage_end=?, "+" code_en_route=?, code_return=?, transported_to=?, transported_position=?, time_notified=?, time_route=?, time_on_scene=?, "+" time_depart=?, time_destination=?, time_transfer=?, time_back_service=?, time_patient_contact=?, ppe_gloves=?, ppe_eyes=?, ppe_reflective=?, "+" ppe_isolation=?, ppe_mask=?, det1=?, det2=?, det3=?, assistance=?, other=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadCallInfo(){showPatientPageWidget();$("#ppeButtons li").data("status","negative");$("#li_attendant1_other").hide();$("#li_attendant2_other").hide();$("#li_driver_other").hide();$("#li_assistance_related").hide();populateAttendants();db.transaction(function(a){a.executeSql("SELECT * FROM call_info WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#call_info_attendant1").val(d.attendant1);$("#call_info_attendant1_other").val(d.attendant1_other);$("#call_info_attendant2").val(d.attendant2);$("#call_info_attendant2_other").val(d.attendant2_other);$("#call_info_driver").val(d.driver);$("#call_info_driver_other").val(d.driver_other);$("#call_info_unit_nb").val(d.unit_nb);$("#call_info_run_nb").val(d.run_nb);$("#call_info_respond_to").val(d.respond);$("#call_info_milage_start").val(d.milage_start);$("#call_info_milage_end").val(d.milage_end);$("#call_info_code_route").val(d.code_en_route);$("#call_info_code_return").val(d.code_return);$("#call_info_transported_to").val(d.transported_to);$("#call_info_transport_position").val(d.transported_position);$("#call_info_time_notified").val(getFormatedDate(d.time_notified));$("#call_info_time_route").val(getFormatedDate(d.time_route));$("#call_info_time_on_scene").val(getFormatedDate(d.time_on_scene));$("#call_info_time_depart_scene").val(getFormatedDate(d.time_depart));$("#call_info_time_destination").val(getFormatedDate(d.time_destination));$("#call_info_time_transfer").val(getFormatedDate(d.time_transfer));$("#call_info_time_back_service").val(getFormatedDate(d.time_back_service));$("#call_info_time_patient_contact").val(getFormatedDate(d.time_patient_contact));$("#ppe_gloves").data("status",d.ppe_gloves);$("#ppe_eye_protection").data("status",d.ppe_eyes);$("#ppe_reflective_gear").data("status",d.ppe_reflective);$("#ppe_isolation_gear").data("status",d.ppe_isolation);$("#ppe_mask").data("status",d.ppe_mask);$("#call_info_det1").val(d.det1);$("#call_info_det2").val(d.det2);$("#call_info_det3").val(d.det3);$("#call_info_assistance").val(d.assistance);$("#assistance_other").val(d.other)}reflect_select("#call_info_attendant1",1,"#li_attendant1_other");reflect_select("#call_info_attendant2",1,"#li_attendant2_other");reflect_select("#call_info_driver",1,"#li_driver_other");reflect_select("#call_info_assistance",3,"#li_assistance_related");$("#ppeButtons li").each(function(a){if($(this).data("status")=="negative"){$(this).prop("class","")}else{$(this).prop("class","twoTap")}})})})}function populateAttendants(){$("#call_info_attendant1").empty();$("#call_info_attendant2").empty();$("#call_info_driver").empty();$("#call_info_attendant1").append("<option value='0'>"+localStorage.employee_first_name+" "+localStorage.employee_last_name+"</option>");$("#call_info_attendant2").append("<option value='0'>"+localStorage.employee_first_name+" "+localStorage.employee_last_name+"</option>");$("#call_info_driver").append("<option value='0'>"+localStorage.employee_first_name+" "+localStorage.employee_last_name+"</option>");$("#call_info_attendant1").append("<option value='1'>Other</option>");$("#call_info_attendant2").append("<option value='1'>Other</option>");$("#call_info_driver").append("<option value='1'>Other</option>");var a=[];a=localStorage.frequent_partners.split(",");for(var b=0;b<a.length;b++){$("#call_info_attendant1").append("<option value='"+parseInt(b+2)+"'>"+a[b]+"</option>");$("#call_info_attendant2").append("<option value='"+parseInt(b+2)+"'>"+a[b]+"</option>");$("#call_info_driver").append("<option value='"+parseInt(b+2)+"'>"+a[b]+"</option>")}$("#call_info_attendant1").val("0");$("#call_info_attendant2").val("0");$("#call_info_driver").val("0")}function clearAllCanvas(){practitionerCanvas=document.getElementById("sigCanvasPractitioner");context=practitionerCanvas.getContext("2d");clearCanvas();patientCanvas=document.getElementById("sigCanvasPatient");context=patientCanvas.getContext("2d");clearCanvas();hospReprCanvas=document.getElementById("sigCanvasHospRepr");context=hospReprCanvas.getContext("2d");clearCanvas();witnessCanvas=document.getElementById("sigCanvasWitness");context=witnessCanvas.getContext("2d");clearCanvas();SignatureToggle("practitioner")}function clearSingleCanvas(){alert(currentSig);if(currentSig=="practitioner"){practitionerCanvas=document.getElementById("sigCanvasPractitioner");context=practitionerCanvas.getContext("2d");practitionerSignaturePath=""}if(currentSig=="patient"){patientCanvas=document.getElementById("sigCanvasPatient");context=patientCanvas.getContext("2d");patientSignaturePath=""}if(currentSig=="hospRepr"){hospReprCanvas=document.getElementById("sigCanvasHospRepr");context=hospReprCanvas.getContext("2d");hospReprSignaturePath=""}if(currentSig=="witness"){witnessCanvas=document.getElementById("sigCanvasWitness");context=witnessCanvas.getContext("2d");witnessSignaturePath=""}context.clearRect(0,0,canvasWidth,canvasHeight)}function clearCanvas(){signaturePath="";context.clearRect(0,0,canvasWidth,canvasHeight)}function regenerateSig(a,b){var c=b.slice(0,7);if(c=='[{"lx":'){context=a.getContext("2d");var d=[];d=JSON.parse(b);for(var e in d){context.beginPath();context.moveTo(d[e].mx,d[e].my);context.lineTo(d[e].lx,d[e].ly);context.strokeStyle="#339";context.stroke()}}}function ev_canvas(a){if(a.layerX||a.layerX==0){a._x=a.layerX;a._y=a.layerY}else if(a.offsetX||a.offsetX==0){a._x=a.offsetX;a._y=a.offsetY}var b=tool[a.type];if(b){b(a)}}function tool_pencil(a){var b=this;this.started=false;last_x=-1;last_y=-1;var c,d;this.mousedown=function(a){context.beginPath();context.moveTo(a._x,a._y);b.started=true};this.touchstart=function(a){if(isIpad())c=a.touches[0].clientX-343;else c=a.touches[0].clientX-23;d=a.touches[0].clientY-163;context.beginPath();context.moveTo(c,d);b.started=true};this.mousemove=function(a){if(b.started){context.lineTo(a._x,a._y);context.strokeStyle="#339";context.stroke();if(last_x=="-1"){last_x=a._x;last_y=a._y}signaturePath+='{"lx":'+last_x+',"ly":'+last_y+',"mx":'+a._x+',"my":'+a._y+"},";last_x=a._x;last_y=a._y}};this.touchmove=function(a){if(isIpad())c=a.touches[0].clientX-343;else c=a.touches[0].clientX-23;d=a.touches[0].clientY-163;if(b.started){context.lineTo(c,d);context.strokeStyle="#339";context.stroke();if(last_x=="-1"){last_x=c;last_y=d}signaturePath+='{"lx":'+last_x+',"ly":'+last_y+',"mx":'+c+',"my":'+d+"},";last_x=c;last_y=d}};this.mouseup=function(a){if(b.started){b.mousemove(a);b.started=false;last_x=-1;last_y=-1}if(currentSig=="practitioner"){practitionerSignaturePath=signaturePath}if(currentSig=="patient"){patientSignaturePath=signaturePath}if(currentSig=="hospRepr"){hospReprSignaturePath=signaturePath}if(currentSig=="witness"){witnessSignaturePath=signaturePath}};this.touchend=function(a){if(b.started){b.started=false;last_x=-1;last_y=-1}if(currentSig=="practitioner"){practitionerSignaturePath=signaturePath}if(currentSig=="patient"){patientSignaturePath=signaturePath}if(currentSig=="hospRepr"){hospReprSignaturePath=signaturePath}if(currentSig=="witness"){witnessSignaturePath=signaturePath}}}function addCanvasEvents(a){var b="ontouchstart"in window,c=b?"touchstart":"mousedown",d=b?"touchmove":"mousemove",e=b?"touchend":"mouseup",f=b?"touchcancel":"mouseup";a.addEventListener(c,ev_canvas,false);a.addEventListener(d,ev_canvas,false);a.addEventListener(e,ev_canvas,false)}function formatSig(a){var b=a.slice(0,6);if(b=='{"lx":'){var c=a.length;var d=a.slice(c-1,c);if(d==",")a=a.slice(0,-1);a="["+a+"]"}return a}function formatSigPath(){practitionerSignaturePath=formatSig(practitionerSignaturePath);patientSignaturePath=formatSig(patientSignaturePath);hospReprSignaturePath=formatSig(hospReprSignaturePath);witnessSignaturePath=formatSig(witnessSignaturePath)}function saveSignatures(a){formatSigPath();var b=$("#sigPractitionerName").val();var c=$("#sigPatientName").val();var d=$("#unableToSign").prop("checked");var e=$("#unableToSignReason").val();var f=$("#sigHospReprName").val();var g=$("#sigWitnessName").val();db.transaction(function(h){h.executeSql("UPDATE signatures SET assessed=?, sigPractitionerText = ? , sigPatientText = ? , noSign = ? , reason = ? , "+"sigHospReprText = ? , sigWitnessText = ?, "+"sigPractitioner = ?, sigPatient = ?, sigHospRepr = ?, sigWitness = ?, time=? "+" WHERE patient = ? ;",["true",b,c,d,e,f,g,practitionerSignaturePath,patientSignaturePath,hospReprSignaturePath,witnessSignaturePath,getSystemTime(),getCurrentPatientId()],function(){if(a=="#no_transport")jQT.goTo(a,"flip");else jQT.goBack()},errorHandler)})}function SignatureToggle(a){signaturePath="";$('#signaturebar input[type="radio"]').prop("checked","");if(a=="practitioner"){currentSig="practitioner";$("#sig_practitioner_ul").css("display","block");$("#sig_patient_ul").css("display","none");$("#sig_HospRepr_ul").css("display","none");$("#sig_witness_ul").css("display","none");$("#sig_practitioner_link").prop("checked","checked");practitionerCanvas=document.getElementById("sigCanvasPractitioner");context=practitionerCanvas.getContext("2d");addCanvasEvents(practitionerCanvas)}if(a=="patient"){currentSig="patient";$("#sig_practitioner_ul").css("display","none");$("#sig_patient_ul").css("display","block");$("#sig_HospRepr_ul").css("display","none");$("#sig_witness_ul").css("display","none");$("#sig_patient_link").prop("checked","checked");patientCanvas=document.getElementById("sigCanvasPatient");context=patientCanvas.getContext("2d");addCanvasEvents(patientCanvas)}if(a=="hospRepr"){currentSig="hospRepr";$("#sig_practitioner_ul").css("display","none");$("#sig_patient_ul").css("display","none");$("#sig_HospRepr_ul").css("display","block");$("#sig_witness_ul").css("display","none");$("#sig_HospRepr_link").prop("checked","checked");hospReprCanvas=document.getElementById("sigCanvasHospRepr");context=hospReprCanvas.getContext("2d");addCanvasEvents(hospReprCanvas)}if(a=="witness"){currentSig="witness";$("#sig_practitioner_ul").css("display","none");$("#sig_patient_ul").css("display","none");$("#sig_HospRepr_ul").css("display","none");$("#sig_witness_ul").css("display","block");$("#sig_witness_link").prop("checked","checked");witnessCanvas=document.getElementById("sigCanvasWitness");context=witnessCanvas.getContext("2d");addCanvasEvents(witnessCanvas)}window.scrollTo(0,0)}function loadSignatures(){showPatientPageWidget();clearAllCanvas();practitionerSignaturePath="";patientSignaturePath="";hospReprSignaturePath="";witnessSignaturePath="";$("#unableToSign").prop("checked",false);practitionerCanvas=document.getElementById("sigCanvasPractitioner");patientCanvas=document.getElementById("sigCanvasPatient");hospReprCanvas=document.getElementById("sigCanvasHospRepr");witnessCanvas=document.getElementById("sigCanvasWitness");tool=new tool_pencil;db.transaction(function(a){a.executeSql("SELECT * FROM signatures WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#sigPractitionerName").val(d.sigPractitionerText);$("#sigPatientName").val(d.sigPatientText);$("#unableToSign").prop("checked",getBool(d.noSign));$("#unableToSignReason").val(d.reason);$("#sigHospReprName").val(d.sigHospReprText);$("#sigWitnessName").val(d.sigWitnessText);practitionerSignaturePath=d.sigPractitioner;patientSignaturePath=d.sigPatient;hospReprSignaturePath=d.sigHospRepr;witnessSignaturePath=d.sigWitness}regenerateSig(patientCanvas,patientSignaturePath);regenerateSig(hospReprCanvas,hospReprSignaturePath);regenerateSig(witnessCanvas,witnessSignaturePath);regenerateSig(practitionerCanvas,practitionerSignaturePath);if($("#unableToSign").prop("checked")==true){$("#li_signReason").show()}else{$("#li_signReason").hide()}})});currentSig="practitioner";SignatureToggle(currentSig)}function saveECG(){var a=$("#leads_nb").prop("checked");var b=$("#rhythm option:selected").val();var c=$("#ecg_regular").prop("checked");var d=$("#bbb").prop("checked");var e=$("#bbb_side").prop("checked");var f=$("#st_changes").prop("checked");var g=$("#ecg_i").data("status");var h=$("#ecg_avr").data("status");var i=$("#ecg_v1").data("status");var j=$("#ecg_v4").data("status");var k=$("#ecg_ii").data("status");var l=$("#ecg_avl").data("status");var m=$("#ecg_v2").data("status");var n=$("#ecg_v5").data("status");var o=$("#ecg_iii").data("status");var p=$("#ecg_avf").data("status");var q=$("#ecg_v3").data("status");var r=$("#ecg_v6").data("status");var s=$("#ecg_pacs").prop("checked");var t=$("#ecg_pvcs").prop("checked");var u=$("#ecg_time").val();var v=Date.parse(u);var w=document.getElementById("ecgImage").src;if(w.substr(0,4)!="data")w="";if(getCurrentRecord()=="0"){db.transaction(function(u){u.executeSql("INSERT INTO ecg (patient, leads_nb, rhythm, regular, bbb, bbb_side, st_changes, bi, bii, biii, "+" bavr, bavl, bavf, bv1, bv2, bv3, bv4, bv5, bv6, ecg_pacs, ecg_pvcs, photo, time) "+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,k,o,h,l,p,i,m,q,j,n,r,s,t,w,v],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(u){u.executeSql("UPDATE ecg SET leads_nb=?, rhythm=?, regular=?, bbb=?, bbb_side=?, st_changes=?, bi=?, bii=?, biii=?, "+" bavr=?, bavl=?, bavf=?, bv1=?, bv2=?, bv3=?, bv4=?, bv5=?, bv6=?, ecg_pacs=?, ecg_pvcs=?, photo=?, time=? WHERE id=?;",[a,b,c,d,e,f,g,k,o,h,l,p,i,m,q,j,n,r,s,t,w,v,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadECG(){ClearAllFields();resetPicture("ecgImage");$("#ecg_time").val(getFormatedDate(getSystemTime()));$("#div_ST_related li").data("status","");colorECGButtons();if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM ecg WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#leads_nb").prop("checked",getBool(d.leads_nb));$("#rhythm").val(d.rhythm);$("#ecg_regular").prop("checked",getBool(d.regular));$("#bbb").prop("checked",getBool(d.bbb));$("#bbb_side").prop("checked",getBool(d.bbb_side));$("#st_changes").prop("checked",getBool(d.st_changes));$("#ecg_i").data("status",d.bi);$("#ecg_avr").data("status",d.bavr);$("#ecg_v1").data("status",d.bv1);$("#ecg_v4").data("status",d.bv4);$("#ecg_ii").data("status",d.bii);$("#ecg_avl").data("status",d.bavl);$("#ecg_v2").data("status",d.bv2);$("#ecg_v5").data("status",d.bv5);$("#ecg_iii").data("status",d.biii);$("#ecg_avf").data("status",d.bavf);$("#ecg_v3").data("status",d.bv3);$("#ecg_v6").data("status",d.bv6);$("#ecg_pacs").prop("checked",getBool(d.ecg_pacs));$("#ecg_pvcs").prop("checked",getBool(d.ecg_pvcs));$("#ecg_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#ecg_time");setPicture("ecgImage",d.photo);colorECGButtons()}reflectDB("#bbb","#bbb_side");reflectDB("#st_changes","#div_ST_related")})})}}function loadECGList(){loadRecordsList("#ecg_sorted","ecg","#ecgTemplate",".ecg_time","#ecg")}function saveInOut(){var a=$("#intake_volume").val();var b=$("#intake_substance option:selected").val();var c=$("#intake_other").val();var d=$("#outtake_volume").val();var e=$("#outtake_substance option:selected").val();var f=$("#outtake_other").val();var g=$("#in_out_time").val();var h=Date.parse(g);if(getCurrentRecord()=="0"){db.transaction(function(g){g.executeSql("INSERT INTO in_out (patient, intake_volume, intake_substance, intake_other, outtake_volume, outtake_substance, outtake_other, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,h],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(g){g.executeSql("UPDATE in_out SET intake_volume=?, intake_substance=?, intake_other=?, outtake_volume=?, outtake_substance=?, "+" outtake_other=?, time=? WHERE id=?;",[a,b,c,d,e,f,h,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadInOut(){ClearAllFields();$("#in_out_time").val(getFormatedDate(getSystemTime()));$("#in_out_intake").prop("checked","checked");$("#li_intake_other_related").hide();$("#li_outtake_other_related").hide();if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM in_out WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#intake_volume").val(d.intake_volume);$("#intake_substance").val(d.intake_substance);$("#intake_other").val(d.intake_other);$("#outtake_volume").val(d.outtake_volume);$("#outtake_substance").val(d.outtake_substance);$("#outtake_other").val(d.outtake_other);$("#in_out_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#in_out_time")}reflect_select("#intake_substance",6,"#li_intake_other_related");reflect_select("#outtake_substance",4,"#li_outtake_other_related")})})}$("#intakeDiv").css("display","block");$("#outtakeDiv").css("display","none")}function loadInOutList(){loadRecordsList("#in_out_sorted","in_out","#in_outTemplate",".in_out_time","#in_out")}function saveCSpine(){var a=$("#manual_c_spine").prop("checked");var b=$("#c_collar").prop("checked");var c=$("#c_spine_size option:selected").val();var d=$("#c_spine_back_board option:selected").val();var e=$("#c_spine_transfer option:selected").val();var f=$("#c_spine_Secured option:selected").val();var g=$("#c_spine_time").val();var h=Date.parse(g);db.transaction(function(g){g.executeSql("UPDATE c_spine SET assessed=?, manual=?, c_collar=?, size=?, backboard=?, transferred=?, secured=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,h,getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadCSpine(){$("#c_spine_time").val(getFormatedDate(getSystemTime()));db.transaction(function(a){a.executeSql("SELECT * FROM c_spine WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#manual_c_spine").prop("checked",getBool(d.manual));$("#c_collar").prop("checked",getBool(d.c_collar));$("#c_spine_size").val(d.size);$("#c_spine_back_board").val(d.backboard);$("#c_spine_transfer").val(d.transferred);$("#c_spine_Secured").val(d.secured);$("#c_spine_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#c_spine_time")}reflectDB("#c_collar","#li_collar_related")})})}function saveMedication(){var a=$("#medication_name_generic").prop("checked");var b=$("#medication_medication option:selected").val();console.log("Saving "+b);if(b!=0){if($("#medication_name_generic").prop("checked")==false){b=convertToGenericNb(b-1)+1}}console.log("Saving (after conversion) "+b);var c=$("#medication_other").val();var d=$("#medication_dose").val();var e=$("#medication_dose_unit option:selected").val();var f=$("#medication_route option:selected").val();var g=$("#medication_route_other").val();var h=$("#medication_indication").val();var i=$("#medication_admin_by option:selected").val();var j=$("#medication_admin_other").val();var k=$("#medication_same_dose").val();var l=$("#medication_time").val();var m=Date.parse(l);if(getCurrentRecord()=="0"){db.transaction(function(l){l.executeSql("INSERT INTO medication (patient, isGeneric, medication, medic_other, dose, dose_unit, route, route_other, indication, admin, admin_other, same_dose, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,h,i,j,k,m],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(l){l.executeSql("UPDATE medication SET isGeneric=?, medication=?, medic_other=?, dose=?, dose_unit=?, route=?, route_other=?, indication=?, admin=?, "+" admin_other=?, same_dose=?, time=? WHERE id=?;",[a,b,c,d,e,f,g,h,i,j,k,m,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function switchSelectGeneric(){var a=$("#medication_medication").val();var b=medication_generic_alpha;var c=0;if(a!=0){if($("#medication_name_generic").prop("checked")==false){b=medication_generic_alpha;c=parseInt(convertToGenericNb(a-1))+2}else{b=medication_trade_alpha;c=parseInt(convertToTradeNb(a-1))+2}}$("#medication_medication").empty();$("#medication_medication").append('<option value="0">Other</option>');for(var d=0;d<b.length;d++){var e=b[d];$("#medication_medication").append("<option value="+(d+1)+">"+e+"</option>")}$("#medication_medication option:nth-child("+c+")").prop("selected","selected")}function loadSelectedMedication(a){var b=medication_generic_alpha;var c=0;console.log("loading: "+a);if(a!=0){if($("#medication_name_generic").prop("checked")==true){c=parseInt(a)+1}else{b=medication_trade_alpha;c=parseInt(convertToTradeNb(a-1))}}$("#medication_medication").empty();$("#medication_medication").append('<option value="0">Other</option>');for(var d=0;d<b.length;d++){var e=b[d];$("#medication_medication").append("<option value="+(d+1)+">"+e+"</option>")}console.log("Position calculated "+c);$("#medication_medication option:nth-child("+c+")").prop("selected","selected");reflect_select("#medication_medication",0,"#li_medication_other")}function loadMedication(){ClearAllFields();$("#medication_time").val(getFormatedDate(getSystemTime()));var a=0;$("#li_route_other_related").hide();$("#li_admin_other_related").hide();$("#li_medication_other").hide();$("#medication_name_generic").prop("checked",true);if(getCurrentRecord()!="0"){db.transaction(function(b){b.executeSql("SELECT * FROM medication WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);a=e.medication;$("#medication_other").val(e.medic_other);$("#medication_dose").val(e.dose);$("#medication_dose_unit").val(e.dose_unit);$("#medication_route").val(e.route);$("#medication_route_other").val(e.route_other);$("#medication_indication").val(e.indication);$("#medication_admin_by").val(e.admin);$("#medication_admin_other").val(e.admin_other);$("#medication_same_dose").val(e.same_dose);$("#medication_time").val(getFormatedDate(e.time));setMobiscroll(e.time,"#medication_time")}reflect_select("#medication_route",16,"#li_route_other_related");reflect_select("#medication_admin_by",2,"#li_admin_other_related");$("#medication_name_generic").prop("checked",true);loadSelectedMedication(a)})})}loadSelectedMedication(0)}function loadMedicationList(){loadRecordsList("#medication_sorted","medication","#medicationTemplate",".medication_time","#medication")}function saveSplinting(){var a=$("#splinting_location option:selected").val();var b=$("#splinting_side").prop("checked");var c=$("#splinting_prior").prop("checked");var d=$("#splinting_post").prop("checked");var e=$("#traction_applied").prop("checked");var f=$("#type_splint option:selected").val();var g=$("#type_splint_other").val();var h=$("#splinting_position option:selected").val();var i=$("#splinting_position_other").val();var j=$("#splinting_time").val();var k=Date.parse(j);if(getCurrentRecord()=="0"){db.transaction(function(j){j.executeSql("INSERT INTO splinting (patient, location, side, prior, post, traction, type, type_other, position, position_other, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,h,i,k],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(j){j.executeSql("UPDATE splinting SET location=?, side=?, prior=?, post=?, traction=?, type=?, type_other=?, position=?, "+" position_other=?, time=? WHERE id=?;",[a,b,c,d,e,f,g,h,i,k,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadSplinting(){ClearAllFields();$("#splinting_time").val(getFormatedDate(getSystemTime()));$("#li_splint_type_other").hide();$("#li_splint_position_other").hide();if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM splinting WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#splinting_location").val(d.location);$("#splinting_side").val(d.side);$("#splinting_prior").prop("checked",getBool(d.prior));$("#splinting_post").prop("checked",getBool(d.post));$("#traction_applied").prop("checked",getBool(d.traction));$("#type_splint").val(d.type);$("#type_splint_other").val(d.type_other);$("#splinting_position").val(d.position);$("#splinting_position_other").val(d.position_other);$("#splinting_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#splinting_time")}reflect_select("#type_splint",7,"#li_splint_type_other");reflect_select("#splinting_position",3,"#li_splint_position_other")})})}}function loadSplintingList(){loadRecordsList("#splinting_sorted","splinting","#splintingTemplate",".splinting_time","#splinting")}function saveIV_IO(){var a=$("#iv_io_site option:selected").val();var b=$("#iv_io_site_side").prop("checked");var c=$("#iv_io_gauge option:selected").val();var d=$("#iv_io_attempts").val();var e=$("#iv_io_success").prop("checked");var f=$("#iv_io_fluid").val();var g=$("#fluid_other").val();var h=$("#iv_io_time").val();var i=Date.parse(h);if(getCurrentRecord()=="0"){db.transaction(function(h){h.executeSql("INSERT INTO iv_io (patient, site, side, gauge, attempts, successful, fluid, fluid_other, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,i],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(h){h.executeSql("UPDATE iv_io SET site=?, side=?, gauge=?, attempts=?, successful=?, fluid=?, fluid_other=?, time=? WHERE id=?;",[a,b,c,d,e,f,g,i,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadIV_IO(){ClearAllFields();$("#iv_io_time").val(getFormatedDate(getSystemTime()));$("#li_fluid_related").hide();if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM iv_io WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#iv_io_site").val(d.site);$("#iv_io_site_side").prop("checked",getBool(d.side));$("#iv_io_gauge").val(d.gauge);$("#iv_io_attempts").val(d.attempts);$("#iv_io_success").prop("checked",getBool(d.successful));$("#iv_io_fluid").val(d.fluid);$("#fluid_other").val(d.fluid_other);$("#iv_io_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#iv_io_time")}reflect_select("#iv_io_fluid",5,"#li_fluid_related")})})}}function loadIV_IOList(){loadRecordsList("#iv_io_sorted","iv_io","#iv_ioTemplate",".iv_io_time","#iv_io")}function saveSuction(){var a=$("#suction_suction").prop("checked");var b=$("#suction_duration").val();var c=$("#suction_amount").val();var d=$("#suction_tip").val();var e=$("#suction_size").val();var f=$("#suction_time").val();var g=Date.parse(f);if(getCurrentRecord()=="0"){db.transaction(function(f){f.executeSql("INSERT INTO suction (patient, suction, duration, amount, tip, size, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,g],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(f){f.executeSql("UPDATE suction SET suction=?, duration=?, amount=?, tip=?, size=?, time=? WHERE id=?;",[a,b,c,d,e,g,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadSuction(){ClearAllFields();$("#suction_time").val(getFormatedDate(getSystemTime()));if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM suction WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#suction_suction").prop("checked",getBool(d.suction));$("#suction_duration").val(d.duration);$("#suction_amount").val(d.amount);$("#suction_tip").val(d.tip);$("#suction_size").val(d.size);$("#suction_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#suction_time")}})})}}function loadSuctionList(){loadRecordsList("#suction_sorted","suction","#suctionTemplate",".suction_time","#suction")}function saveCPAP_BiPAP(){var a=$("#cpap_device").prop("checked");var b=$("#cpap_bipap_size").val();var c=$("#cpap_bipap_fiO2").val();var d=$("#cpap_bipap_peep").val();var e=$("#cpap_bipap_pressure").val();var f=$("#cpap_bipap_time").val();var g=Date.parse(f);if(getCurrentRecord()=="0"){db.transaction(function(f){f.executeSql("INSERT INTO cpap_bipap (patient, device, size, fiO2, peep, pressure, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,g],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(f){f.executeSql("UPDATE cpap_bipap SET device=?, size=?, fiO2=?, peep=?, pressure=?, time=? WHERE id=?;",[a,b,c,d,e,g,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadCPAP_BiPAP(){ClearAllFields();$("#cpap_bipap_time").val(getFormatedDate(getSystemTime()));$("#cpap_device").prop("checked",false);if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM cpap_bipap WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#cpap_device").prop("checked",getBool(d.device));$("#cpap_bipap_size").val(d.size);$("#cpap_bipap_fiO2").val(d.fiO2);$("#cpap_bipap_peep").val(d.peep);$("#cpap_bipap_pressure").val(d.pressure);$("#cpap_bipap_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#cpap_bipap_time")}})})}}function loadCPAPBiPAPList(){loadRecordsList("#cpap_bipap_sorted","cpap_bipap","#cpap_bipapTemplate",".cpap_bipap_time","#cpap_bipap")}function saveVentilator(){var a=$("#ventilator_vented").prop("checked");var b=$("#ventilator_control").prop("checked");var c=$("#ventilator_simv").prop("checked");var d=$("#ventilator_rate").val();var e=$("#ventilator_tidal_vol").val();var f=$("#ventilator_insp_time").val();var g=$("#ventilator_i_ratio").val();var h=$("#ventilator_e_ratio").val();var i=$("#ventilator_fiO2").val();var j=$("#ventilator_peep").val();var k=$("#ventilator_sensitivity").val();var l=$("#ventilator_expir_p").val();var m=$("#ventilator_expir_tidal_v").val();var n=$("#ventilator_max_inspir_p").val();var o=$("#ventilator_plateau_p").val();var p=$("#ventilator_p_support").val();var q=$("#ventilator_limit_p_high").val();var r=$("#ventilator_limit_p_low").val();var s=$("#ventilator_low_min_v").val();var t=$("#ventilator_time").val();var u=Date.parse(t);if(getCurrentRecord()=="0"){db.transaction(function(t){t.executeSql("INSERT INTO ventilator (patient, vented, control, mode, rate, tidal_v, insp_time, i_ratio, e_ratio, fiO2, peep, "+" sensitivity, expir_p, expir_tidal_v, max_insp_p, plateau_p, p_support, high_p_lim , low_p_lim , low_min_v, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(t){t.executeSql("UPDATE ventilator SET vented=?, control=?, mode=?, rate=?, tidal_v=?, insp_time=?, i_ratio=?, e_ratio=?, fiO2=?, peep=?, "+" sensitivity=?, expir_p=?, expir_tidal_v=?, max_insp_p=?, plateau_p=?, p_support=?, high_p_lim=?, low_p_lim=?, low_min_v=?, "+" time=? WHERE id=?;",[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadVentilator(){ClearAllFields();$("#ventilator_time").val(getFormatedDate(getSystemTime()));$("#ventilator_vented").prop("checked",false);if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM ventilator WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#ventilator_vented").prop("checked",getBool(d.vented));$("#ventilator_control").prop("checked",getBool(d.control));$("#ventilator_simv").prop("checked",getBool(d.mode));$("#ventilator_rate").val(d.rate);$("#ventilator_tidal_vol").val(d.tidal_v);$("#ventilator_insp_time").val(d.insp_time);$("#ventilator_i_ratio").val(d.i_ratio);$("#ventilator_e_ratio").val(d.e_ratio);$("#ventilator_fiO2").val(d.fiO2);$("#ventilator_peep").val(d.peep);$("#ventilator_sensitivity").val(d.sensitivity);$("#ventilator_expir_p").val(d.expir_p);$("#ventilator_expir_tidal_v").val(d.expir_tidal_v);$("#ventilator_max_inspir_p").val(d.max_insp_p);$("#ventilator_plateau_p").val(d.plateau_p);$("#ventilator_p_support").val(d.p_support);$("#ventilator_limit_p_high").val(d.high_p_lim);$("#ventilator_limit_p_low").val(d.low_p_lim);$("#ventilator_low_min_v").val(d.low_min_v);$("#ventilator_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#ventilator_time")}reflectDB("#ventilator_vented","#div_vented")})})}}function loadVentilatorList(){loadRecordsList("#ventilator_sorted","ventilator","#ventilatorTemplate",".ventilator_time","#vent")}function saveInvasiveAirway(){var a=$("#airway_secured").prop("checked");var b=$("#airway_device option:selected").val();var c=$("#airway_distance").val();var d=$("#airway_size").val();var e=$("#airway_cuffed").prop("checked");var f=$("#airway_cuff_inflation").val();var g=$("#airway_bvm").prop("checked");var h=$("#airway_attempts").val();var i=$("#invasive_airway_time").val();var j=Date.parse(i);db.transaction(function(i){i.executeSql("UPDATE invasive_airway SET assessed=?, secured=?, device=?, distance=?, size=?, cuffed=?, inflation=?, bvm=?, attempts=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,j,getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadInvasiveAirway(){$("#invasive_airway_time").val(getFormatedDate(getSystemTime()));db.transaction(function(a){a.executeSql("SELECT * FROM invasive_airway WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#airway_secured").prop("checked",getBool(d.secured));$("#airway_device").val(d.device);$("#airway_distance").val(d.distance);$("#airway_size").val(d.size);$("#airway_cuffed").prop("checked",getBool(d.cuffed));$("#airway_cuff_inflation").val(d.inflation);$("#airway_bvm").prop("checked",getBool(d.bvm));$("#airway_attempts").val(d.attempts);$("#invasive_airway_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#invasive_airway_time")}reflectDB("#airway_cuffed","#div_cuff_inflation")})})}function saveAirway(){var a=$("#airway_O2").val();var b=$("#basic_maneuvers option:selected").val();var c=$("#opa option:selected").val();var d=$("#npa option:selected").val();var e=$("#bvm").prop("checked");var f=$("#airway_rate").val();var g=$("#airway_time").val();var h=Date.parse(g);if(getCurrentRecord()=="0"){db.transaction(function(g){g.executeSql("INSERT INTO airway (patient, oxygen, basic_maneuvers, opa, npa, bvm, rate, time)"+" VALUES (?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,h],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(g){g.executeSql("UPDATE airway SET oxygen=?, basic_maneuvers=?, opa=?, npa=?, bvm=?, rate=?, time=? WHERE id=?;",[a,b,c,d,e,f,h,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}}function loadAirway(){ClearAllFields();$("#airway_time").val(getFormatedDate(getSystemTime()));if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM airway WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#airway_O2").val(d.oxygen);$("#basic_maneuvers").val(d.basic_maneuvers);$("#opa").val(d.opa);$("#npa").val(d.npa);$("#bvm").prop("checked",getBool(d.bvm));$("#airway_rate").val(d.rate);$("#airway_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#airway_time")}})})}}function loadAirwayList(){loadRecordsList("#airway_sorted","airway","#airwayTemplate",".airway_time","#airwayProcedure")}function resetCurrentRecord(){sessionStorage.currentRecordId="0"}function getCurrentRecord(){return sessionStorage.currentRecordId}function setCurrentRecord(a){sessionStorage.currentRecordId=a}function deleteRecordById(a,b){db.transaction(function(c){c.executeSql("DELETE FROM "+b+" WHERE id=?;",[a],null,errorHandler)})}function loadRecordsList(a,b,c,d,e){showPatientPageWidget();$(a+" li:gt(0)").remove();db.transaction(function(f){f.executeSql("SELECT id, patient, time FROM "+b+" WHERE patient = ? ORDER BY CAST(time AS INT);",[getCurrentPatientId()],function(f,g){for(var h=0;h<g.rows.length;h++){var i=g.rows.item(h);var j=$(c).clone();j.removeAttr("id");j.removeAttr("style");j.data("entryId",i.id);j.appendTo(a);j.find(d).text(getFullFormatedTime(i.time));j.find(d).parent().bind("click",function(a){var b=$(this);var c=b.data("entryId");setCurrentRecord(c);jQT.goTo(e,"flip")});j.find(".delete").bind("touchstart",function(a){var c=$(this).parent();var d=c.data("entryId");deleteRecordById(d,b);c.slideUp();a.stopPropagation()});j.find(".delete").bind("click",function(a){a.stopPropagation();event.preventDefault()});j.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()});j.find(".unlock_line").bind("click",function(a){a.stopPropagation();event.preventDefault()})}},errorHandler)})}function saveMuscularSkeletal(){var a=$("#muscular_skeletal_no_complaints").prop("checked");listMuscular=[];$("#div_complaints ul.grid5Column li").each(function(a){if($(this).data("status")=="positive"){listMuscular.push($(this).prop("id"))}});var b=listMuscular.join(",");if(a==true)b="";db.transaction(function(c){c.executeSql("UPDATE muscular_skeletal SET assessed=?, nocomplaint = ?, muscular = ?"+" WHERE patient = ? ;",["true",a,b,getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadMuscularSkeletal(){$("#div_complaints ul.grid5Column").each(function(a){toggleElement($(this))});$("#div_complaints ul.grid5Column li").each(function(a){$(this).data("status","negative")});db.transaction(function(a){a.executeSql("SELECT * FROM muscular_skeletal WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);if(d.nocomplaint=="false"){if(d.muscular!=""){var e=d.muscular.split(",");listMuscular=e}if(listMuscular.length!=0){for(var c=0;c<listMuscular.length;c++){var f=$("#div_complaints").find("#"+listMuscular[c]);oneTap_one_color_button(f);if($(f).parent().css("display","none")){$(f).parent().show()}}}$("#muscular_skeletal_no_complaints").prop("checked",false)}}reflectDBReverse("#muscular_skeletal_no_complaints","#div_complaints")})})}function saveApgar(){var a=$("#apgar_appearance").val();var b=$("#apgar_pulse_rate").val();var c=$("#apgar_grimace").val();var d=$("#apgar_activity").val();var e=$("#apgar_respiratory").val();var f=calculateTotalApgar();var g="UPDATE apgar set appearance1=?, pulse1=?, grimace1=?, activity1=?, respirations1=?, total1=?, time1=? WHERE patient=?;";var h="UPDATE apgar set appearance5=?, pulse5=?, grimace5=?, activity5=?, respirations5=?, total5=?, time5=? WHERE patient=?;";var i;if(APGAR_min1==true){i=g;$("#field_delivery_apgar1").text("1 Min: "+f);$("#neuro_apgar1").text("1 Min: "+f)}else{i=h;$("#field_delivery_apgar5").text("5 Min: "+f);$("#neuro_apgar5").text("5 Min: "+f)}db.transaction(function(g){g.executeSql(i,[a,b,c,d,e,f,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadApgar(){db.transaction(function(a){a.executeSql("SELECT * FROM apgar WHERE patient = ?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);if(APGAR_min1==true){$("#apgar_appearance").val(d.appearance1);$("#apgar_pulse_rate").val(d.pulse1);$("#apgar_grimace").val(d.grimace1);$("#apgar_activity").val(d.activity1);$("#apgar_respiratory").val(d.respirations1);$("#apgar_total").val(d.total1);$("#apgar .toolbar h1").text("APGAR: 1 minute")}if(APGAR_min1==false){$("#apgar_appearance").val(d.appearance5);$("#apgar_pulse_rate").val(d.pulse5);$("#apgar_grimace").val(d.grimace5);$("#apgar_activity").val(d.activity5);$("#apgar_respiratory").val(d.respirations5);$("#apgar_total").val(d.total5);$("#apgar .toolbar h1").text("APGAR: 5 minutes")}}calculateTotalApgar()})})}function getAPGARtotals(){db.transaction(function(a){a.executeSql("SELECT * FROM apgar WHERE patient = ?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#field_delivery_apgar1").text("1 Min: "+d.total1);$("#neuro_apgar1").text("1 Min: "+d.total1);$("#field_delivery_apgar5").text("5 Min: "+d.total5);$("#neuro_apgar5").text("5 Min: "+d.total5)}})})}function selectMinute(a){if(a=="1min")APGAR_min1=true;else APGAR_min1=false;loadApgar()}function saveFieldDelivery(){var a=$("#field_delivery_presentation").val();var b=$("#field_delivery_time_delivery").val();var c=$("#field_delivery_meconium").val();var d=$("#field_delivery_cord_length").val();var e=$("#field_delivery_apgar1").html();var f=$("#field_delivery_apgar5").html();var g=$("#field_delivery_stimulation").prop("checked");var h=$("#field_delivery_stimulation_type").val();var i=$("#field_delivery_placenta").prop("checked");var j=$("#field_delivery_time_placenta").val();var k=$("#field_delivery_placenta_intact").prop("checked");db.transaction(function(l){l.executeSql("UPDATE field_delivery SET assessed=?, presentation=?, delivery_time=?, meconium=?, cord_length=?, apgar1=?, apgar5=?, stimulation=?, "+" stimulation_type=?, placenta=?, placenta_time=?, placenta_intact=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,i,j,k,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadFieldDelivery(){$("#field_delivery_stimulation").prop("checked",false);$("#field_delivery_placenta").prop("checked",true);$("#field_delivery_placenta_intact").prop("checked",false);db.transaction(function(a){a.executeSql("SELECT * FROM field_delivery WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#field_delivery_presentation").val(d.presentation);$("#field_delivery_time_delivery").val(d.delivery_time);$("#field_delivery_meconium").val(d.meconium);$("#field_delivery_cord_length").val(d.cord_length);$("#field_delivery_apgar1").val(d.apgar1);$("#field_delivery_apgar5").val(d.apgar5);$("#field_delivery_stimulation").prop("checked",getBool(d.stimulation));$("#field_delivery_stimulation_type").val(d.stimulation_type);$("#field_delivery_placenta").prop("checked",getBool(d.placenta));$("#field_delivery_time_placenta").val(d.placenta_time);$("#field_delivery_placenta_intact").prop("checked",getBool(d.placenta_intact))}reflectDB("#field_delivery_stimulation","#li_stimulation_related")})})}function saveGIGU(a){var b=false;var c=$("#gi_assessed").prop("checked");var d=$("#flat").prop("checked");var e=$("#soft").prop("checked");var f=$("#tender").prop("checked");var g=$("#rebound").prop("checked");var h=$("#gi_luq").data("green");var i=$("#gi_ruq").data("green");var j=$("#gi_llq").data("green");var k=$("#gi_rlq").data("green");var l=$("#epigastric").data("green");var m=$("#suprapubic").data("green");var n=$("#obese").prop("checked");var o=$("#gi_last_bm").val();var p=$("#gi_loi").val();var q=$("#gu_assessed").prop("checked");var r=$("#gu_pain").prop("checked");var s=$("#gu_frequency").prop("checked");var t=$("#hematuria").prop("checked");var u=$("#incontinence").prop("checked");var v=$("#bladder_distention").prop("checked");var w=$("#urinary_urgency").prop("checked");var x=$("#gu_last_void").val();var y=$("#gravid").val();var z=$("#term").val();var A=$("#para").val();var B=$("#abortia").val();var C=$("#live").val();var D=$("#last_menstruation").val();var E=$("#vaginal_discharge").prop("checked");var F=$("#discharge_substance").val();var G=$("#pregnant option:selected").val();var H=$("#edc").val();var I=$("#know_gestation").prop("checked");var J=$("#gestation_weeks").val();var K=$("#membrane_intact").prop("checked");var L=$("#membrane_ruptured").val();var M=$("#membrane_fluid").val();var N=$("#expected_babies").val();var O=$("#fetal_movement").prop("checked");var P=$("#last_movement").val();var Q=$("#movement_per_hr").val();var R=$("#contractions").prop("checked");var S=$("#contraction_duration").val();var T=$("#contraction_separation").val();db.transaction(function(a){a.executeSql(" UPDATE gi_gu SET gi_assessed=?, flat=?, soft=?, tender=?, rebound=?, luq=?, ruq=?, llq=?, rlq=?, epigastric=?, suprapubic=?, "+" obese=?, last_bm=?, loi=?, gu_assessed=?, pain=?, frequency=?, hematuria=?, incontinence=?, bladder_distention=?, urinary_urgency=?, last_void=?, "+" gyn_assessed=?, gravid=?, term=?, para=?, abortia=?, live=?, last_menstruation=?, discharge=?, substance=?, pregnant=?, edc=?, gestation_known=?, gest_weeks=?, "+" membr_intact=?, time_ruptured=?, fluid=?, expected_babies=?, fetal_mvmt=?, last_mvmt=?, mvmt_per_hr=?, contractions=?, contraction_duration=?, "+" contraction_separation=?, time=? WHERE patient=?;",[c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,"true",y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,getSystemTime(),getCurrentPatientId()],function(){b=true},errorHandler)});var U=$("#gyn_edema").prop("checked");var V=$("#gyn_edema_location").val();var W=$("#gyn_edema_severity").val();db.transaction(function(c){c.executeSql(" UPDATE abc SET peripheral_edema=?, peripheral_edema_location=?, edema_severity=?  WHERE patient=?;",[U,V,W,getCurrentPatientId()],function(){if(b==true){if(a=="#field_delivery")redirect("#field_delivery","pop");else jQT.goBack()}},errorHandler)})}function loadGIGU(){gi_guToggle("gi");$("#gi_assessed").prop("checked",false);$("#rebound").prop("checked",false);$("#gu_assessed").prop("checked",false);$('#div_guDetails li input[type="checkbox"]').prop("checked",false);$('#gi_pain_location li input[type="checkbox"]').prop("checked",false);$("#obese").prop("checked",false);$("#vaginal_discharge").prop("checked",false);$("#know_gestation").prop("checked",true);$("#membrane_intact").prop("checked",true);$("#fetal_movement").prop("checked",false);$("#gi_outline div").data("green",false);$("#gi_outline div").css("background","white");db.transaction(function(a){a.executeSql("SELECT * FROM gi_gu WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#gi_assessed").prop("checked",getBool(d.gi_assessed));$("#flat").prop("checked",getBool(d.flat));$("#soft").prop("checked",getBool(d.soft));$("#tender").prop("checked",getBool(d.tender));$("#rebound").prop("checked",getBool(d.rebound));$("#gi_luq").data("green",getBool(d.luq));$("#gi_ruq").data("green",getBool(d.ruq));$("#gi_llq").data("green",getBool(d.llq));$("#gi_rlq").data("green",getBool(d.rlq));$("#epigastric").data("green",getBool(d.epigastric));$("#suprapubic").data("green",getBool(d.suprapubic));$("#obese").prop("checked",getBool(d.obese));$("#gi_last_bm").val(d.last_bm);$("#gi_loi").val(d.loi);$("#gu_assessed").prop("checked",getBool(d.gu_assessed));$("#gu_pain").prop("checked",getBool(d.pain));$("#gu_frequency").prop("checked",getBool(d.frequency));$("#hematuria").prop("checked",getBool(d.hematuria));$("#incontinence").prop("checked",getBool(d.incontinence));$("#bladder_distention").prop("checked",getBool(d.bladder_distention));$("#urinary_urgency").prop("checked",getBool(d.urinary_urgency));$("#gu_last_void").prop("checked",getBool(d.last_void));$("#gravid").val(d.gravid);$("#term").val(d.term);$("#para").val(d.para);$("#abortia").val(d.abortia);$("#live").val(d.live);$("#last_menstruation").val(d.last_menstruation);$("#vaginal_discharge").prop("checked",getBool(d.discharge));$("#discharge_substance").val(d.substance);$("#pregnant").val(d.pregnant);$("#edc").val(d.edc);$("#know_gestation").prop("checked",getBool(d.gestation_known));$("#gestation_weeks").val(d.gest_weeks);$("#membrane_intact").prop("checked",getBool(d.membr_intact));$("#membrane_ruptured").val(d.time_ruptured);$("#membrane_fluid").val(d.fluid);$("#expected_babies").val(d.expected_babies);$("#fetal_movement").prop("checked",getBool(d.fetal_mvmt));$("#last_movement").val(d.last_mvmt);$("#movement_per_hr").val(d.mvmt_per_hr);$("#contractions").prop("checked",getBool(d.contractions));$("#contraction_duration").val(d.contraction_duration);$("#contraction_separation").val(d.contraction_separation)}reflectDB("#gi_assessed","#div_giDetails");reflectDB("#gu_assessed","#div_guDetails");reflectDB("#vaginal_discharge","#li_discharge_substance");reflectDB("#know_gestation","#li_gestation_weeks");reflectDB("#fetal_movement","#div_movement_related");reflectDB("#contractions","#li_contractions_related");reflectDBReverse("#membrane_intact","#div_membrane_related");reflect_select("#pregnant",1,"#div_pregnant_related");reflect_select("#pregnant",1,"#link_field_delivery");$("#gi_outline div").each(function(a){if($(this).data("green")==true)$(this).css("background","green")})})});db.transaction(function(a){a.executeSql("SELECT * FROM patients WHERE id=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);if(getBool(d.gender)==true){$(".female_related").hide()}else{$(".female_related").show()}}})});db.transaction(function(a){a.executeSql("SELECT * FROM abc WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#gyn_edema").prop("checked",getBool(d.peripheral_edema));$("#gyn_edema_location").val(d.peripheral_edema_location);$("#gyn_edema_severity").val(d.edema_severity)}reflectDB("#gyn_edema","#div_gyn_edema_details")})})}function saveBurn(){var a=$("#burn_head_front").data("burn_degree");var b=$("#burn_head_back").data("burn_degree");var c=$("#burn_chest").data("burn_degree");var d=$("#burn_abdomen").data("burn_degree");var e=$("#burn_upper_back").data("burn_degree");var f=$("#burn_lower_back").data("burn_degree");var g=$("#burn_ulx_up_front").data("burn_degree");var h=$("#burn_ulx_low_front").data("burn_degree");var i=$("#burn_ulx_up_back").data("burn_degree");var j=$("#burn_ulx_low_back").data("burn_degree");var k=$("#burn_urx_up_front").data("burn_degree");var l=$("#burn_urx_low_front").data("burn_degree");var m=$("#burn_urx_up_back").data("burn_degree");var n=$("#burn_urx_low_back").data("burn_degree");var o=$("#burn_llx_up_front").data("burn_degree");var p=$("#burn_llx_low_front").data("burn_degree");var q=$("#burn_llx_up_back").data("burn_degree");var r=$("#burn_llx_low_back").data("burn_degree");var s=$("#burn_lrx_up_front").data("burn_degree");var t=$("#burn_lrx_low_front").data("burn_degree");var u=$("#burn_lrx_up_back").data("burn_degree");var v=$("#burn_lrx_low_back").data("burn_degree");var w=$("#total_burn_percentage").val();var x=document.getElementById("traumaBurnImage").src;if(x.substr(0,4)!="data")x="";db.transaction(function(y){y.executeSql("UPDATE trauma_burn SET assessed=?, head_front = ?, head_back = ?, chest = ?, abdomen = ?, upper_back = ?, lower_back = ?, "+" ulx_up_front = ?, ulx_low_front = ?, ulx_up_back = ?, ulx_low_back = ?, urx_up_front = ?, urx_low_front = ?, urx_up_back = ?, urx_low_back = ?, "+" llx_up_front = ?, llx_low_front = ?, llx_up_back = ?, llx_low_back = ?, lrx_up_front = ?, lrx_low_front = ?, lrx_up_back = ?, lrx_low_back = ?, "+" total_surface = ?, body_type = ?, photo = ?, time = ?"+" WHERE patient = ? ;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,bodyType,x,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadBurn(){init_body_parts();burnToggle("adult");resetPicture("traumaBurnImage");db.transaction(function(a){a.executeSql("SELECT * FROM trauma_burn WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#burn_head_front").data("burn_degree",d.head_front);$("#burn_head_back").data("burn_degree",d.head_back);$("#burn_chest").data("burn_degree",d.chest);$("#burn_abdomen").data("burn_degree",d.abdomen);$("#burn_upper_back").data("burn_degree",d.upper_back);$("#burn_lower_back").data("burn_degree",d.lower_back);$("#burn_ulx_up_front").data("burn_degree",d.ulx_up_front);$("#burn_ulx_low_front").data("burn_degree",d.ulx_low_front);$("#burn_ulx_up_back").data("burn_degree",d.ulx_up_back);$("#burn_ulx_low_back").data("burn_degree",d.ulx_low_back);$("#burn_urx_up_front").data("burn_degree",d.urx_up_front);$("#burn_urx_low_front").data("burn_degree",d.urx_low_front);$("#burn_urx_up_back").data("burn_degree",d.urx_up_back);$("#burn_urx_low_back").data("burn_degree",d.urx_low_back);$("#burn_llx_up_front").data("burn_degree",d.llx_up_front);$("#burn_llx_low_front").data("burn_degree",d.llx_low_front);$("#burn_llx_up_back").data("burn_degree",d.llx_up_back);$("#burn_llx_low_back").data("burn_degree",d.llx_low_back);$("#burn_lrx_up_front").data("burn_degree",d.lrx_up_front);$("#burn_lrx_low_front").data("burn_degree",d.lrx_low_front);$("#burn_lrx_up_back").data("burn_degree",d.lrx_up_back);$("#burn_lrx_low_back").data("burn_degree",d.lrx_low_back);burnToggle(d.body_type);$("#burn_body_parts img").each(function(a){renderColors(this)});setPicture("traumaBurnImage",d.photo)}})})}function saveFalls(){var a=$("#assault_fall").prop("checked");var b=$("#distance_fall").val();var c=$("#distance_fall_unit").prop("checked");var d=$("#surface_fall").val();var e=$("#loss_of_c_fall").prop("checked");var f=$("#time_loss_of_c_fall").val();var g=$("#bleeding_fall").prop("checked");var h=$("#controlled_fall").prop("checked");var i=$("#head_fall").prop("checked");var j=$("#neck_fall").prop("checked");var k=$("#chest_fall").prop("checked");var l=$("#abd_fall").prop("checked");var m=$("#pelvis_fall").prop("checked");var n=$("#ulxr_fall").prop("checked");var o=$("#urxr_fall").prop("checked");var p=$("#llxr_fall").prop("checked");var q=$("#lrxr_fall").prop("checked");var r=$("#back_fall").prop("checked");var s=document.getElementById("traumaFallImage").src;if(s.substr(0,4)!="data")s="";db.transaction(function(t){t.executeSql("UPDATE trauma_fall SET assessed=?, assault=?, distance=?, distance_unit=?, surface=?, loss_of_c=?, loss_of_c_time=?, "+" bleeding=?, controlled=?, head=?, neck=?, chest=?, abd=?, "+" pelvis=?, ulxr=?, urxr=?, llxr=?, lrxr=?, back=?, photo=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadFalls(){$("#distance_fall_unit").prop("checked",false);resetPicture("traumaBluntImage");db.transaction(function(a){a.executeSql("SELECT * FROM trauma_fall WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#assault_fall").prop("checked",getBool(d.assault));$("#distance_fall").val(d.distance);$("#distance_fall_unit").prop("checked",getBool(d.distance_unit));$("#surface_fall").val(d.surface);$("#loss_of_c_fall").prop("checked",getBool(d.loss_of_c));$("#time_loss_of_c_fall").val(d.loss_of_c_time);$("#bleeding_fall").prop("checked",getBool(d.bleeding));$("#controlled_fall").prop("checked",getBool(d.controled));$("#head_fall").prop("checked",getBool(d.head));$("#neck_fall").prop("checked",getBool(d.neck));$("#chest_fall").prop("checked",getBool(d.chest));$("#abd_fall").prop("checked",getBool(d.abd));$("#pelvis_fall").prop("checked",getBool(d.pelvis));$("#ulxr_fall").prop("checked",getBool(d.ulxr));$("#urxr_fall").prop("checked",getBool(d.urxr));$("#llxr_fall").prop("checked",getBool(d.llxr));$("#lrxr_fall").prop("checked",getBool(d.lrxr));$("#back_fall").prop("checked",getBool(d.back));setPicture("traumaFallImage",d.photo)}reflectDB("#loss_of_c_fall","#li_loss_of_c_time");reflectDB("#bleeding_fall","#li_controlled_fall")})})}function saveBlunt(){var a=$("#assault_blunt").prop("checked");var b=$("#moi_blunt").val();var c=$("#velocity_blunt").prop("checked");var d=$("#bleeding_blunt").prop("checked");var e=$("#controlled_blunt").prop("checked");var f=$("#head_blunt").prop("checked");var g=$("#neck_blunt").prop("checked");var h=$("#chest_blunt").prop("checked");var i=$("#abd_blunt").prop("checked");var j=$("#pelvis_blunt").prop("checked");var k=$("#ulxr_blunt").prop("checked");var l=$("#urxr_blunt").prop("checked");var m=$("#llxr_blunt").prop("checked");var n=$("#lrxr_blunt").prop("checked");var o=$("#back_blunt").prop("checked");var p=document.getElementById("traumaBluntImage").src;if(p.substr(0,4)!="data")p="";db.transaction(function(c){c.executeSql("UPDATE trauma_blunt SET assessed=?, assault=?, moi=?, bleeding=?, controlled=?, head=?, neck=?, chest=?, abd=?, "+" pelvis=?, ulxr=?, urxr=?, llxr=?, lrxr=?, back=?, photo=?, time=? WHERE patient=?;",["true",a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadBlunt(){resetPicture("traumaBluntImage");db.transaction(function(a){a.executeSql("SELECT * FROM trauma_blunt WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#assault_blunt").prop("checked",getBool(d.assault));$("#moi_blunt").val(d.moi);$("#velocity_blunt").prop("checked",getBool(d.velocity));$("#bleeding_blunt").prop("checked",getBool(d.bleeding));$("#controlled_blunt").prop("checked",getBool(d.controled));$("#head_blunt").prop("checked",getBool(d.head));$("#neck_blunt").prop("checked",getBool(d.neck));$("#chest_blunt").prop("checked",getBool(d.chest));$("#abd_blunt").prop("checked",getBool(d.abd));$("#pelvis_blunt").prop("checked",getBool(d.pelvis));$("#ulxr_blunt").prop("checked",getBool(d.ulxr));$("#urxr_blunt").prop("checked",getBool(d.urxr));$("#llxr_blunt").prop("checked",getBool(d.llxr));$("#lrxr_blunt").prop("checked",getBool(d.lrxr));$("#back_blunt").prop("checked",getBool(d.back));setPicture("traumaBluntImage",d.photo)}reflectDB("#bleeding_blunt","#li_blunt_bleeding_controlled")})})}function savePenetrating(){var a=$("#assault_penetrating").prop("checked");var b=$("#moi_penetrating").val();var c=$("#velocity_penetrating").prop("checked");var d=$("#bleeding_penetrating").prop("checked");var e=$("#controlled_penetrating").prop("checked");var f=$("#head_penetrating").prop("checked");var g=$("#neck_penetrating").prop("checked");var h=$("#chest_penetrating").prop("checked");var i=$("#abd_penetrating").prop("checked");var j=$("#pelvis_penetrating").prop("checked");var k=$("#ulxr_penetrating").prop("checked");var l=$("#urxr_penetrating").prop("checked");var m=$("#llxr_penetrating").prop("checked");var n=$("#lrxr_penetrating").prop("checked");var o=$("#back_penetrating").prop("checked");var p=document.getElementById("traumaPenetrImage").src;if(p.substr(0,4)!="data")p="";db.transaction(function(q){q.executeSql("UPDATE trauma_penetrating SET assessed=?, assault=?, moi=?, velocity=?, bleeding=?, controlled=?, head=?, neck=?, chest=?, abd=?, "+" pelvis=?, ulxr=?, urxr=?, llxr=?, lrxr=?, back=?, photo=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadPenetrating(){resetPicture("traumaPenetrImage");db.transaction(function(a){a.executeSql("SELECT * FROM trauma_penetrating WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#assault_penetrating").prop("checked",getBool(d.assault));$("#moi_penetrating").val(d.moi);$("#velocity_penetrating").prop("checked",getBool(d.velocity));$("#bleeding_penetrating").prop("checked",getBool(d.bleeding));$("#controlled_penetrating").prop("checked",getBool(d.controled));$("#head_penetrating").prop("checked",getBool(d.head));$("#neck_penetrating").prop("checked",getBool(d.neck));$("#chest_penetrating").prop("checked",getBool(d.chest));$("#abd_penetrating").prop("checked",getBool(d.abd));$("#pelvis_penetrating").prop("checked",getBool(d.pelvis));$("#ulxr_penetrating").prop("checked",getBool(d.ulxr));$("#urxr_penetrating").prop("checked",getBool(d.urxr));$("#llxr_penetrating").prop("checked",getBool(d.llxr));$("#lrxr_penetrating").prop("checked",getBool(d.lrxr));$("#back_penetrating").prop("checked",getBool(d.back));setPicture("traumaPenetrImage",d.photo)}reflectDB("#bleeding_penetrating","#li_penetrating_bleeding_controlled")})})}function findSeat(){var a="";$("#car_seats div").each(function(b){if($(this).data("status")=="positive"){a=$(this).prop("id")}});$("#motorcycle_seats div").each(function(b){if($(this).data("status")=="positive"){a=$(this).prop("id")}});return a}function saveAuto(){var a=$("#car").prop("checked");var b=$("#seatbelt").prop("checked");var c=$("#airbag").prop("checked");var d=$("#helmet").prop("checked");var e=$("#leathers").prop("checked");var f=$("#nb_occupants").val();var g=$("#approx_speed").val();var h=$("#speed_unit").prop("checked");var i=$("#removed_by option:selected").val();var j=$("#per option:selected").val();var k=document.getElementById("traumaAutoImage").src;if(k.substr(0,4)!="data")k="";db.transaction(function(l){l.executeSql("UPDATE trauma_auto SET assessed=?, car=?, seat=?, seatbelt=?, airbag=?, helmet=?, leathers=?, nb_occupants=?, approx_speed=?, "+"speed_unit=?, removed_by=?, per=?, photo=?, time=? WHERE patient=?;",["true",a,findSeat(),b,c,d,e,f,g,h,i,j,k,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadAuto(){$("#car_seats div").css("background","white");$("#car_seats div").data("status","negative");$("#motorcycle_seats div").css("background","white");$("#motorcycle_seats div").data("status","negative");var a="";resetPicture("traumaAutoImage");db.transaction(function(b){b.executeSql("SELECT * FROM trauma_auto WHERE patient=?",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);$("#car").prop("checked",getBool(e.car));$("#seatbelt").prop("checked",getBool(e.seatbelt));$("#airbag").prop("checked",getBool(e.airbag));$("#helmet").prop("checked",getBool(e.helmet));$("#leathers").prop("checked",getBool(e.leathers));$("#nb_occupants").val(e.nb_occupants);$("#approx_speed").val(e.approx_speed);$("#speed_unit").prop("checked",getBool(e.speed_unit));$("#removed_by").val(e.removed_by);$("#per").val(e.per);setPicture("traumaAutoImage",e.photo);a=e.seat}reflectCarMoto(a)})})}function saveTrauma(){var a=$("#is_trauma").prop("checked");var b;if(a==true)b=false;else b=true;db.transaction(function(a){a.executeSql("UPDATE trauma SET isTrauma=? WHERE patient=?;",[b,getCurrentPatientId()],null,errorHandler)})}function loadTrauma(){$("#is_trauma").prop("checked",false);db.transaction(function(a){a.executeSql("SELECT * FROM trauma WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#is_trauma").prop("checked",getBool(d.isTrauma))}if($("#is_trauma").prop("checked")==false){$("#traumaTypes li").hide();$("#li_is_trauma").show()}})})}function saveAbc(a){var b=$("#open_patent").prop("checked");var c=$("#tracheal_deviation").prop("checked");var d=$("#tracheal_deviation_side").prop("checked");var e=$("#interventions").prop("checked");var f=$("#breathing_type option:selected").val();var g=$("#laboured").prop("checked");var h=$("#effective").prop("checked");var i=$("#accessory_muscle").prop("checked");var j=$("#nasal_flare").prop("checked");var k=$("#cough").prop("checked");var l=$("#productive").prop("checked");var m=$("#subcutaneous_emphysema").prop("checked");var n=$("#flailed_chest").prop("checked");var o=$("#flailed_chest_side").prop("checked");var p=$("#suspect_pneumothorax").prop("checked");var q=$("#suspect_hemothorax").prop("checked");var r=$("#ctax4").prop("checked");var s=$("#UL_Lung_Sound option:selected").val();var t=$("#UR_Lung_Sound option:selected").val();var u=$("#LL_Lung_Sound option:selected").val();var v=$("#LR_Lung_Sound option:selected").val();var w=$("#pulse_location option:selected").val();var x=$("#pulse_regularity").prop("checked");var y=$("#pulse_quality option:selected").val();var z=$("#jvd").prop("checked");var A=$("#cap_refill").prop("checked");var B=$("#skin option:selected").val();var C=$("#abctemp option:selected").val();var D=$("#dry").prop("checked");var E=$("#heart_tones option:selected").val();var F=$("#heart_tones_quality option:selected").val();var G=$("#peripheral_edema").prop("checked");var H=$("#peripheral_edema_location").val();var I=$("#edema_severity option:selected").val();db.transaction(function(J){J.executeSql("UPDATE abc SET assessed=?, open_patent=?, tracheal_deviation=?, tracheal_deviation_side=?, interventions=?, breathing_type=?, laboured=?, effective=?, "+"accessory_muscle=?, nasal_flare=?, cough=?, productive=?, subcut_emph=?, flailed_chest=?, flailed_chest_side=?, suspect_pneu=?, "+"suspect_hemo=?, ctax4=?, ul_sound=?, ur_sound=?, ll_sound=?, lr_sound=?, pulse_location=?, pulse_regularity=?, pulse_quality=?, jvd=?, "+"cap_refill=?, skin=?, abctemp=?, dry=?, heart_tones=?, heart_tones_quality=?, peripheral_edema=?, peripheral_edema_location=?, "+"edema_severity=?, time=? WHERE patient=?;",["true",b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,getSystemTime(),getCurrentPatientId()],function(){if(a=="#airwayProcedures")redirect("#airwayProcedures","swap");else jQT.goBack()},errorHandler)})}function loadAbc(){abcToggle("a");$("#accessory_muscle").prop("checked",false);$("#jvd").prop("checked",false);$("#tracheal_deviation").prop("checked",false);$("#interventions").prop("checked",false);$("#flailed_chest").prop("checked",false);$("#peripheral_edema").prop("checked",false);$("#ctax4").prop("checked",false);db.transaction(function(a){a.executeSql("SELECT * FROM abc WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#open_patent").prop("checked",getBool(d.open_patent));$("#tracheal_deviation").prop("checked",getBool(d.tracheal_deviation));$("#tracheal_deviation_side").prop("checked",getBool(d.tracheal_deviation_side));$("#interventions").prop("checked",getBool(d.interventions));$("#breathing_type").val(d.breathing_type);$("#laboured").prop("checked",getBool(d.laboured));$("#effective").prop("checked",getBool(d.effective));$("#accessory_muscle").prop("checked",getBool(d.accessory_muscle));$("#nasal_flare").prop("checked",getBool(d.nasal_flare));$("#cough").prop("checked",getBool(d.cough));$("#productive").prop("checked",getBool(d.productive));$("#subcutaneous_emphysema").prop("checked",getBool(d.subcut_emph));$("#flailed_chest").prop("checked",getBool(d.flailed_chest));$("#flailed_chest_side").prop("checked",getBool(d.flailed_chest_side));$("#suspect_pneumothorax").prop("checked",getBool(d.suspect_pneu));$("#suspect_hemothorax").prop("checked",getBool(d.suspect_hemo));$("#ctax4").prop("checked",getBool(d.ctax4));$("#UL_Lung_Sound").val(d.ul_sound);$("#UR_Lung_Sound").val(d.ur_sound);$("#LL_Lung_Sound").val(d.ll_sound);$("#LR_Lung_Sound").val(d.lr_sound);$("#pulse_location").val(d.pulse_location);$("#pulse_regularity").prop("checked",getBool(d.pulse_regularity));$("#pulse_quality").val(d.pulse_quality);$("#jvd").prop("checked",getBool(d.jvd));$("#cap_refill").prop("checked",getBool(d.cap_refill));$("#skin").val(d.skin);$("#abctemp").val(d.abctemp);$("#dry").prop("checked",getBool(d.dry));$("#heart_tones").val(d.heart_tones);$("#heart_tones_quality").val(d.heart_tones_quality);$("#peripheral_edema").prop("checked",getBool(d.peripheral_edema));$("#peripheral_edema_location").val(d.peripheral_edema_location);$("#edema_severity").val(d.edema_severity)}reflect_lungs();reflectDB("#tracheal_deviation","#li_tracheal_deviation_side");reflectDB("#interventions","#ul_interventions");reflectDB("#cough","#li_productive");reflectDB("#flailed_chest","#li_flailed_chest_side");reflectDB("#peripheral_edema","#div_edema_details")})})}function saveNeuro(){var a=$("#avpu option:selected").val();var b=$("#gcs").prop("checked");var c=$("#eyes option:selected").val();var d=$("#verbal option:selected").val();var e=$("#motor option:selected").val();var f=$("#psm_lux").data("status");var g=$("#psm_rux").data("status");var h=$("#psm_llx").data("status");var i=$("#psm_rlx").data("status");var j=$("#suspect_stroke").prop("checked");var k=$("#facial_droop").prop("checked");var l=$("#facial_droop_side").prop("checked");var m=$("#arm_drift").prop("checked");var n=$("#arm_drift_side").prop("checked");var o=$("#speech option:selected").val();db.transaction(function(p){p.executeSql("UPDATE neuro SET assessed=?, avpu=?, gcs=?, eyes=?, verbal=?, motor=?, luxr=?, ruxr=?, llxr=?, rlxr=?, suspect_stroke=?, "+" facial_droop=?, facial_droop_side=?, arm_drift=?, arm_drift_side=?, speech=?, time=? WHERE patient=?;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadNeuro(){$("#neuro_psm li").data("status","negative");$("#facial_droop").prop("checked",false);$("#arm_drift").prop("checked",false);db.transaction(function(a){a.executeSql("SELECT * FROM neuro WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#avpu").val(d.avpu);$("#gcs").prop("checked",getBool(d.gcs));$("#eyes").val(d.eyes);$("#verbal").val(d.verbal);$("#motor").val(d.motor);calculateTotalNeuro();$("#psm_lux").data("status",d.luxr);$("#psm_rux").data("status",d.ruxr);$("#psm_llx").data("status",d.llxr);$("#psm_rlx").data("status",d.rlxr);$("#suspect_stroke").prop("checked",getBool(d.suspect_stroke));$("#facial_droop").prop("checked",getBool(d.facial_droop));$("#facial_droop_side").prop("checked",getBool(d.facial_droop_side));$("#arm_drift").prop("checked",getBool(d.arm_drift));$("#arm_drift_side").prop("checked",getBool(d.arm_drift_side));$("#speech").val(d.speech)}reflectGCS("#gcs","#li_gcs_related","#li_apgar_related");reflectDB("#facial_droop","#li_facial_droop_side");reflectDB("#arm_drift","#li_arm_drift_side");$("#neuro_psm li").each(function(a){if($(this).data("status")=="negative"){$(this).prop("class","")}else{$(this).prop("class","twoTap")}})})})}function EnableConditions(){for(var a=0;a<conditions.length;a++){var b=conditions[a];$("#condition_list:nth-child("+b+")").data("status","enabled");$("#condition_list:nth-child("+b+")").find(".enabler").prop("src","images/img/enabled.png")}}function patientConditionsList(){$("#condition_list li").each(function(a){if($(this).data("status")=="enabled"){var b=$(this).data("prefix");conditions.push(b+(a-2))}});fillConditionsList()}function changeConditionList(a){patientConditionsList();var b=$("#"+a.id+" option:selected").text();var c=$("#"+a.id+" option:selected").val();var d=b.substr(0,1);writeConditionList(c,b,d)}function fillConditionsList(){$("#patient_hx_conditions_list li:gt(1)").remove();for(var a=0;a<conditions.length;a++){var b=conditions[a];var c=b.substr(0,1);var d=b.substr(1,b.length);var e;if(c=="C")e=cvs;if(c=="R")e=resp;if(c=="G")e=gugi;if(c=="N")e=neuro;if(c=="E")e=endocrine;if(c=="P")e=psych;var f=$("#medicalCondition_template").clone();f.removeAttr("id");f.removeAttr("style");f.data("entryId",a);f.appendTo("#patient_hx_conditions_list");f.find(".hx_entry").text(e[d]);f.find(".delete").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");conditions.splice(c,1);b.slideUp();a.stopPropagation()});f.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()})}}function writeConditionList(a,b,c){var d;if(a=="0")d=cvs;if(a=="1")d=resp;if(a=="2")d=gugi;if(a=="3")d=neuro;if(a=="4")d=endocrine;if(a=="5")d=psych;$("#condition_list li:gt(1)").remove();for(var e=0;e<d.length;e++){var f=d[e];var g=$("#condition_template").clone();g.removeAttr("id");g.removeAttr("style");g.appendTo("#condition_list");g.data("status","disabled");g.data("group",b);g.data("prefix",c);g.find(".last_name").text(f);g.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.find(".unlock_line");if(b.data("status")=="enabled"){b.data("status","disabled");c.prop("src","images/img/disabled.png")}else{b.data("status","enabled");c.prop("src","images/img/enabled.png")}})}}function writeAllConditionsList(){$("condition_part").val("0");writeConditionList("0","CVS","C")}function fillAllergiesList(){$("#patient_hx_allergies_list li:gt(1)").remove();for(var a=0;a<allergies.length;a++){var b=allergies[a];var c=$("#allergies_template").clone();c.removeAttr("id");c.removeAttr("style");c.data("entryId",a);c.appendTo("#patient_hx_allergies_list");c.find(".hx_entry").text(listOfAllergies[b]);c.find(".delete").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");allergies.splice(b,1);b.slideUp();a.stopPropagation()});c.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()})}}function patientAllergiesList(){$("#allergies_list li").each(function(a){if($(this).data("status")=="enabled"){allergies.push(a-2)}});fillAllergiesList()}function writeAllAllergiesList(){$("#allergies_list li:gt(1)").remove();for(var a=0;a<listOfAllergies.length;a++){var b=listOfAllergies[a];var c=$("#allergy_template").clone();c.removeAttr("id");c.removeAttr("style");c.appendTo("#allergies_list");c.find(".last_name").text(b);c.data("status","disabled");c.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.find(".unlock_line");if(b.data("status")=="enabled"){b.data("status","disabled");c.prop("src","images/img/disabled.png")}else{b.data("status","enabled");c.prop("src","images/img/enabled.png")}})}}function fillMedicationsList(){$("#patient_hx_medication_list li:gt(1)").remove();for(var a=0;a<medications.length;a++){var b=medications[a];var c=$("#homeMedications_template").clone();c.removeAttr("id");c.removeAttr("style");c.data("entryId",a);c.appendTo("#patient_hx_medication_list");c.find(".hx_entry").text(medication_trade_alpha[convertToTradeNb(b)]+" ("+medication_generic_alpha[b]+")");c.find(".delete").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");medications.splice(c,1);b.slideUp();a.stopPropagation()});c.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.data("entryId");delete_show_hide(this);a.stopPropagation()})}}function convertToGenericNb(a){var b=["3","7","32","8","27","19","10","13","14","5","9","16","15","33","47","26","42","4","54","6","21","18","22","50","23","24","25","29","57","20","58","36","44","34","35","38","40","41","31","45","56","46","12","52","59","39","55","11","30","1","2","17","49","53","28","37","48","51","43"];return parseInt(b[a])-1}function convertToTradeNb(a){var b=["50","51","1","18","10","20","2","4","11","7","48","43","8","9","13","12","52","22","6","30","21","23","25","26","27","16","5","55","28","49","39","3","14","34","35","32","56","36","46","37","38","17","59","33","40","42","15","57","53","24","58","44","54","19","47","41","29","31","45"];return parseInt(b[a])-1}function patientMedicationsList(){$("#medication_list li").each(function(a){if($(this).data("status")=="enabled"){if($("#generic_trade").prop("checked")==true)medications.push(a-2);else medications.push(convertToGenericNb(a-2))}});fillMedicationsList()}function switchMedication(a){medication_list=[];if(a==false){medication_list=medication_generic_alpha}else{medication_list=medication_trade_alpha}for(var b=0;b<medication_list.length;b++){var c=medication_list[b];$("#medication_list > li").eq(b+2).find(".last_name").text(c)}}function writeAllMedicationsList(){$("#medication_list li:gt(1)").remove();for(var a=0;a<medication_generic_alpha.length;a++){var b=medication_generic_alpha[a];var c=$("#medication_template").clone();c.removeAttr("id");c.removeAttr("style");c.appendTo("#medication_list");c.find(".last_name").text(b);c.data("status","disabled");c.find(".unlock_line").bind("touchstart",function(a){var b=$(this).parent();var c=b.find(".unlock_line");if(b.data("status")=="enabled"){b.data("status","disabled");c.prop("src","images/img/disabled.png")}else{b.data("status","enabled");c.prop("src","images/img/enabled.png")}a.stopPropagation();a.preventDefault()})}switchMedication(false)}function savePatientHx(){var a=allergies.join(",");var b=medications.join(",");var c=conditions.join(",");var d=$("#pt_hx_allergies_other").val();var e=$("#pt_hx_conditions_other").val();var f=$("#pt_hx_medications_other").val();db.transaction(function(g){g.executeSql("UPDATE patient_hx SET assessed=?, allergies=?, custom_allergies= ?, conditions=?, custom_conditions= ?, "+" medications=?, custom_medications= ?, time=? WHERE patient = ? ;",["true",a,d,c,e,b,f,getSystemTime(),getCurrentPatientId()],null,errorHandler)})}function loadPatientHx(){showPatientPageWidget();conditions=[];medications=[];allergies=[];db.transaction(function(a){a.executeSql("SELECT * FROM patient_hx WHERE patient = ?;",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);if(d.conditions!="")conditions=d.conditions.split(",");if(d.medications!="")medications=d.medications.split(",");if(d.allergies!="")allergies=d.allergies.split(",");$("#pt_hx_allergies_other").val(d.custom_allergies);$("#pt_hx_conditions_other").val(d.custom_conditions);$("#pt_hx_medications_other").val(d.custom_medications)}fillAllergiesList();fillConditionsList();fillMedicationsList()},errorHandler)})}function saveChiefComplaint(){var a=$("#chief_complaint_1 option:selected").val();var b=$("#chief_complaint_1_other").val();var c=$("#chief_complaint_2").val();var d=$("#cc_diff_breathing").data("status");var e=$("#cc_chest_pain").data("status");var f=$("#cc_nausea").data("status");var g=$("#cc_vomiting").data("status");var h=$("#cc_diarrhea").data("status");var i=$("#cc_dizziness").data("status");var j=$("#cc_headache").data("status");var k=$("#cc_loc").data("status");var l=$("#cc_numb_tingling").data("status");var m=$("#cc_gal_weakness").data("status");var n=$("#cc_lethargy").data("status");var o=$("#cc_neck_pain").data("status");db.transaction(function(p){p.executeSql("UPDATE chief_complaint SET assessed=?, primary_complaint=?, primary_other=?, secondary_complaint=?, diff_breathing=?, chest_pain=?, nausea=?, "+" vomiting=?, diarrhea=?, dizziness=?, "+" headache=?, loc=?, numb_tingling=?, gal_weakness=?, lethargy=?, neck_pain=?, time=? WHERE patient = ? ;",["true",a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,getSystemTime(),getCurrentPatientId()],function(){jQT.goBack()},errorHandler)})}function loadChiefComplaint(){showPatientPageWidget();$("#chief_complaint_line1 li").data("status","");$("#chief_complaint_line2 li").data("status","");$("#chief_complaint_line3 li").data("status","");$("#chief_complaint_1").empty();$("#chief_complaint_1").append('<option value="0">Other</option>');reflect_select("#chief_complaint_1",0,"#li_primary_complaint_other");for(var a=0;a<complaints_list.length;a++){var b=complaints_list[a];$("#chief_complaint_1").append("<option value="+(a+1)+">"+b+"</option>")}$("#chief_complaint_1").val(0);colorChiefComplaintButtons();db.transaction(function(a){a.executeSql("SELECT * FROM chief_complaint WHERE patient=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#chief_complaint_1").val(d.primary_complaint);$("#chief_complaint_1_other").val(d.primary_other);$("#chief_complaint_2").val(d.secondary_complaint);$("#cc_diff_breathing").data("status",d.diff_breathing);$("#cc_chest_pain").data("status",d.chest_pain);$("#cc_nausea").data("status",d.nausea);$("#cc_vomiting").data("status",d.vomiting);$("#cc_diarrhea").data("status",d.diarrhea);$("#cc_dizziness").data("status",d.dizziness);$("#cc_headache").data("status",d.headache);$("#cc_loc").data("status",d.loc);$("#cc_numb_tingling").data("status",d.numb_tingling);$("#cc_gal_weakness").data("status",d.gal_weakness);$("#cc_lethargy").data("status",d.lethargy);$("#cc_neck_pain").data("status",d.neck_pain);colorChiefComplaintButtons()}reflect_select("#chief_complaint_1",0,"#li_primary_complaint_other")})})}function drawCharts(){var a=[],b=[],c=[],d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[];db.transaction(function(q){q.executeSql("SELECT * FROM vitals WHERE patient=? ORDER BY CAST(time AS INT);",[getCurrentPatientId()],function(q,r){for(var s=0;s<r.rows.length;s++){var t=r.rows.item(s);a.push(getFormatedTime(t.time));b.push(t.hr);c.push(t.sys);d.push(t.dia);e.push(t.fio2);f.push(t.spo2);g.push(t.resp);h.push(t.level_of_c);i.push(t.left_eye);j.push(t.right_eye);k.push(t.bgl);l.push(t.bgl_unit);m.push(t.etco2);n.push(t.temp);o.push(t.temp_unit);p.push(t.pain)}$("#holder").empty();$("#holder2").empty();$("#holder").css("background","black");$("#holder2").css("background","black");if(isIpad())$("#holder").css("height","370px");if(isIphone()||isIpod())$("#holder").css("height","210px");$("#holder2").css("height","600px");drawVitals("holder",a,[b,c,d,e,f,g,h,i,j,k,m,n,p],l,o);drawVitals("holder2",a,[b,c,d,e,f,g,h,i,j,k,m,n,p],l,o)})})}function saveVitals(){var a=$("#hr").val();var b=$("#sys").val();var c=$("#dia").val();var d=$("#fio2").val();var e=$("#spo2").val();var f=$("#resp").val();var g=$("#level_of_c option:selected").val();var h=$("#left_eye").val();var i=$("#right_eye").val();var j=$("#perrl").prop("checked");var k=$("#eye_response").prop("checked");var l=$("#bgl").val();var m=$("#bgl_unit").prop("checked");var n=$("#temp").val();var o=$("#temp_unit").prop("checked");var p=$("#etco2").val();var q=$("#pain").val();var r=$("#vitals_time").val();var s=Date.parse(r);if(j==true)i=h;if(getCurrentRecord()=="0"){db.transaction(function(r){r.executeSql("INSERT INTO vitals (patient, hr, sys, dia, fio2, spo2, resp, level_of_c, left_eye, right_eye, perrl, responsive, bgl, bgl_unit, temp, temp_unit, etco2, pain, time) "+" VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[getCurrentPatientId(),a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s],function(){jQT.goBack()},errorHandler)})}else{db.transaction(function(r){r.executeSql("UPDATE vitals SET hr = ?, sys = ?, dia = ?, fio2=?, spo2 = ?, resp = ?, level_of_c = ?, left_eye = ?, right_eye = ?, "+"perrl = ?, responsive = ?, bgl = ?, bgl_unit = ?, temp = ?, temp_unit = ?, etco2 = ?, pain = ?, time = ? WHERE id = ? ;",[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,getCurrentRecord()],function(){jQT.goBack()},errorHandler)})}return false}function loadVitals(){ClearAllFields();$("#perrl").prop("checked",true);$("#temp_unit").prop("checked",false);$("#vitals_time").val(getFormatedDate(getSystemTime()));if(getCurrentRecord()!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM vitals WHERE patient=? AND id = ?",[getCurrentPatientId(),getCurrentRecord()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#hr").val(d.hr);$("#sys").val(d.sys);$("#dia").val(d.dia);$("#fio2").val(d.fio2);$("#spo2").val(d.spo2);$("#resp").val(d.resp);$("#level_of_c").val(d.level_of_c);$("#left_eye").val(d.left_eye);$("#right_eye").val(d.right_eye);$("#perrl").prop("checked",getBool(d.perrl));$("#eye_response").prop("checked",getBool(d.responsive));$("#bgl").val(d.bgl);$("#bgl_unit").prop("checked",getBool(d.bgl_unit));$("#temp").val(d.temp);$("#temp_unit").prop("checked",getBool(d.temp_unit));$("#etco2").val(d.etco2);$("#pain").val(d.pain);$("#vitals_time").val(getFormatedDate(d.time));setMobiscroll(d.time,"#vitals_time")}reflect_perrl()})})}reflect_perrl()}function getFullFormatedTime(a){dateObj=new Date;dateObj.setTime(a);var b=new Array(12);b[0]="January";b[1]="February";b[2]="March";b[3]="April";b[4]="May";b[5]="June";b[6]="July";b[7]="August";b[8]="September";b[9]="October";b[10]="November";b[11]="December";var c=dateObj.getMonth();var d=dateObj.getDate();var e=dateObj.getFullYear();var f=dateObj.getHours();var g=dateObj.getMinutes();var h=dateObj.getSeconds();if(f<"10")f="0"+f;if(g<"10")g="0"+g;if(h<"10")h="0"+h;var i=f+":"+g+":"+h+"  "+b[c]+" "+d+" "+e;return i}function getFormatedPreciseTime(a){dateObj=new Date;dateObj.setTime(a);var b=dateObj.getHours();var c=dateObj.getMinutes();var d=dateObj.getSeconds();if(b<"10")b="0"+b;if(c<"10")c="0"+c;if(d<"10")d="0"+d;var e=b+":"+c+":"+d;return e}function getFormatedTime(a){dateObj=new Date;dateObj.setTime(a);var b=dateObj.getHours();var c=dateObj.getMinutes();var d=dateObj.getSeconds();if(b<"10")b="0"+b;if(c<"10")c="0"+c;var e=b+":"+c;return e}function getFormatedDay(a){dateObj=new Date;dateObj.setTime(a);var b=new Array(12);b[0]="January";b[1]="February";b[2]="March";b[3]="April";b[4]="May";b[5]="June";b[6]="July";b[7]="August";b[8]="September";b[9]="October";b[10]="November";b[11]="December";var c=dateObj.getMonth();var d=dateObj.getDate();var e=dateObj.getFullYear();var f=b[c]+" "+d+" "+e;return f}function getFormatedDate(a){dateObj=new Date;dateObj.setTime(a);var b=new Array(12);b[0]="January";b[1]="February";b[2]="March";b[3]="April";b[4]="May";b[5]="June";b[6]="July";b[7]="August";b[8]="September";b[9]="October";b[10]="November";b[11]="December";var c=dateObj.getMonth();var d=dateObj.getDate();var e=dateObj.getFullYear();var f=dateObj.getHours();var g=dateObj.getMinutes();var h=dateObj.getSeconds();if(f<"10")f="0"+f;if(g<"10")g="0"+g;if(h<"10")h="0"+h;var i=b[c]+" "+d+" "+e+" "+f+":"+g+":"+h;return i}function loadVitalsList(){loadRecordsList("#vitals_sorted","vitals","#vitalsTemplate",".vitals_time","#vitals")}function setCurrentPatientId(a){sessionStorage.currentPatientId=a}function getCurrentPatientId(){return sessionStorage.currentPatientId}function calculateAvailablePatientNumber(){var a;db.transaction(function(b){b.executeSql("SELECT MAX(id) as max_id FROM patients",null,function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);a=e.max_id+1}setAvailablePatientId(a)})})}function showHideGCS(){var a="";db.transaction(function(b){b.executeSql("SELECT * FROM patients WHERE id = ? ;",[getCurrentPatientId()],function(b,c){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);a=e.date_of_birth}var f=getSystemTime()-a;var g=true;if(f<=864e5)g=false;db.transaction(function(a){a.executeSql("UPDATE neuro SET gcs=? WHERE patient=?;",[g,getCurrentPatientId()],null,errorHandler)})},errorHandler)})}function toUpperFirst(a){var b=a.substring(0,1);var c=a.substring(1);return b.toUpperCase()+c}function savePatientInfo(){var a=toUpperFirst($("#last_name").val());var b=toUpperFirst($("#first_name").val());var c=$("#get_DOB").prop("checked");var d=$("#date_of_birth").val();var e=$("#gender").prop("checked");var f=$("#weight").val();var g=$("#weight_unit").prop("checked");var h=$("#street").val();var i=$("#city").val();var j=$("#province").val();var k=$("#patient_contact_checkbox").prop("checked");var l=$("#home_phone").val();var m=$("#work_phone").val();var n=$("#cell_phone").val();var o=$("#message_phone").val();var p=$("#insurance").val();var q=$("#mrn").val();var r=$("#next_of_kin").val();var s=$("#next_of_kin_phone").val();var t=$("#pt_number").val();var u=$("#of_number").val();var v;if(c==true){v=Date.parse(d)}else v="0";if(sessionStorage.currentPatientId=="0"){_uuid=UUID.generate();db.transaction(function(d){d.executeSql("INSERT INTO patients (id, last_name, first_name, get_DOB, date_of_birth, gender, weight, weight_unit, street, city, "+" province, contact, phone_home, phone_work, phone_cell, phone_message, insurance, mrn, next_of_kin, nok_phone, pt_number, "+" of_number, time) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);",[_uuid,a,b,c,v,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,getSystemTime()],function(){setCurrentPatientId(_uuid);createDummyEntries();var c=a+", "+b;$("#widgetPatientName").html(c);calculatePatients();showHideGCS();jQT.goBack()},errorHandler)})}else{db.transaction(function(d){d.executeSql("UPDATE patients SET last_name = ? , first_name = ? ,get_DOB = ?, date_of_birth = ? , gender = ? , weight = ? , weight_unit = ?, "+"street = ?, city = ?, province = ?, contact=?, phone_home = ?, phone_work = ?, phone_cell = ?, phone_message = ?, insurance = ?, mrn = ?, next_of_kin = ?, nok_phone = ?, pt_number = ?, of_number = ?, "+"time = ? WHERE id = ? ;",[a,b,c,v,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,getSystemTime(),getCurrentPatientId()],function(){var c=a+", "+b;$("#patient h1").text(c);$("#widgetPatientName").html(c);showHideGCS();jQT.goBack()},null,errorHandler)})}}function loadPatientInfo(){$("#patient_contact_checkbox").prop("checked",false);$("#weight_unit").prop("checked",false);$("#date_of_birth").val(getFormatedDay(getSystemTime()));if(sessionStorage.currentPatientId!="0"){db.transaction(function(a){a.executeSql("SELECT * FROM patients WHERE id=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#last_name").val(d.last_name);$("#first_name").val(d.first_name);$("#get_DOB").prop("checked",getBool(d.get_DOB));$("#date_of_birth").val(getFormatedDay(d.date_of_birth));$("#gender").prop("checked",getBool(d.gender));$("#weight").val(d.weight);$("#weight_unit").prop("checked",getBool(d.weight_unit));$("#street").val(d.street);$("#city").val(d.city);$("#province").val(d.province);$("#patient_contact_checkbox").prop("checked",getBool(d.contact));$("#home_phone").val(d.phone_home);$("#work_phone").val(d.phone_work);$("#cell_phone").val(d.phone_cell);$("#message_phone").val(d.phone_message);$("#insurance").val(d.insurance);$("#mrn").val(d.mrn);$("#next_of_kin").val(d.next_of_kin);$("#next_of_kin_phone").val(d.nok_phone);$("#pt_number").val(d.pt_number);$("#of_number").val(d.of_number);setMobiscroll(d.time,"#date_of_birth")}reflectDB("#get_DOB","#li_date_of_birth");reflectDB("#patient_contact_checkbox","#div_patient_contact")})});showPatientPageWidget()}reflectDB("#patient_contact_checkbox","#div_patient_contact");setTimeout("calculateAge()",1e3)}function ClearAllFields(){$('ul li input[type="text"]').val("");$('ul li input[type="tel"]').val("");$('ul li input[type="email"]').val("");$('ul li input[type="number"]').val("");$('ul li input[type="checkbox"]').prop("checked",true);$("ul li select").val("0");$("textarea").val("");$("#patientAge").html("");$("#code_list ul.basic").show()}function loadPatient(){hidePatientPageWidget();ClearAllFields();if(sessionStorage.currentPatientId=="0"){$("#patient h1").text("New Patient");$("#patientPage li").hide();$("#codeButton").hide();$("#patientInfoLink").show()}else{db.transaction(function(a){a.executeSql("SELECT * FROM patients WHERE id=?",[getCurrentPatientId()],function(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);$("#patient h1").text(d.last_name+", "+d.first_name);$("#widgetPatientName").html(d.last_name+", "+d.first_name);$("#patientPage li").show();$("#codeButton").show()}getAPGARtotals();showHideGCS()})})}}function hidePatientPageWidget(){if(isIpad()==true)$("#patientPageSide").hide()}function showPatientPageWidget(){if(isIpad()==true)$("#patientPageSide").show()}function resetCurrentPatient(){hidePatientPageWidget();sessionStorage.currentPatientId="0";loadPatient()}function onTheSide(a,b){$(a).removeClass("current");$(a).prop("section","");$(b).addClass("current");$(b).prop("section","aside")}function calculatePatients(){db.transaction(function(a){a.executeSql("SELECT * FROM patients",[],function(a,b){var c=0;for(var d=0;d<b.rows.length;d++){c++}$("#patientscounter").text(c)})})}function showChangePIN(){if(localStorage.currentPIN=="0000")$("#defaultPIN").show();$("#divEnterPIN").hide();$("#enter_link").prop("checked","");$("#divChangePIN").show();$("#change_link").prop("checked","checked")}function showEnterPIN(){$("#divEnterPIN").show();$("#enter_link").prop("checked","checked");$("#divChangePIN").hide();$("#change_link").prop("checked","")}function resetPIN(){oldPIN=$("#old_pin").val();newPIN=$("#new_pin").val();confirmPIN=$("#confirm_pin").val();realPIN=localStorage.currentPIN;if(oldPIN==realPIN&&newPIN==confirmPIN){localStorage.currentPIN=newPIN;localStorage.setPIN="set";document.getElementById("lockpad").src="images/img/padlock-icon.gif";setTimeout(function(){$("#homeMenu").show();if(isIpad()==true)jQT.goTo("#about","pop");jQT.goTo("#home","pop")},1e3)}else{if(oldPIN!=realPIN){$("#old_pin").val("");$("#wrongPINchange").slideDown()}if(newPIN!=confirmPIN){$("#new_pin").val("");$("#confirm_pin").val("");$("#wrongPINconfirm").slideDown()}}}function validPIN(){enteredPIN=$("#pin").val();realPIN=localStorage.currentPIN;if(enteredPIN==realPIN){document.getElementById("lockpad").src="images/img/padlock-icon.gif";setTimeout(function(){$("#homeMenu").show();if(isIpad()==true)jQT.goTo("#about","pop");jQT.goTo("#home","pop")},1e3)}else{$("#pin").val("");$("#wrongPINenter").slideDown()}}function setPIN(){if(localStorage.setPIN!="set"){localStorage.currentPIN="0000";localStorage.employee_position="0";showChangePIN()}}function rebindClicks(){var a="ontouchstart"in window;if(!a){alert("On n'est ni sur iphone ni ipad ni ipod");$("[ontouchend]").each(function(){var a=$(this).prop("ontouchend");$(this).removeAttr("ontouchend");$(this).bind("click",a)})}}function isIpod(){var a=navigator.userAgent;var b=a.indexOf("iPod")!=-1?true:false;return b}function isIphone(){var a=navigator.userAgent;var b=a.indexOf("iPhone")!=-1?true:false;return b}function isIpad(){var a=navigator.userAgent;var b=a.indexOf("iPad")!=-1?true:false;return b}function UpdateDatabase(){localStorage.frequent_partners="";alert("The database needs to be updated, it could take up to one minute");$("body").append('<div id="progress">DB updating, please wait...</div>');exportPatients("");setTimeout(function(){dropPCRtables()},2e4);setTimeout(function(){createNewPCRtables()},3e4);setTimeout(function(){InsertPatients()},4e4);setTimeout(function(){$("#progress").remove();alert("Database has been updated")},5e4)}function setVersion(){if(localStorage.currentVersion!=release&&localStorage.currentVersion!="1.0.5"){UpdateDatabase()}localStorage.currentVersion=release}function createDB(){createPCRtables(db);sessionStorage.clear();calculatePatients()}var jQT=$.jQTouch({icon:"epcr2.png",statusBar:"black",preloadImages:["themes/jqt/img/back_button_clicked.png","themes/jqt/img/button_clicked.png"]});var release="1.0.6";var moved;var db;var cpr_counter=0;var time;var timer_is_on=false;var pictureSource;var currentPicture;var pictureSuccess=false;var destinationType;var canvasWidth=290;var canvasHeight=100;var context;var signaturePath="";var practitionerSignaturePath="";var patientSignaturePath="";var hospReprSignaturePath="";var witnessSignaturePath="";var currentSig;var bodyType="adult";var complaints_list=["Abdominal Pain","Angina","Angina (Unstable)","Angina (Stable)","Alcohol With-drawl","Allergic Reaction","Altered mental Status","Anaphylaxis","Bradycardia","Burn","Cardiac Arrest","Cerebrovascular Accident (CVA)","Chest Pain (Cardiac)","Chest Pain (Non-Cardiac)","Chest Pain Not Yet Diagnosed","Child Delivery","Croup","Death","Dehydration","Ectopic Pregnancy","Epidural Bleed","Epiglottitis","Food Poisoning","Hypertensive Crisis","Hypertensive Emergency","Hyperthermia","Hypoglycemia","Hypotension","Hypothermia","Labor","Major Trauma","Musculoskeletal Trauma","Nausea","Near Drowning","Obstructed Airway","Overdose","Palpitations","Pelvic Pain","Poisoning","Pregnancy Complications","Psychiatric Emergency","Rape","Respiratory Arrest","Seizure","Sexual Abuse","Shock","Sickle Cell Crisis","SIDS","Smoke Inhalation","Spinal Cord Injury","Subdural Bleed","Syncope","Tachycardia","Transient Ischemic Attacks (TIA)","Unconscious/Unknown","Vaginal Bleeding","Vomiting"];var listOfAllergies=["Anticonvulsants","Aspirin","Ibuprofen","Iodine","Insulin","IV contrast dye","Lidocaine","Naproxen","Novocaine","Penicillin","Sulfa drugs","NKDA","NKDA per staff","NKDA per parent/guardian"];var cvs=["A-Fib","A-Flutter","Acute Coronary Syndrome (ACS)","Acute Myocardial Infarction (AMI)","Angina ","Angina (Unstable)","Aortic Dissection","Aortic Stenosis","Ascites","Atherosclerosis","Atrial Tach","Cardiac Arrhythmia","Cardiomegaly (enlarged heart)","Congenital heart disease","Congestive Heart Failure (CHF)","Coronary Artery Disease (CAD)","Deep Vein Thrombosis","Dyslipidemia","Endocarditis","Heart Failure (Left)","Heart Failure (Right)","Heart Murmur","Hyperlipidemia","Hypertension (HTN)","Left Ventricular Hypertrophy (LVH)","Mitral Valve Prolapse","Myocarditis","Pacemaker (AV)","Pacemaker (Ventricular)","Pacemaker (Wandering Atrial)","Palpitations","Parox Suprav Tachy (PSVT)","Pericardial Effusion","Pericardial Tamponade","Pericarditis","Peripheral Vascular Disease","PVCs","Rheumatic Heart Disease","V-Tach","Valvular heart disease"];var resp=["Asthma","Bronchitis","Chron Obstr Pulmon Dis (COPD)","Chronic Cough","Cold","Croup","Cystic Fibrosis","Emphysema","H1N1","Hantavirus","Influenza/Flu","Lung Cancer","Pleurisy","Pneumonia","Pneumothorax","Pulmonary Embolus","Pulmonary Fibrosis","Respir Distress Syndrome (RDS)","Respiratory Syncytial Virus (RSV)","Sarcoidosis","Sleep Apnea","Sudden Infant Death Syn (SIDS)","Swine Flu","Tobacco Use (Current)","Tobacco Use (Hx)","Tuberculosis (TB)"];var gugi=["Abdominal Adhesions","Acid Reflux","Appendectomy","Appendicitis","Autosom Dom Polycys Kidney Dis","Bacterial Vaginosis","Barrett's Esophagus","Benign Prost Hypertrophy/plasia","Bladder Infection","Bowel Incontinence","Celiac Disease","Chancroid","Chlamydia","Cholecystect (Gallbladder Rem)","Chronic Kidney Disease","Cirrhosis","Colon Polyps","Constipation","Crohn's Disease","Cystic Kidney Disease","Cystitis","Diarrhea","Diverticulosis / Diverticulitis","Duodenal Ulcer","Ectopic Kidney","Emodialysis","End Stage Renal Disease","Erectile Dysfunction (ED)","Fallen Bladder","Food Poisoning","Gallstones","Gastritis","Gastroesoph Refl Dis (GERD)","Genital Herpes","Genital Warts","Gonorrhoea","Goodpasture's Syndrome","Heartburn","Hematuria / Blood in Urine","Hemorrhoids","Hepatitis A","Hepatitis B","Hepatitis C","Hernia","Hiatal Hernia","Hypertension","Ileostomy / Colostomy","Inflammatory Bowel Disease","Inguinal Hernia","Irritable Bowel Syndrome","Lactose Intolerance","Nephrotic Syndrome","Painful Bladder Syndrome","Pancreatitis","Pelvic Inflammatory Disease (PID)","Polycystic Kidney Disease (PKD)","Proctitis","Prostate Cancer","Proteinuria","Pubic Lice (Crabs)","Pyelonephritis (Ren/Kidn Inf)","Renal / Kidney Cysts","Renal / Kidney Failure","Renal / Kidney Stones","Renal / Kidney Transplant","Renal Artery Stenosis (RAS)","Renal Dysplasia","Renal Tubular Acidosis (RTA)","Scabies","Stomach Flu","Stomach Ulcers","Syphillis","Thrush (Candiada)","Trichomoniasis","Ulcer","Urethritis","Urinary Incontinence","Urinary Retention","Urinary Tract Infection (UTI)","Whipple's Disease","Wilson's Disease"];var neuro=["Acute Dissem encephalomy","Agnosia","Alternating hemiplegia","Alzheimer's disease","Anoxia","Aphasia","Apraxia","Arachnoid cysts","Arachnoiditis","Arteriovenous malformation","Atten Deficit Hyperactiv Dis","Auditory processing disorder","Autonomic Dysfunction","Back Pain","Bell's palsy","Benign Intracranial Hypertension","Brachial plexus injury","Brain abscess","Brain damage","Brain injury","Brain tumor","Brown-Sequard syndrome","Carpal tunnel syndrome","Central pain syndrome","Central pontine myelinolysis","Centronuclear myopathy","Cephalic disorder","Cerebral aneurysm","Cerebral arteriosclerosis","Cerebral atrophy","Cerebral gigantism","Cerebral palsy","Cerebral vasculitis","Cervical spinal stenosis","Chorea","Chronic fatigue syndrome","Chron inflam demy polyneuro","Chronic pain","Coma","Compression neuropathy","Corticobasal degeneration","Cranial arteritis","Creutzfeldt-Jakob disease","Cushing's syndrome","Dementia","Dermatomyositis","Developmental dyspraxia","Diabetic neuropathy","Diffuse sclerosis","Dyslexia","Dystonia","Encephalitis","Epilepsy","Erythromelalgia","Essential tremor","Fainting","Febrile seizures","Fibromyalgia","Gray matter heterotopia","Head injury","Headache","Herpes zoster oticus","Herpes zoster","Huntington's disease","Hydranencephaly","Hydrocephalus","Hypoxia","Immune-Mediated encephalomye","Infantile spasms","Inflammatory myopathy","Intracranial cyst","Intracranial hypertension","Learning disabilities","Locked-In syndrome","Lou Gehrig's dis (Motor Neur Dis)","Lumbar disc disease","Lumbar spinal stenosis","Lyme dis-Neurological Sequelae","Menieres disease","Meningitis","Menkes disease","Microcephaly","Micropsia","Migraine","Mini-stroke (trans isch att)","Mitochondrial myopathy","Mobius syndrome","Monomelic amyotrophy","Motor Neurone Disease","Motor skills disorder","Multi-infarct dementia","Multifocal motor neuropathy","Multiple sclerosis","Multiple system atrophy","Muscular dystrophy","Myasthenia gravis","Myelinoclastic diffuse sclerosis","Myoclonic Encephalopathy","Myoclonus","Myopathy","Narcolepsy","Neuroleptic malignant syndrome","Neuromyotonia","Nonverbal learning disorder","Occipital Neuralgia","Optic neuritis","Orthostatic Hypotension","Palinopsia","Paresthesia","Parkinson's disease","Peripheral neuropathy","Persistent Vegetative State","Pervasive developmental disorders","Photic sneeze reflex","Pinched nerve","Pituitary tumors","PMG","Polio","Polymicrogyria","Polymyositis","Porencephaly","Post-Polio syndrome","Postherpetic Neuralgia (PHN)","Postinfectious Encephalomyelitis","Postural Hypotension","Primary Lateral Sclerosis","Rabies","Reflex neurovascular dystrophy","Repetitive motion disorders","Repetitive stress injury","Restless legs syndrome","Rhythmic Movement Disorder","Sandhoff disease","Schizophrenia","Septo-optic dysplasia","Shaken baby syndrome","Shingles","Sleep apnea","Sleeping sickness","Spina bifida","Spinal cord injury","Spinal cord tumors","Spinal muscular atrophy","Spinocerebellar ataxia","Stroke","Syncope","Synesthesia","Tarsal tunnel syndrome","Temporal arteritis","Tetanus","Tourette syndrome","Toxic encephalopathy","Transient ischemic attack","Transverse myelitis","Traumatic brain injury","Tremor","Whiplash","Wilson's disease"];var endocrine=["Acromegaly / Gigantism","Addison's disease","Adrenal insufficiency","Adrenocortical carcinoma","Amenorrhea","Androgen insensitivity syndromes","Carcinoid syndrome","Conn's syndrome","Cushing's disease","Cushing's syndrome","Delayed puberty","Diabetes insipidus","Diabetes","Gender identity disorder","Gestational Diabetes","Glucagonoma","Goitre","Gonadal dysgenesis","Graves-Basedow disease","Hashimoto's thyroiditis","Hermaphroditism","Hyperthyroidism","Hypoglycemia","Hypogonadism (Gonadotropin def)","Hypoparathyroidism","Hypopituitarism","Hypothyroidism","Mature Onset Diab of Y (MODY)","Mineralocorticoid deficiency","Multiple endocrine neoplasia","Osteitis deform (Paget bone Dis)","Osteoporosis","Ovarian failure (Premature Menop)","Pituitary adenomas","Pituitary tumors","Polycystic ovary syndrome","Precocious puberty","Primary hyperparathyroidism","Prolactinoma","Pseudohypoparathyroidism","Rickets and osteomalacia","Secondary hyperparathyroidism","Tertiary hyperparathyroidism","Testicular failure","Thyroid cancer","Thyroidectomy","Thyroiditis","Toxic multinodular goitre","Type 1 Diabetes mellitus","Type 2 Diabetes mellitus"];var psych=["Acute stress disorder","Adjustment disorder","Amnesia","Anorexia nervosa","Antisocial personality disorder","Anxiety disorder","Asperger syndrome","Attention deficit disorder","Autism","Autophagia","Avoidant personality disorder","Bereavement","Binge eating disorder","Bipolar disorder","Borderline personality disorder","Bulimia nervosa","Cyclothymia","Delirium","Delusional disorder","Dementia","Dependent personality disorder","Depression","Dissociative identity disorder","Down syndrome","Dyslexia","Dyspraxia","Exhibitionism","Gender identity disorder","Generalized anxiety disorder","Hyperactivity disorder","Hyperkinetic syndrome","Hypochondriasis","Hysteria","Kleptomania","Mania","Munchausen syndrome","Narcissistic personality disorder","Narcolepsy","Nightmares","Obsessive-compuls perso dis","Obsessive-compulsive disorder","Pain disorder","Panic attacks","Paranoid personality disorder","Parasomnia","Pathological gambling","Perfectionism","Pervasive developmental disorder","Post-traumatic stress disorder","Postpartum Depression","Primary hypersomnia","Primary insomnia","Psychotic disorder","Pyromania","Rumination syndrome","Sadism and masochism","Schizoid","Schizophrenia","Seasonal affective disorder","Self Injury","Separation anxiety disorder","Sleep disorder","Sleep terror disorder","Sleepwalking disorder","Social anxiety disorder","Stuttering","Suicide","Tourette syndrome"];var medication_trade_alpha=["Adenocard","Aspirin","Ativan","Atropine","Atrovent","Benadryl","Betaject","Calciject, CaCl","Calcium Gluconate","Codarone","Cogentin","D50W","Decadron","Demerol","Dilantin","Dopamine","Entonox","Epinephrine","Fentanyl","Flumazenil","Glucagon","Gravol","Haldol","Hemabate","Heparin","Hydrocortisone","Indomethacin PR","Ketamine","Labetalol","Lasix","Lidocaine","Magnesium Sulfate","Mannitol","Maxeran","Metolprolol","Morphine","Narcan","Nitroglycerine, GTN, NTG","Norepinephrine","Oxygene","Oxytocin","Pantoloc","Pulmicort","Reteplase","Rocuronium","Sodium Bicarbonate","Succinycholine","Thiamine","Toradol","Tylenol","Tylenol","Valium","Vasopressin","Ventolin","Verapamil","Versed","Vitamin K","Zantac","Zyprexa"];var medication_generic_alpha=["Acetamin. w codeine","Acetaminophen","Adenosine","Adrenalin","Amiodarone","Anexate","ASA","Atropine Sulfate","Benztropine","Betamethasone","Betaxin","Budesonide","Calcium Chloride","Calcium Gluconate","Dexamethasone","Dextrose","Diazepam","Dimenhydrinate","Diphenhydramine","Furosemide","Glucagon","Haloperidol","Heparin, Carboprost Tromethamine","Hydrocort","Indocid","Intropin","Ipatroprium Br.","Isoptine, Calan","Ketalar","Keterolac","Levophed","Lorazepam","Meperidine","Metoclopramide, Reglan","Metoprolol","MgSO4","Midazolam","Morphine Sulfate","NaHCO3","Naloxone","Nitroglycerine, GTN, NTG","Nitrous Oxide","Olanzepine","Osmitrol","Oxygene","Pantoprazole","Phenytoin","Phytonadione","Pressyn","Prostaglandin","Ranitidine","Retevase","Salbutemol","Sublimaze","Suxamethonium Cl","Syntocinon","Trandate","Xylocard,Xylocaine","Zemuron"];var conditions=[];var medications=[];var allergies=[];var listMuscular=[];var enteringHx=true;var APGAR_min1=true;var shortName="ePCR";var version="1.0";var displayName="ePCR";var maxSize=65536;db=openDatabase(shortName,version,displayName,maxSize);createDB();$(document).ready(function(){function b(){$("#jqt").children().each(function(b,c){$(c).find(".s-scrollwrapper, .s-innerscrollwrapper").each(function(a,b){var c=$(b);var d=c.data(KEY_ISCROLL_OBJ);if(d===undefined||d===null){var e;var f={};e=new iScroll(b,f);c.data(KEY_ISCROLL_OBJ,e);e.refresh()}});$(c).bind("pageAnimationEnd",function(b,c){if(c.direction=="in"){a($(this))}})});$(window).resize(function(){$("#jqt > .current").each(function(b,c){a($(c))})})}function a(a){a.find(".s-scrollwrapper, .s-innerscrollwrapper").each(function(a,b){var c=$(b);var d=c.data(KEY_ISCROLL_OBJ);if(d!==undefined&&d!==null){d.refresh()}})}KEY_ISCROLL_OBJ="iscroll_object";b();$("#home").bind("pageAnimationStart",resetCurrentPatient);$("#patient").bind("pageAnimationStart",loadPatient);$("#patient_info").bind("pageAnimationStart",loadPatientInfo);$("#patient_info").submit(savePatientInfo);$("#date_of_birth").change(calculateAge);$("#vitals_list").bind("pageAnimationStart",loadVitalsList);$("#chart").bind("pagein",drawCharts);$("#vitals").bind("pageAnimationStart",loadVitals);$("#vitals").submit(saveVitals);$("#chief_complaint").bind("pageAnimationStart",loadChiefComplaint);$("#chief_complaint").submit(saveChiefComplaint);$("#patient_hx").bind("pagein",loadPatientHx);$("#patient_hx_allergies").bind("pagein",writeAllAllergiesList);$("#patient_hx_medication").bind("pagein",writeAllMedicationsList);$("#patient_hx_condition").bind("pagein",writeAllConditionsList);$("#exam").bind("pageAnimationStart",showPatientPageWidget);$("#neuro").bind("pageAnimationStart",loadNeuro);$("#neuro").submit(saveNeuro);$("#abcs").bind("pageAnimationStart",loadAbc);$("#abcs").submit(saveAbc);$("#trauma").bind("pageAnimationStart",loadTrauma);$("#auto").bind("pageAnimationStart",loadAuto);$("#auto").submit(saveAuto);$("#penetrating").bind("pageAnimationStart",loadPenetrating);$("#penetrating").submit(savePenetrating);$("#blunt").bind("pageAnimationStart",loadBlunt);$("#blunt").submit(saveBlunt);$("#fall").bind("pageAnimationStart",loadFalls);$("#fall").submit(saveFalls);$("#burn").bind("pageAnimationStart",loadBurn);$("#burn").submit(saveBurn);$("#gi_gu").bind("pageAnimationStart",loadGIGU);$("#gi_gu").submit(saveGIGU);$("#field_delivery").bind("pageAnimationStart",loadFieldDelivery);$("#field_delivery").submit(saveFieldDelivery);$("#apgar").submit(saveApgar);$("#muscular_skeletal").bind("pageAnimationStart",loadMuscularSkeletal);$("#muscular_skeletal").submit(saveMuscularSkeletal);$("#procedures").bind("pageAnimationStart",showPatientPageWidget);$("#airway_list").bind("pageAnimationStart",loadAirwayList);$("#airwayProcedure").bind("pageAnimationStart",loadAirway);$("#airwayProcedure").submit(saveAirway);$("#invasive_airway").bind("pageAnimationStart",loadInvasiveAirway);$("#invasive_airway").submit(saveInvasiveAirway);$("#ventilator_list").bind("pageAnimationStart",loadVentilatorList);$("#vent").bind("pageAnimationStart",loadVentilator);$("#vent").submit(saveVentilator);$("#cpap_bipap_list").bind("pageAnimationStart",loadCPAPBiPAPList);$("#cpap_bipap").bind("pageAnimationStart",loadCPAP_BiPAP);$("#cpap_bipap").submit(saveCPAP_BiPAP);$("#suction_list").bind("pageAnimationStart",loadSuctionList);$("#suction").bind("pageAnimationStart",loadSuction);$("#suction").submit(saveSuction);$("#iv_io_list").bind("pageAnimationStart",loadIV_IOList);$("#iv_io").bind("pageAnimationStart",loadIV_IO);$("#iv_io").submit(saveIV_IO);$("#splinting_list").bind("pageAnimationStart",loadSplintingList);$("#splinting").bind("pageAnimationStart",loadSplinting);$("#splinting").submit(saveSplinting);$("#medication_proc_list").bind("pageAnimationStart",loadMedicationList);$("#medication").bind("pageAnimationStart",loadMedication);$("#medication").submit(saveMedication);$("#c_spine").bind("pageAnimationStart",loadCSpine);$("#c_spine").submit(saveCSpine);$("#in_out_list").bind("pageAnimationStart",loadInOutList);$("#in_out").bind("pageAnimationStart",loadInOut);$("#in_out").submit(saveInOut);$("#ecg_list").bind("pageAnimationStart",loadECGList);$("#ecg").bind("pageAnimationStart",loadECG);$("#ecg").submit(saveECG);$("#signatures").bind("pageAnimationStart",loadSignatures);$("#signatures").submit(saveSignatures);$("#call_info").bind("pageAnimationStart",loadCallInfo);$("#call_info").submit(saveCallInfo);$("#no_transport").bind("pageAnimationStart",loadNoTransport);$("#no_transport").submit(saveNoTransport);$("#narrative_list").bind("pageAnimationStart",loadNarrativeList);$("#narrative").bind("pageAnimationStart",loadNarrative);$("#narrative").submit(saveNarrative);$("#exam").bind("pageAnimationStart",showPatientPageWidget);$("#export").bind("pageAnimationStart",showPatientPageWidget);$("#export").submit(processExport);$("#export_page").bind("pagein",writeExportMessage);$("#export_page").bind("pageAnimationStart",writeExportPage);$("#patients_list").bind("pageAnimationStart",loadPatientsList);$("#code").bind("pageAnimationStart",loadCode);$("#code_list").bind("pageAnimationStart",loadCodeList);$("#settings").submit(saveSettings);$("#settings").bind("pageAnimationStart",loadSettings);$("#add_partner").submit(addPartner);$("#sync").bind("pagein",loadSync);$("#sync").bind("pageout",function(){$("#sync_related").hide()});$("#sync").submit(logSyncSuccess);var c=(new Date).getFullYear();$(".mobiscroll").each(function(){if(this.id!="date_of_birth")$(this).scroller({theme:"sense-ui",mode:"scroller",startYear:1900,endYear:c,dateFormat:"M dd yy",dateOrder:"MMddyy",preset:"datetime",ampm:true,timeFormat:"HH:ii"})});$("#date_of_birth").scroller({theme:"sense-ui",mode:"scroller",startYear:1900,endYear:c,dateFormat:"M dd yy",dateOrder:"MMddyy",preset:"date"});$("#jqt .s-scrollwrapper select").bind("blur",function(){$("#jqt .s-scrollwrapper").scrollTop("0")});document.addEventListener("touchmove",function(a){moved=true;a.preventDefault();a.stopPropagation()},false);document.addEventListener("touchstart",function(a){moved=false});setPIN();setVersion();jQT.goTo("#passcode")});var secondClick=false